var e=require("@onflow/util-invariant"),t=require("@onflow/util-actor"),n=require("@onflow/protobuf"),r=require("@onflow/util-address"),o=require("@improbable-eng/grpc-web"),i=require("@improbable-eng/grpc-web-node-http-transport"),s=require("sha3"),u=require("@onflow/rlp"),a=require("@onflow/util-template");function c(){return c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(this,arguments)}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function m(e,t,n){return m=d()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&f(o,n.prototype),o},m.apply(null,arguments)}function p(e){var t="function"==typeof Map?new Map:void 0;return p=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return m(e,arguments,l(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),f(n,e)},p(e)}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var h,v='{\n  "tag":"UNKNOWN",\n  "assigns":{},\n  "status":"OK",\n  "reason":null,\n  "accounts":{},\n  "params":{},\n  "arguments":{},\n  "message": {\n    "cadence":null,\n    "refBlock":null,\n    "computeLimit":null,\n    "proposer":null,\n    "payer":null,\n    "authorizations":[],\n    "params":[],\n    "arguments":[]\n  },\n  "proposer":null,\n  "authorizations":[],\n  "payer":null,\n  "events": {\n    "eventType":null,\n    "start":null,\n    "end":null,\n    "blockIds":[]\n  },\n  "transaction": {\n    "id":null\n  },\n  "block": {\n    "id":null,\n    "height":null,\n    "isSealed":null\n  },\n  "account": {\n    "addr":null\n  },\n  "collection": {\n    "id":null\n  }\n}',y=new Set(Object.keys(JSON.parse(v))),k=function(){return JSON.parse(v)},b="abcdefghijklmnopqrstuvwxyz0123456789".split(""),I=function(){return b[~~(Math.random()*b.length)]},P=function(){return Array.from({length:10},I).join("")},S=function(e){return Array.isArray(e)},x=function(e){return null==e},B=function(e){return"function"==typeof e},A=function(e){return e.status="OK",e},w=function(e,t){return e.status="BAD",e.reason=t,e},E=function(e){return function(t){return t.tag=e,A(t)}},T=function(t,n){return void 0===n&&(n={}),function(r){var o;e.invariant("function"==typeof t||"object"==typeof t,"prepAccount must be passed an authorization function or an account object"),e.invariant(null!=n.role,"Account must have a role");var i=JSON.parse('{\n  "kind":"ACCOUNT",\n  "tempId":null,\n  "addr":null,\n  "keyId":null,\n  "sequenceNum":null,\n  "signature":null,\n  "signingFunction":null,\n  "resolve":null,\n  "role": {\n    "proposer":false,\n    "authorizer":false,\n    "payer":false,\n    "param":false\n  }\n}'),s=n.role,u=P();return t.authorization&&B(t.authorization)&&(t={resolve:t.authorization}),!t.authorization&&B(t)&&(t={resolve:t}),r.accounts[u]=c({},i,{tempId:u},t,{role:c({},i.role,"object"==typeof t.role?t.role:{},(o={},o[s]=!0,o))}),"authorizer"===s?r.authorizations.push(u):r[s]=u,r}},G=function(e){return function(t){var n=P();return t.message.arguments.push(n),t.arguments[n]=JSON.parse('{\n  "kind":"ARGUMENT",\n  "tempId":null,\n  "value":null,\n  "asArgument":null,\n  "xform":null,\n  "resolve": null,\n  "resolveArgument": null\n}'),t.arguments[n].tempId=n,t.arguments[n].value=e.value,t.arguments[n].asArgument=e.asArgument,t.arguments[n].xform=e.xform,t.arguments[n].resolve=e.resolve,t.arguments[n].resolveArgument=B(e.resolveArgument)?e.resolveArgument.bind(e):e.resolveArgument,A(t)}},N=E("SCRIPT"),O=E("TRANSACTION"),j=E("GET_TRANSACTION_STATUS"),L=E("GET_TRANSACTION"),_=E("GET_ACCOUNT"),R=E("GET_EVENTS"),C=E("GET_LATEST_BLOCK"),D=E("GET_BLOCK_BY_ID"),U=E("GET_BLOCK_BY_HEIGHT"),K=E("PING"),H=E("GET_BLOCK"),q=E("GET_BLOCK_HEADER"),F=E("GET_COLLECTION"),z=function(e){return function(t){return t.tag===e}},M=z("UNKNOWN"),J=z("SCRIPT"),W=z("TRANSACTION"),V=z("GET_TRANSACTION_STATUS"),Y=z("GET_TRANSACTION"),X=z("GET_ACCOUNT"),$=z("GET_EVENTS"),Z=z("GET_LATEST_BLOCK"),Q=z("GET_BLOCK_BY_ID"),ee=z("GET_BLOCK_BY_HEIGHT"),te=z("PING"),ne=z("GET_BLOCK"),re=z("GET_BLOCK_HEADER"),oe=z("GET_COLLECTION"),ie=function(e){return"BAD"===e.status},se=function e(t,n){void 0===n&&(n=[]);try{return Promise.resolve(function(r,o){try{var i=Promise.resolve(t).then(function(r){if(t=function(e){for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t];if(!y.has(r))throw new Error('"'+r+'" is an invalid root level Interaction property.')}return e}(r),ie(t))throw new Error("Interaction Error: "+t.reason);if(!n.length)return t;var o=n[0],i=n.slice(1);return Promise.resolve(o).then(function(n){if(B(n))return e(n(t),i);if(x(n)||!n)return e(t,i);if(function(e){if(null===(t=e)||"object"!=typeof t||x(e)||function(e){return"number"==typeof e}(e))return!1;for(var t,n,r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}(e))){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(y);!(n=r()).done;)if(!e.hasOwnProperty(n.value))return!1;return!0}(n))return e(n,i);throw new Error("Invalid Interaction Composition")})})}catch(e){return o(e)}return i&&i.then?i.then(void 0,o):i}(0,function(e){throw e}))}catch(e){return Promise.reject(e)}},ue=function e(){var t=[].slice.call(arguments),n=t[0],r=t[1];return S(n)&&null==r?function(t){return e(t,n)}:se(n,r)},ae=function(e){return e},ce=function(e,t,n){return null==e.assigns[t]?n:e.assigns[t]},le=function(e,t){return function(n){return n.assigns[e]=t,A(n)}},fe=function(e,t){return void 0===t&&(t=ae),function(n){return n.assigns[e]=t(n.assigns[e],n),A(n)}};function de(e){return void 0===e&&(e=[]),ue(k(),e)}var me=function e(t,n){void 0===t&&(t=[]);try{if(!t.length)return Promise.resolve(n);var r=t[0],o=t.slice(1);return Promise.resolve(Ie(r)).then(function(t){return null==t?e(o,n):t})}catch(e){return Promise.reject(e)}},pe="config",ge="PUT_CONFIG",he="GET_CONFIG",ve="CONFIG/UPDATED",ye=function(e){return e},ke=((h={})[ge]=function(e,t,n){var r=n.key,o=n.value;if(null==r)throw new Error("Missing 'key' for config/put.");e.put(r,o),e.broadcast(ve,c({},e.all()))},h[he]=function(e,t,n){var r=n.key,o=n.fallback;if(null==r)throw new Error("Missing 'key' for config/get");t.reply(e.get(r,o))},h.GET_ALL_CONFIG=function(e,t){t.reply(c({},e.all()))},h.UPDATE_CONFIG=function(e,t,n){var r=n.key,o=n.fn;if(null==r)throw new Error("Missing 'key' for config/update");e.update(r,o||ye),e.broadcast(ve,c({},e.all()))},h.DELETE_CONFIG=function(e,t,n){var r=n.key;if(null==r)throw new Error("Missing 'key' for config/delete");e.delete(r),e.broadcast(ve,c({},e.all()))},h.CLEAR_CONFIG=function(e,t){for(var n=0,r=Object.keys(e.all());n<r.length;n++)e.delete(r[n]);e.broadcast(ve,c({},e.all()))},h.WHERE_CONFIG=function(e,t,n){var r=n.pattern;if(null==r)throw new Error("Missing 'pattern' for config/where");t.reply(e.where(r))},h[t.SUBSCRIBE]=function(e,t){e.subscribe(t.from),e.send(t.from,ve,c({},e.all()))},h[t.UNSUBSCRIBE]=function(e,t){e.unsubscribe(t.from)},h);function be(e,n){return t.send(pe,ge,{key:e,value:n}),Ee()}function Ie(e,n){return t.send(pe,he,{key:e,fallback:n},{expectReply:!0,timeout:10})}function Pe(){return t.send(pe,"GET_ALL_CONFIG",null,{expectReply:!0,timeout:10})}function Se(e,n){return void 0===n&&(n=ye),t.send(pe,"UPDATE_CONFIG",{key:e,fn:n}),Ee()}function xe(e){return t.send(pe,"DELETE_CONFIG",{key:e}),Ee()}function Be(e){return t.send(pe,"WHERE_CONFIG",{pattern:e},{expectReply:!0,timeout:10})}function Ae(e){return t.subscriber(pe,function(){return t.spawn(ke,pe)},e)}function we(){return t.send(pe,"CLEAR_CONFIG")}function Ee(e){return null!=e&&"object"==typeof e&&Object.keys(e).map(function(t){return be(t,e[t])}),{put:be,get:Ie,all:Pe,first:me,update:Se,delete:xe,where:Be,subscribe:Ae,overload:Ge}}t.spawn(ke,pe),Ee.put=be,Ee.get=Ie,Ee.all=Pe,Ee.first=me,Ee.update=Se,Ee.delete=xe,Ee.where=Be,Ee.subscribe=Ae,Ee.overload=Ge;var Te=function(e){return e};function Ge(e,t){return void 0===e&&(e={}),void 0===t&&(t=Te),new Promise(function(n,r){try{return Promise.resolve(Pe()).then(function(o){var i=function(r,i){try{var s=function(){Ee(e);var r=t;return Promise.resolve(Pe()).then(function(e){return Promise.resolve(r(e)).then(function(e){return Promise.resolve(we()).then(function(){return Promise.resolve(Ee(o)).then(function(){n(e)})})})})}()}catch(e){return i(e)}return s&&s.then?s.then(void 0,i):s}(0,function(e){return Promise.resolve(we()).then(function(){return Promise.resolve(Ee(o)).then(function(){r(e)})})});if(i&&i.then)return i.then(function(){})})}catch(e){return Promise.reject(e)}})}var Ne=function(){return JSON.parse('{\n    "tag":null,\n    "transaction":null,\n    "transactionStatus":null,\n    "transactionId":null,\n    "encodedData":null,\n    "events":null,\n    "account":null,\n    "block":null,\n    "blockHeader":null,\n    "latestBlock":null,\n    "collection":null\n}')},Oe=function(e,t,n){try{return Promise.resolve(Ee().get("grpc.metadata",{})).then(function(r){return new Promise(function(i,s){o.grpc.unary(t,{request:n,host:e,metadata:new o.grpc.Metadata(r),onEnd:function(e){var t=e.statusMessage;e.status===o.grpc.Code.OK?i(e.message):s(new Error(t))}})})})}catch(e){return Promise.reject(e)}};o.grpc.setDefaultTransport(i.NodeHttpTransport());var je=function(e){return Buffer.from(e,"hex")},Le=function(e){return Buffer.from(e.padStart(16,0),"hex")},_e={0:"UNKNOWN",1:"PENDING",2:"FINALIZED",3:"EXECUTED",4:"SEALED",5:"EXPIRED"},Re=function(e){if(null!=e)return _e[String(e)]},Ce=function(e){return Buffer.from(e).toString("hex")},De=function(e){return Buffer.from(JSON.stringify(e),"utf8")};function Ue(e,t){var n=Ne();return n.tag=e.tag,n.encodedData=JSON.parse(Buffer.from(t.getValue_asU8()).toString("utf8")),n}var Ke=function(e){return Buffer.from(e).toString("hex")},He=function(e){return Buffer.from(e.padStart(16,0),"hex")};function qe(e,t){var n=Ne();n.tag=e.tag;var o,i=t.getAccount(),s=(o=i.getContractsMap())?o.getEntryList().reduce(function(e,t){var n;return c({},e,((n={})[t[0]]=Buffer.from(t[1]||new UInt8Array).toString("utf8"),n))},{}):{};return n.account={address:r.withPrefix(Ke(i.getAddress_asU8())),balance:i.getBalance(),code:Buffer.from(i.getCode_asU8()||new UInt8Array).toString("utf8"),contracts:s,keys:i.getKeysList().map(function(e){return{index:e.getIndex(),publicKey:Ke(e.getPublicKey_asU8()),signAlgo:e.getSignAlgo(),hashAlgo:e.getHashAlgo(),weight:e.getWeight(),sequenceNumber:e.getSequenceNumber(),revoked:e.getRevoked()}})},n}var Fe=function(e){return Buffer.from(e).toString("hex")};function ze(e,t){var n=Ne();n.tag=e.tag;var r=t.getResultsList();return n.events=r.reduce(function(e,t){var n=Fe(t.getBlockId_asU8()),r=t.getBlockHeight(),o=t.getBlockTimestamp().toDate().toISOString();return t.getEventsList().forEach(function(t){e.push({blockId:n,blockHeight:r,blockTimestamp:o,type:t.getType(),transactionId:Fe(t.getTransactionId_asU8()),transactionIndex:t.getTransactionIndex(),eventIndex:t.getEventIndex(),payload:JSON.parse(Buffer.from(t.getPayload_asU8()).toString("utf8"))})}),e},[]),n}var Me=function(e){return Buffer.from(e).toString("hex")};function Je(e,t){var n=t.getBlock(),r=n.getCollectionGuaranteesList(),o=n.getBlockSealsList(),i=n.getSignaturesList().map(Me),s=Ne();return s.tag=e.tag,s.block={id:Me(n.getId_asU8()),parentId:Me(n.getParentId_asU8()),height:n.getHeight(),timestamp:n.getTimestamp().toDate().toISOString(),collectionGuarantees:r.map(function(e){return{collectionId:Me(e.getCollectionId_asU8()),signatures:e.getSignaturesList().map(Me)}}),blockSeals:o.map(function(e){return{blockId:Me(e.getBlockId_asU8()),executionReceiptId:Me(e.getExecutionReceiptId_asU8()),executionReceiptSignatures:e.getExecutionReceiptSignaturesList().map(Me),resultApprovalSignatures:e.getResultApprovalSignaturesList().map(Me)}}),signatures:i},s}var We=function(e){return Buffer.from(e).toString("hex")};function Ve(e,t){var n=t.getBlock(),r=Ne();return r.tag=e.tag,r.blockHeader={id:We(n.getId_asU8()),parentId:We(n.getParentId_asU8()),height:n.getHeight(),timestamp:n.getTimestamp().toDate().toISOString()},r}var Ye=function(e){return Buffer.from(e).toString("hex")},Xe=function(e){return Buffer.from(e).toString("hex")},$e=function(e){return Buffer.from(e).toString("hex")},Ze=function(e){return Buffer.from(e).toString("hex")},Qe=function(t,o){void 0===o&&(o={});try{var i=function(i){return o.node=i,e.invariant(o.node,'SDK Send Error: Either opts.node or "accessNode.api" in config must be defined.'),Promise.resolve(t).then(function(i){switch(t=i,!0){case W(t):return o.sendTransaction?o.sendTransaction(t,o):function(t,o){void 0===o&&(o={});try{e.invariant(o.node,"SDK Send Transaction Error: opts.node must be defined.");var i=o.unary||Oe;return Promise.resolve(t).then(function(e){t=e;var s=new n.Transaction;s.setScript(Buffer.from(t.message.cadence,"utf8")),s.setGasLimit(t.message.computeLimit),s.setReferenceBlockId(t.message.refBlock?je(t.message.refBlock):null),s.setPayer(Le(r.sansPrefix(t.accounts[t.payer].addr))),t.message.arguments.forEach(function(e){return s.addArguments(function(e){return Buffer.from(JSON.stringify(e),"utf8")}(t.arguments[e].asArgument))}),t.authorizations.map(function(e){return t.accounts[e].addr}).reduce(function(e,t){return e.find(function(e){return e===t})?e:[].concat(e,[t])},[]).forEach(function(e){return s.addAuthorizers(Le(r.sansPrefix(e)))});var u=new n.Transaction.ProposalKey;u.setAddress(Le(r.sansPrefix(t.accounts[t.proposer].addr))),u.setKeyId(t.accounts[t.proposer].keyId),u.setSequenceNumber(t.accounts[t.proposer].sequenceNum),s.setProposalKey(u);for(var a=0,c=Object.values(t.accounts);a<c.length;a++){var l=c[a];try{if(!l.role.payer&&null!=l.signature){var f=new n.Transaction.Signature;f.setAddress(Le(r.sansPrefix(l.addr))),f.setKeyId(l.keyId),f.setSignature(je(l.signature)),s.addPayloadSignatures(f)}}catch(e){throw console.error("Trouble applying payload signature",{acct:l,ix:t}),e}}for(var d=0,m=Object.values(t.accounts);d<m.length;d++){var p=m[d];try{if(p.role.payer&&null!=p.signature){var g=new n.Transaction.Signature;g.setAddress(Le(r.sansPrefix(p.addr))),g.setKeyId(p.keyId),g.setSignature(je(p.signature)),s.addEnvelopeSignatures(g)}}catch(e){throw console.error("Trouble applying envelope signature",{acct:p,ix:t}),e}}var h=new n.SendTransactionRequest;h.setTransaction(s);var v=Date.now();return Promise.resolve(i(o.node,n.AccessAPI.SendTransaction,h)).then(function(e){var n,r=Date.now(),o=Ne();return o.tag=t.tag,o.transactionId=(n=e.getId_asU8(),Buffer.from(n).toString("hex")),"undefined"!=typeof window&&window.dispatchEvent(new CustomEvent("FLOW::TX",{detail:{txId:o.transactionId,delta:r-v}})),o})})}catch(e){return Promise.reject(e)}}(t,o);case V(t):return o.sendGetTransactionStatus?o.sendGetTransactionStatus(t,o):function(t,r){void 0===r&&(r={});try{e.invariant(r.node,"SDK Send Get Transaction Status Error: opts.node must be defined.");var o=r.unary||Oe;return Promise.resolve(t).then(function(e){t=e;var i=new n.GetTransactionRequest;return i.setId(Buffer.from(t.transaction.id,"hex")),Promise.resolve(o(r.node,n.AccessAPI.GetTransactionResult,i)).then(function(e){var n=e.getEventsList(),r=Ne(),o=e.getStatus();return r.tag=t.tag,r.transactionStatus={status:o,statusString:Re(o),statusCode:e.getStatusCode(),errorMessage:e.getErrorMessage(),events:n.map(function(e){return{type:e.getType(),transactionId:(t=e.getTransactionId_asU8(),Buffer.from(t).toString("hex")),transactionIndex:e.getTransactionIndex(),eventIndex:e.getEventIndex(),payload:JSON.parse(Buffer.from(e.getPayload_asU8()).toString("utf8"))};var t})},r})})}catch(e){return Promise.reject(e)}}(t,o);case Y(t):return o.sendGetTransaction?o.sendGetTransaction(t,o):function(t,r){void 0===r&&(r={});try{e.invariant(r.node,"SDK Send Get Transaction Error: opts.node must be defined.");var o=r.unary||Oe;return Promise.resolve(t).then(function(e){t=e;var i=new n.GetTransactionRequest;return i.setId(Buffer.from(t.transaction.id,"hex")),Promise.resolve(o(r.node,n.AccessAPI.GetTransaction,i)).then(function(e){var n=Ne();n.tag=t.tag;var r,o=function(e){return{address:Ce(e.getAddress_asU8()),keyId:e.getKeyId(),signature:Ce(e.getSignature_asU8())}},i=e.getTransaction();return n.transaction={script:Buffer.from(i.getScript_asU8()).toString("utf8"),args:i.getArgumentsList().map(function(e){return JSON.parse(Buffer.from(e).toString("utf8"))}),referenceBlockId:Ce(i.getReferenceBlockId_asU8()),gasLimit:i.getGasLimit(),proposalKey:(r=i.getProposalKey(),{address:Ce(r.getAddress_asU8()),keyId:r.getKeyId(),sequenceNumber:r.getSequenceNumber()}),payer:Ce(i.getPayer_asU8()),authorizers:i.getAuthorizersList().map(Ce),payloadSignatures:i.getPayloadSignaturesList().map(o),envelopeSignatures:i.getEnvelopeSignaturesList().map(o)},n})})}catch(e){return Promise.reject(e)}}(t,o);case J(t):return o.sendExecuteScript?o.sendExecuteScript(t,o):function(t,r){void 0===r&&(r={});try{return e.invariant(r.node,"SDK Send Execute Script Error: opts.node must be defined."),Promise.resolve(t).then(function(e){return t=e,Promise.resolve(t.block.id?function(e,t){try{var r=t.unary||Oe,o=new n.ExecuteScriptAtBlockIDRequest;o.setBlockId(Buffer.from(e.block.id,"hex"));var i=Buffer.from(e.message.cadence,"utf8");return e.message.arguments.forEach(function(t){return o.addArguments(De(e.arguments[t].asArgument))}),o.setScript(i),Promise.resolve(r(t.node,n.AccessAPI.ExecuteScriptAtBlockID,o)).then(function(t){return Ue(e,t)})}catch(e){return Promise.reject(e)}}(t,r):t.block.height?function(e,t){try{var r=t.unary||Oe,o=new n.ExecuteScriptAtBlockHeightRequest;o.setBlockHeight(Number(e.block.height));var i=Buffer.from(e.message.cadence,"utf8");return e.message.arguments.forEach(function(t){return o.addArguments(De(e.arguments[t].asArgument))}),o.setScript(i),Promise.resolve(r(t.node,n.AccessAPI.ExecuteScriptAtBlockHeight,o)).then(function(t){return Ue(e,t)})}catch(e){return Promise.reject(e)}}(t,r):function(e,t){try{var r=t.unary||Oe,o=new n.ExecuteScriptAtLatestBlockRequest,i=Buffer.from(e.message.cadence,"utf8");return e.message.arguments.forEach(function(t){return o.addArguments(De(e.arguments[t].asArgument))}),o.setScript(i),Promise.resolve(r(t.node,n.AccessAPI.ExecuteScriptAtLatestBlock,o)).then(function(t){return Ue(e,t)})}catch(e){return Promise.reject(e)}}(t,r))})}catch(e){return Promise.reject(e)}}(t,o);case X(t):return o.sendGetAccount?o.sendGetAccount(t,o):function(t,o){void 0===o&&(o={});try{return e.invariant(o.node,"SDK Send Get Account Error: opts.node must be defined."),Promise.resolve(t).then(function(e){return t=e,Promise.resolve(null!==t.block.height?function(e,t){try{var o=t.unary||Oe,i=new n.GetAccountAtBlockHeightRequest;return i.setBlockHeight(Number(e.block.height)),i.setAddress(He(r.sansPrefix(e.account.addr))),Promise.resolve(o(t.node,n.AccessAPI.GetAccountAtBlockHeight,i)).then(function(t){return qe(e,t)})}catch(e){return Promise.reject(e)}}(t,o):function(e,t){try{var o=t.unary||Oe,i=new n.GetAccountAtLatestBlockRequest;return i.setAddress(He(r.sansPrefix(e.account.addr))),Promise.resolve(o(t.node,n.AccessAPI.GetAccountAtLatestBlock,i)).then(function(t){return qe(e,t)})}catch(e){return Promise.reject(e)}}(t,o))})}catch(e){return Promise.reject(e)}}(t,o);case $(t):return o.sendGetEvents?o.sendGetEvents(t,o):function(t,r){void 0===r&&(r={});try{return e.invariant(r.node,"SDK Send Get Events Error: opts.node must be defined."),Promise.resolve(t).then(function(o){var i=null!==(t=o).events.start,s=Array.isArray(t.events.blockIds)&&t.events.blockIds.length>0;return e.invariant(i||s,"SendGetEventsError: Unable to determine which get events request to send. Either a block height range, or block IDs must be specified."),Promise.resolve(i?function(e,t){try{var r=t.unary||Oe,o=new n.GetEventsForHeightRangeRequest;return o.setType(e.events.eventType),o.setStartHeight(Number(e.events.start)),o.setEndHeight(Number(e.events.end)),Promise.resolve(r(t.node,n.AccessAPI.GetEventsForHeightRange,o)).then(function(t){return ze(e,t)})}catch(e){return Promise.reject(e)}}(t,r):function(e,t){try{var r=t.unary||Oe,o=new n.GetEventsForBlockIDsRequest;return o.setType(e.events.eventType),e.events.blockIds.forEach(function(e){return o.addBlockIds(Buffer.from(e,"hex"))}),Promise.resolve(r(t.node,n.AccessAPI.GetEventsForBlockIDs,o)).then(function(t){return ze(e,t)})}catch(e){return Promise.reject(e)}}(t,r))})}catch(e){return Promise.reject(e)}}(t,o);case Z(t):return o.sendGetLatestBlock?o.sendGetLatestBlock(t,o):function(t,r){void 0===r&&(r={});try{return e.invariant(r.node,"SDK Send Get Latest Block Error: opts.node must be defined."),Promise.resolve(t).then(function(e){t=e;var o=new n.GetLatestBlockRequest;return t.latestBlock&&t.latestBlock.isSealed&&(o.setIsSealed(t.latestBlock.isSealed),console.error("\n          %c@onflow/send Deprecation Notice\n          ========================\n\n          Operating upon data of the latestBlock field of the interaction object is deprecated and will no longer be recognized in future releases of @onflow/send.\n          Find out more here: https://github.com/onflow/flow-js-sdk/blob/master/packages/send/WARNINGS.md#0001-Deprecating-latestBlock-field\n\n          =======================\n        ".replace(/\n\s+/g,"\n").trim(),"font-weight:bold;font-family:monospace;")),t.block&&t.block.isSealed&&o.setIsSealed(t.block.isSealed),Promise.resolve(Oe(r.node,n.AccessAPI.GetLatestBlock,o)).then(function(e){var n=e.getBlock(),r=n.getCollectionGuaranteesList(),o=n.getBlockSealsList(),i=n.getSignaturesList(),s=Ne();return s.tag=t.tag,s.block={id:Ye(n.getId_asU8()),parentId:Ye(n.getParentId_asU8()),height:n.getHeight(),timestamp:n.getTimestamp(),collectionGuarantees:r.map(function(e){return{collectionId:Ye(e.getCollectionId_asU8()),signatures:e.getSignaturesList()}}),blockSeals:o.map(function(e){return{blockId:Ye(e.getBlockId_asU8()),executionReceiptId:Ye(e.getExecutionReceiptId_asU8()),executionReceiptSignatures:e.getExecutionReceiptSignaturesList(),resultApprovalSignatures:e.getResultApprovalSignaturesList()}}),signatures:i},s})})}catch(e){return Promise.reject(e)}}(t,o);case ne(t):return o.sendGetBlock?o.sendGetBlock(t,o):function(t,r){void 0===r&&(r={});try{return e.invariant(r.node,"SDK Send Get Block Error: opts.node must be defined."),Promise.resolve(t).then(function(e){var o=null!==(t=e).block.height;return Promise.resolve(null!==t.block.id?function(e,t){try{var r=t.unary||Oe,o=new n.GetBlockByIDRequest;return o.setId(Buffer.from(e.block.id,"hex")),Promise.resolve(r(t.node,n.AccessAPI.GetBlockByID,o)).then(function(t){return Je(e,t)})}catch(e){return Promise.reject(e)}}(t,r):o?function(e,t){try{var r=t.unary||Oe,o=new n.GetBlockByHeightRequest;return o.setHeight(Number(e.block.height)),Promise.resolve(r(t.node,n.AccessAPI.GetBlockByHeight,o)).then(function(t){return Je(e,t)})}catch(e){return Promise.reject(e)}}(t,r):function(e,t){try{var r,o=t.unary||Oe,i=new n.GetLatestBlockRequest;return null!=(r=e.block)&&r.isSealed&&i.setIsSealed(e.block.isSealed),Promise.resolve(o(t.node,n.AccessAPI.GetLatestBlock,i)).then(function(t){return Je(e,t)})}catch(e){return Promise.reject(e)}}(t,r))})}catch(e){return Promise.reject(e)}}(t,o);case re(t):return o.sendGetBlockHeader?o.sendGetBlockHeader(t,o):function(t,r){void 0===r&&(r={});try{return e.invariant(r.node,"SDK Send Get Block Header Error: opts.node must be defined."),Promise.resolve(t).then(function(e){var o=null!==(t=e).block.height;return Promise.resolve(null!==t.block.id?function(e,t){try{var r=t.unary||Oe,o=new n.GetBlockHeaderByIDRequest;return o.setId(Buffer.from(e.block.id,"hex")),Promise.resolve(r(t.node,n.AccessAPI.GetBlockHeaderByID,o)).then(function(t){return Ve(e,t)})}catch(e){return Promise.reject(e)}}(t,r):o?function(e,t){try{var r=t.unary||Oe,o=new n.GetBlockHeaderByHeightRequest;return o.setHeight(Number(e.block.height)),Promise.resolve(r(t.node,n.AccessAPI.GetBlockHeaderByHeight,o)).then(function(t){return Ve(e,t)})}catch(e){return Promise.reject(e)}}(t,r):function(e,t){try{var r,o=t.unary||Oe,i=new n.GetLatestBlockHeaderRequest;return null!=(r=e.block)&&r.isSealed&&i.setIsSealed(e.block.isSealed),Promise.resolve(o(t.node,n.AccessAPI.GetLatestBlockHeader,i)).then(function(t){return Ve(e,t)})}catch(e){return Promise.reject(e)}}(t,r))})}catch(e){return Promise.reject(e)}}(t,o);case Q(t):return o.sendGetBlockById?o.sendGetBlockById(t,o):function(t,r){void 0===r&&(r={});try{return e.invariant(r.node,"SDK Send Get Block By ID Error: opts.node must be defined."),Promise.resolve(t).then(function(e){t=e;var o=new n.GetBlockByIDRequest;return o.setId(Buffer.from(t.block.id,"hex")),Promise.resolve(Oe(r.node,n.AccessAPI.GetBlockByID,o)).then(function(e){var n=e.getBlock(),r=n.getCollectionGuaranteesList(),o=n.getBlockSealsList(),i=n.getSignaturesList(),s=Ne();return s.tag=t.tag,s.block={id:Xe(n.getId_asU8()),parentId:Xe(n.getParentId_asU8()),height:n.getHeight(),timestamp:n.getTimestamp(),collectionGuarantees:r.map(function(e){return{collectionId:Xe(e.getCollectionId_asU8()),signatures:e.getSignaturesList()}}),blockSeals:o.map(function(e){return{blockId:Xe(e.getBlockId_asU8()),executionReceiptId:Xe(e.getExecutionReceiptId_asU8()),executionReceiptSignatures:e.getExecutionReceiptSignaturesList(),resultApprovalSignatures:e.getResultApprovalSignaturesList()}}),signatures:i},s})})}catch(e){return Promise.reject(e)}}(t,o);case ee(t):return o.sendGetBlockByHeight?o.sendGetBlockByHeight(t,o):function(t,r){void 0===r&&(r={});try{return e.invariant(r.node,"SDK Send Get Block By Height Error: opts.node must be defined."),Promise.resolve(t).then(function(e){t=e;var o=new n.GetBlockByHeightRequest;return o.setHeight(Number(t.block.height)),Promise.resolve(Oe(r.node,n.AccessAPI.GetBlockByHeight,o)).then(function(e){var n=e.getBlock(),r=n.getCollectionGuaranteesList(),o=n.getBlockSealsList(),i=n.getSignaturesList(),s=Ne();return s.tag=t.tag,s.block={id:$e(n.getId_asU8()),parentId:$e(n.getParentId_asU8()),height:n.getHeight(),timestamp:n.getTimestamp(),collectionGuarantees:r.map(function(e){return{collectionId:$e(e.getCollectionId_asU8()),signatures:e.getSignaturesList()}}),blockSeals:o.map(function(e){return{blockId:$e(e.getBlockId_asU8()),executionReceiptId:$e(e.getExecutionReceiptId_asU8()),executionReceiptSignatures:e.getExecutionReceiptSignaturesList(),resultApprovalSignatures:e.getResultApprovalSignaturesList()}}),signatures:i},s})})}catch(e){return Promise.reject(e)}}(t,o);case oe(t):return o.sendGetCollection?o.sendGetCollection(t,o):function(t,r){void 0===r&&(r={});try{e.invariant(r.node,"SDK Send Get Collection Error: opts.node must be defined.");var o=r.unary||Oe;return Promise.resolve(t).then(function(e){t=e;var i=new n.GetCollectionByIDRequest;return i.setId(Buffer.from(t.collection.id,"hex")),Promise.resolve(o(r.node,n.AccessAPI.GetCollectionByID,i)).then(function(e){var n=e.getCollection(),r=Ne();return r.tag=t.tag,r.collection={id:Ze(n.getId_asU8()),transactionIds:n.getTransactionIdsList().map(Ze)},r})})}catch(e){return Promise.reject(e)}}(t,o);case te(t):return o.sendPing?o.sendPing(t,o):function(t,r){void 0===r&&(r={});try{e.invariant(r.node,"SDK Send Ping Error: opts.node must be defined.");var o=r.unary||Oe;return Promise.resolve(t).then(function(e){t=e;var i=new n.PingRequest;return Promise.resolve(o(r.node,n.AccessAPI.Ping,i)).then(function(e){var n=Ne();return n.tag=t.tag,n})})}catch(e){return Promise.reject(e)}}(t,o);default:return t}})},s=o.node;return Promise.resolve(s?i(s):Promise.resolve(Ee().get("accessNode.api")).then(i))}catch(e){return Promise.reject(e)}};function et(e){return void 0===e&&(e=null),ue([H,function(t){return t.block.isSealed=e,A(t)}])}function tt(e){return ue([_,function(t){return t.account.addr=r.sansPrefix(e),A(t)}])}var nt=function(e,t,n){try{try{return Promise.resolve(Number(e))}catch(e){throw new Error("Decode Number Error : "+n.join("."))}}catch(e){return Promise.reject(e)}},rt=function(e){return Promise.resolve(e)},ot=function(e,t,n){try{return Promise.resolve(e.fields.reduce(function(e,r){return Promise.resolve(e).then(function(o){return e=o,Promise.resolve(ut(r.value,t,[].concat(n,[r.name]))).then(function(t){return e[r.name]=t,e})})},Promise.resolve({}))).then(function(n){var r=e.id&&st(t,e.id);return r?Promise.resolve(r(n)):n})}catch(e){return Promise.reject(e)}},it={UInt:nt,Int:nt,UInt8:nt,Int8:nt,UInt16:nt,Int16:nt,UInt32:nt,Int32:nt,UInt64:nt,Int64:nt,UInt128:nt,Int128:nt,UInt256:nt,Int256:nt,Word8:nt,Word16:nt,Word32:nt,Word64:nt,UFix64:rt,Fix64:rt,String:rt,Character:rt,Bool:rt,Address:rt,Void:function(){return Promise.resolve(null)},Optional:function(e,t,n){return Promise.resolve(e?ut(e,t,n):null)},Reference:function(e){try{return Promise.resolve({address:e.address,type:e.type})}catch(e){return Promise.reject(e)}},Array:function(e,t,n){try{return Promise.resolve(Promise.all(e.map(function(e){return new Promise(function(r){try{return Promise.resolve(ut(e,t,[].concat(n,[e.type]))).then(r)}catch(e){return Promise.reject(e)}})})))}catch(e){return Promise.reject(e)}},Dictionary:function(e,t,n){try{return Promise.resolve(e.reduce(function(e,r){return Promise.resolve(e).then(function(o){return e=o,Promise.resolve(ut(r.key,t,[].concat(n,[r.key]))).then(function(o){return Promise.resolve(ut(r.value,t,[].concat(n,[r.key]))).then(function(t){return e[o]=t,e})})})},Promise.resolve({})))}catch(e){return Promise.reject(e)}},Event:ot,Resource:ot,Struct:ot,Enum:ot,Type:function(e){try{return Promise.resolve(e.staticType)}catch(e){return Promise.reject(e)}},Path:function(e){try{return Promise.resolve({domain:e.domain,identifier:e.identifier})}catch(e){return Promise.reject(e)}},Capability:function(e){try{return Promise.resolve({path:e.path,address:e.address,borrowType:e.borrowType})}catch(e){return Promise.reject(e)}}},st=function(e,t){var n=Object.keys(e).find(function(e){return/^\/.*\/$/.test(e)?new RegExp(e.substring(1,e.length-1)).test(t):e===t});return t&&n&&e[n]},ut=function(e,t,n){try{var r=st(t,e.type);if(!r)throw new Error("Undefined Decoder Error: "+e.type+"@"+n.join("."));return Promise.resolve(r(e.value,t,n))}catch(e){return Promise.reject(e)}},at=function(e,t,n){void 0===t&&(t={}),void 0===n&&(n=[]);var r=c({},it,t);return Promise.resolve(ut(e,r,n))},ct=function(e,t){void 0===t&&(t={});try{var n,r=c({},it,t),o=e.encodedData?Promise.resolve(at(e.encodedData,r)).then(function(e){return n=1,e}):e.transactionStatus?Promise.resolve(Promise.all(e.transactionStatus.events.map(function(e){try{var t=e.eventIndex,n=e.transactionIndex,o=e.transactionId,i=e.type;return Promise.resolve(at(e.payload,r)).then(function(e){return{type:i,transactionId:o,transactionIndex:n,eventIndex:t,data:e}})}catch(e){return Promise.reject(e)}}))).then(function(t){var r=c({},e.transactionStatus,{events:t});return n=1,r}):e.transaction?(n=1,e.transaction):e.events?Promise.resolve(Promise.all(e.events.map(function(e){try{var t=e.eventIndex,n=e.transactionIndex,o=e.transactionId,i=e.type,s=e.blockTimestamp,u=e.blockHeight,a=e.blockId;return Promise.resolve(at(e.payload,r)).then(function(e){return{blockId:a,blockHeight:u,blockTimestamp:s,type:i,transactionId:o,transactionIndex:n,eventIndex:t,data:e}})}catch(e){return Promise.reject(e)}}))).then(function(e){return n=1,e}):e.account?(n=1,e.account):e.block?(n=1,e.block):e.blockHeader?(n=1,e.blockHeader):e.latestBlock?(console.error("\n          %c@onflow/decode Deprecation Notice\n          ========================\n\n          Operating upon data of the latestBlock field of the response object is deprecated and will no longer be recognized in future releases of @onflow/decode.\n          Find out more here: https://github.com/onflow/flow-js-sdk/blob/master/packages/decode/WARNINGS.md#0001-Deprecating-latestBlock-field\n\n          =======================\n        ".replace(/\n\s+/g,"\n").trim(),"font-weight:bold;font-family:monospace;"),n=1,e.latestBlock):e.transactionId?(n=1,e.transactionId):e.collection?(n=1,e.collection):void 0;return Promise.resolve(o&&o.then?o.then(function(e){return n?e:null}):n?o:null)}catch(e){return Promise.reject(e)}},lt=function(t){try{var n=function(){if(W(t)||J(t)){var n=function(){return e.invariant(dt(r),"Cadence needs to be a string at this point."),Promise.resolve(Ee().where(/^0x/).then(function(e){return Object.entries(e).reduce(function(e,t){var n=t[1],r=new RegExp("(\\b"+t[0]+"\\b)","g");return e.replace(r,n)},r)})).then(function(e){t.message.cadence=e})},r=ce(t,"ix.cadence");e.invariant(ft(r)||dt(r),"Cadence needs to be a function or a string.");var o=function(){if(ft(r))return Promise.resolve(r({})).then(function(e){r=e})}();return o&&o.then?o.then(n):n()}}();return Promise.resolve(n&&n.then?n.then(function(){return t}):t)}catch(e){return Promise.reject(e)}},ft=function(e){return"function"==typeof e},dt=function(e){return"string"==typeof e};const mt="undefined"!=typeof Symbol?Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")):"@@iterator";function pt(e,t,n){if(!e.s){if(n instanceof gt){if(!n.s)return void(n.o=pt.bind(null,e,t));1&t&&(t=n.s),n=n.v}if(n&&n.then)return void n.then(pt.bind(null,e,t),pt.bind(null,e,2));e.s=t,e.v=n;var r=e.o;r&&r(e)}}var gt=function(){function e(){}return e.prototype.then=function(t,n){var r=new e,o=this.s;if(o){var i=1&o?t:n;if(i){try{pt(r,1,i(this.v))}catch(e){pt(r,2,e)}return r}return this}return this.o=function(e){try{var o=e.v;1&e.s?pt(r,1,t?t(o):o):n?pt(r,1,n(o)):pt(r,2,o)}catch(e){pt(r,2,e)}},r},e}();function ht(e){return e instanceof gt&&1&e.s}var vt,yt=function(t){try{var n=function(){if(W(t)||J(t)){var n=function(e,t,n){if("function"==typeof e[mt]){var r,o,i,s=e[mt]();if(function e(n){try{for(;!(r=s.next()).done;)if((n=t(r.value))&&n.then){if(!ht(n))return void n.then(e,i||(i=pt.bind(null,o=new gt,2)));n=n.v}o?pt(o,1,n):o=n}catch(e){pt(o||(o=new gt),2,e)}}(),s.return){var u=function(e){try{r.done||s.return()}catch(e){}return e};if(o&&o.then)return o.then(u,function(e){throw u(e)});u()}return o}if(!("length"in e))throw new TypeError("Object is not iterable");for(var a=[],c=0;c<e.length;c++)a.push(e[c]);return function(e,t,n){var r,o,i=-1;return function n(s){try{for(;++i<e.length;)if((s=t(i))&&s.then){if(!ht(s))return void s.then(n,o||(o=pt.bind(null,r=new gt,2)));s=s.v}r?pt(r,1,s):r=s}catch(e){pt(r||(r=new gt),2,e)}}(),r}(a,function(e){return t(a[e])})}(Object.entries(t.arguments),function(n){var r=n[0];return Promise.resolve(kt(n[1])).then(function(n){var o;t.arguments[r].asArgument=(e.invariant(null!=typeof(o=n).xform,"No type specified for argument: "+o.value),bt(o.xform)?o.xform(o.value):bt(o.xform.asArgument)?o.xform.asArgument(o.value):void e.invariant(!1,"Invalid Argument",o))})});if(n&&n.then)return n.then(function(){})}}();return Promise.resolve(n&&n.then?n.then(function(){return t}):t)}catch(e){return Promise.reject(e)}},kt=function t(n,r){void 0===r&&(r=3);try{return e.invariant(r>0,"Argument Resolve Recursion Limit Exceeded for Arg: "+n.tempId),bt(n.resolveArgument)?Promise.resolve(n.resolveArgument()).then(function(e){return t(e,r-1)}):Promise.resolve(n)}catch(e){return Promise.reject(e)}},bt=function(e){return"function"==typeof e},It=function(e){return Bt(Nt(Ot(e)))},Pt=function(e){return Bt(Nt(jt(e)))},St=function(e,t){return Buffer.from(e.padStart(2*t,0),"hex")},xt=(vt=Buffer.from("FLOW-V0.0-transaction").toString("hex"),Buffer.from(vt.padEnd(64,0),"hex")).toString("hex"),Bt=function(e){return xt+e},At=function(e){return St(e,8)},wt=function(e){return St(e,32)},Et=function(e){return Buffer.from(JSON.stringify(e),"utf8")},Tt=function(e){return Buffer.from(e,"utf8")},Gt=function(e){return Buffer.from(e,"hex")},Nt=function(e){return u.encode(e).toString("hex")},Ot=function(e){return Rt(e),[Tt(e.cadence),e.arguments.map(Et),wt(e.refBlock),e.computeLimit,At(e.proposalKey.address),e.proposalKey.keyId,e.proposalKey.sequenceNum,At(e.payer),e.authorizers.map(At)]},jt=function(e){return Ct(e),[Ot(e),Lt(e)]},Lt=function(e){var t=_t(e);return e.payloadSigs.map(function(e){return{signerIndex:t.get(e.address),keyId:e.keyId,sig:e.sig}}).sort(function(e,t){return e.signerIndex>t.signerIndex?1:e.signerIndex<t.signerIndex?-1:e.keyId>t.keyId?1:e.keyId<t.keyId?-1:void 0}).map(function(e){return[e.signerIndex,e.keyId,Gt(e.sig)]})},_t=function(e){var t=new Map,n=0,r=function(e){t.has(e)||(t.set(e,n),n++)};return r(e.proposalKey.address),r(e.payer),e.authorizers.forEach(r),t},Rt=function(e){qt.forEach(function(t){return Vt(e,t)}),Ft.forEach(function(t){return Vt(e.proposalKey,t,"proposalKey")})},Ct=function(e){zt.forEach(function(t){return Vt(e,t)}),e.payloadSigs.forEach(function(e,t){Mt.forEach(function(n){return Vt(e,n,"payloadSigs",t)})})},Dt=function(e){return"number"==typeof e},Ut=function(e){return"string"==typeof e},Kt=function(e){return null!==e&&"object"==typeof e},Ht=function(e){return Kt(e)&&e instanceof Array},qt=[{name:"cadence",check:Ut},{name:"arguments",check:Ht},{name:"refBlock",check:Ut,defaultVal:"0"},{name:"computeLimit",check:Dt},{name:"proposalKey",check:Kt},{name:"payer",check:Ut},{name:"authorizers",check:Ht}],Ft=[{name:"address",check:Ut},{name:"keyId",check:Dt},{name:"sequenceNum",check:Dt}],zt=[{name:"payloadSigs",check:Ht}],Mt=[{name:"address",check:Ut},{name:"keyId",check:Dt},{name:"sig",check:Ut}],Jt=[{name:"envelopeSigs",check:Ht}],Wt=[{name:"address",check:Ut},{name:"keyId",check:Dt},{name:"sig",check:Ut}],Vt=function(e,t,n,r){var o=t.name,i=t.check,s=t.defaultVal;if(null==e[o]&&null!=s&&(e[o]=s),null==e[o])throw Xt(o,n,r);if(!i(e[o]))throw $t(o,n,r)},Yt=function(e,t,n){return t?null==n?t+"."+e:t+"."+n+"."+e:e},Xt=function(e,t,n){return new Error("Missing field "+Yt(e,t,n))},$t=function(e,t,n){return new Error("Invalid field "+Yt(e,t,n))};function Zt(e){var t=new Set(e.authorizations);return t.add(e.proposer),t.delete(e.payer),Array.from(t)}function Qt(e){var t=new Set([e.payer]);return Array.from(t)}var en=function(e){return{cadence:e.message.cadence,refBlock:e.message.refBlock||null,computeLimit:e.message.computeLimit,arguments:e.message.arguments.map(function(t){return e.arguments[t].asArgument}),proposalKey:{address:r.withPrefix(e.accounts[e.proposer].addr),keyId:e.accounts[e.proposer].keyId,sequenceNum:e.accounts[e.proposer].sequenceNum},payer:r.withPrefix(e.accounts[e.payer].addr),authorizers:(t=e.authorizations.map(function(t){return r.withPrefix(e.accounts[t].addr)}).reduce(function(e,t){return e.find(function(e){return e===t})?e:[].concat(e,[t])},[]),t[0]?t:[]),payloadSigs:Zt(e).map(function(t){return{address:r.withPrefix(e.accounts[t].addr),keyId:e.accounts[t].keyId,sig:e.accounts[t].signature}}),envelopeSigs:Qt(e).map(function(t){return{address:r.withPrefix(e.accounts[t].addr),keyId:e.accounts[t].keyId,sig:e.accounts[t].signature}})};var t},tn="undefined"!=typeof Symbol?Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")):"@@iterator";function nn(e,t,n){if(!e.s){if(n instanceof rn){if(!n.s)return void(n.o=nn.bind(null,e,t));1&t&&(t=n.s),n=n.v}if(n&&n.then)return void n.then(nn.bind(null,e,t),nn.bind(null,e,2));e.s=t,e.v=n;var r=e.o;r&&r(e)}}var rn=function(){function e(){}return e.prototype.then=function(t,n){var r=new e,o=this.s;if(o){var i=1&o?t:n;if(i){try{nn(r,1,i(this.v))}catch(e){nn(r,2,e)}return r}return this}return this.o=function(e){try{var o=e.v;1&e.s?nn(r,1,t?t(o):o):n?nn(r,1,n(o)):nn(r,2,o)}catch(e){nn(r,2,e)}},r},e}();function on(e){return e instanceof rn&&1&e.s}var sn=function(e){try{var t=function(){if(W(e))return function(t,n){try{var r=Promise.resolve(un(e,Object.values(e.accounts))).then(function(){return Promise.resolve(un(e,Object.values(e.accounts))).then(function(){})})}catch(e){return n(e)}return r&&r.then?r.then(void 0,n):r}(0,function(e){throw console.error("=== SAD PANDA ===\n\n",e,"\n\n=== SAD PANDA ==="),e})}();return Promise.resolve(t&&t.then?t.then(function(t){return e}):e)}catch(e){return Promise.reject(e)}},un=function t(n,r,o,i){void 0===i&&(i=3);try{var s=function(){o&&(n.authorizations=n.authorizations.map(function(e){return e===o.tempId?u:e}).reduce(function(e,t){return Array.isArray(t)?[].concat(e,t):[].concat(e,[t])},[]))};e.invariant(i,"Account Resolve Recursion Limit Exceeded",{ix:n,accounts:r});var u=[],a=function(e,t,n){if("function"==typeof e[tn]){var r,o,i,s=e[tn]();if(function e(n){try{for(;!(r=s.next()).done;)if((n=t(r.value))&&n.then){if(!on(n))return void n.then(e,i||(i=nn.bind(null,o=new rn,2)));n=n.v}o?nn(o,1,n):o=n}catch(e){nn(o||(o=new rn),2,e)}}(),s.return){var u=function(e){try{r.done||s.return()}catch(e){}return e};if(o&&o.then)return o.then(u,function(e){throw u(e)});u()}return o}if(!("length"in e))throw new TypeError("Object is not iterable");for(var a=[],c=0;c<e.length;c++)a.push(e[c]);return function(e,t,n){var r,o,i=-1;return function n(s){try{for(;++i<e.length;)if((s=t(i))&&s.then){if(!on(s))return void s.then(n,o||(o=nn.bind(null,r=new rn,2)));s=s.v}r?nn(r,1,s):r=s}catch(e){nn(r||(r=new rn),2,e)}}(),r}(a,function(e){return t(a[e])})}(r,function(e){function r(){function r(){s.tempId!=e.tempId&&delete n.accounts[s.tempId]}var a=function(){if(Array.isArray(e))return Promise.resolve(t(n,e,s,i-1)).then(function(){});null!=e.addr&&null!=e.keyId&&(e.tempId=e.addr+"-"+e.keyId),n.accounts[e.tempId]=n.accounts[e.tempId]||e,n.accounts[e.tempId].role.proposer=n.accounts[e.tempId].role.proposer||e.role.proposer,n.accounts[e.tempId].role.payer=n.accounts[e.tempId].role.payer||e.role.payer,n.accounts[e.tempId].role.authorizer=n.accounts[e.tempId].role.authorizer||e.role.authorizer,n.accounts[e.tempId].role.proposer&&n.proposer===s.tempId&&(n.proposer=e.tempId),n.accounts[e.tempId].role.payer&&n.payer===s.tempId&&(n.payer=e.tempId),n.accounts[e.tempId].role.authorizer&&(o?u=Array.from(new Set([].concat(u,[e.tempId]))):n.authorizations=n.authorizations.map(function(t){return t===s.tempId?e.tempId:t}))}();return a&&a.then?a.then(r):r()}var s=o||e,a=function(){if(an(e.resolve))return Promise.resolve(e.resolve(e,function(e,t){try{return{f_type:"PreSignable",f_vsn:"1.0.1",roles:e.role,cadence:t.message.cadence,args:t.message.arguments.map(function(e){return t.arguments[e].asArgument}),data:{},interaction:t,voucher:en(t)}}catch(e){throw console.error("buildPreSignable",e),e}}(e,n))).then(function(t){e=t})}();return a&&a.then?a.then(r):r()});return Promise.resolve(a&&a.then?a.then(s):s())}catch(e){return Promise.reject(e)}},an=function(e){return"function"==typeof e},cn=function(e){try{var t=function(){if(W(e))return function(t,n){try{var r=(o=Zt(e),i=It(fn(e)),Promise.resolve(Promise.all(o.map(ln(e,i)))).then(function(){var t=Qt(e),n=Pt(c({},fn(e),{payloadSigs:o.map(function(t){return{address:e.accounts[t].addr,keyId:e.accounts[t].keyId,sig:e.accounts[t].signature}})}));return Promise.resolve(Promise.all(t.map(ln(e,n)))).then(function(){})}))}catch(e){return n(e)}var o,i;return r&&r.then?r.then(void 0,n):r}(0,function(t){throw console.error("Signatures",t,{ix:e}),t})}();return Promise.resolve(t&&t.then?t.then(function(t){return e}):e)}catch(e){return Promise.reject(e)}};function ln(e,t){return function(n){try{var o=e.accounts[n];return null!=o.signature?Promise.resolve():Promise.resolve(o.signingFunction(function(e,t,n){try{return{f_type:"Signable",f_vsn:"1.0.1",message:t,addr:r.sansPrefix(e.addr),keyId:e.keyId,roles:e.role,cadence:n.message.cadence,args:n.message.arguments.map(function(e){return n.arguments[e].asArgument}),data:{},interaction:n,voucher:en(n)}}catch(e){throw console.error("buildSignable",e),e}}(o,t,e))).then(function(t){e.accounts[n].signature=t.signature})}catch(e){return Promise.reject(e)}}}function fn(e){return{cadence:e.message.cadence,refBlock:e.message.refBlock||null,computeLimit:e.message.computeLimit,arguments:e.message.arguments.map(function(t){return e.arguments[t].asArgument}),proposalKey:{address:r.sansPrefix(e.accounts[e.proposer].addr),keyId:e.accounts[e.proposer].keyId,sequenceNum:e.accounts[e.proposer].sequenceNum},payer:r.sansPrefix(e.accounts[e.payer].addr),authorizers:e.authorizations.map(function(t){return r.sansPrefix(e.accounts[t].addr)}).reduce(function(e,t){return e.find(function(e){return e===t})?e:[].concat(e,[t])},[])}}var dn=function(e){try{var t=ce(e,"ix.validators",[]);return Promise.resolve(ue(e,t.map(function(e){return function(t){return e(t,{Ok:A,Bad:w})}})))}catch(e){return Promise.reject(e)}},mn=function(e){try{for(var t=0,n=Object.keys(e.accounts);t<n.length;t++){var o=n[t];e.accounts[o].addr=r.sansPrefix(e.accounts[o].addr)}return Promise.resolve(e)}catch(e){return Promise.reject(e)}},pn=function(e){return e},gn=function(e,t){return void 0===t&&(t=pn),function(n){try{var r=function(e){return["\nAccounts:",{proposer:e.proposer,authorizations:e.authorizations,payer:e.payer},"\n\nDetails:",e.accounts].filter(Boolean)},o=function(){var t;(t=console).log.apply(t,["debug["+e+"] ---\n"].concat([].slice.call(arguments),["\n\n\n---"]))};return Promise.resolve(Ee.get("debug."+e)).then(function(e){var i=function(){if(e)return Promise.resolve(t(n,o,r)).then(function(){})}();return i&&i.then?i.then(function(){return n}):n})}catch(e){return Promise.reject(e)}}},hn=ue([lt,gn("cadence",function(e,t){return t(e.message.cadence)}),yt,gn("arguments",function(e,t){return t(e.message.arguments,e.message)}),sn,gn("accounts",function(e,t,n){return t.apply(void 0,n(e))}),function(e){try{var t=function(){if(W(e)&&null==e.message.refBlock)return Promise.resolve(Ee.first(["sdk.transport","sdk.send"],Qe)).then(function(t){return Promise.resolve(t(de([et()])).then(ct)).then(function(t){e.message.refBlock=t.id})})}();return Promise.resolve(t&&t.then?t.then(function(){return e}):e)}catch(e){return Promise.reject(e)}},function(t){try{var n=function(){if(W(t))return Promise.resolve(Ee.first(["sdk.transport","sdk.send"],Qe)).then(function(n){var r=Object.values(t.accounts).find(function(e){return e.role.proposer});e.invariant(r,"Transactions require a proposer");var o=function(){if(null==r.sequenceNum)return Promise.resolve(de([tt(r.addr)])).then(function(e){return Promise.resolve(n(e).then(ct).then(function(e){return e.keys}).then(function(e){return e.find(function(e){return e.index===r.keyId})}).then(function(e){return e.sequenceNumber})).then(function(e){t.accounts[r.tempId].sequenceNum=e})})}();if(o&&o.then)return o.then(function(){})})}();return Promise.resolve(n&&n.then?n.then(function(){return t}):t)}catch(e){return Promise.reject(e)}},cn,gn("signatures",function(e,t,n){return t.apply(void 0,n(e))}),mn,dn,function(e){try{var t=ce(e,"ix.pre-send-check"),n=function(){if(B(t))return Promise.resolve(t(en(e))).then(function(){})}();return Promise.resolve(n&&n.then?n.then(function(){return e}):e)}catch(e){return Promise.reject(e)}},gn("resolved",function(e,t){return t(e)})]),vn=function(e,t){void 0===e&&(e=[]),void 0===t&&(t={});try{return Promise.resolve(Ee.first(["sdk.transport","sdk.send"],t.send||Qe)).then(function(n){return Promise.resolve(Ee.first(["sdk.resolve"],t.resolve||hn)).then(function(r){return Array.isArray(e)&&(e=ue(k(),e)),Promise.resolve(r(e)).then(function(e){return n(e,t)})})})}catch(e){return Promise.reject(e)}},yn=function(e){var t,n;function r(t){var n,r=("\n        Encode Message From Signable Error: Unable to determine message encoding for signer addresss: "+t+". \n        Please ensure the address: "+t+" is intended to sign the given transaction as specified by the transaction signable.\n      ").trim();return(n=e.call(this,r)||this).name="Unable To Determine Message Encoding For Signer Addresss",n}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,f(t,n),r}(p(Error));function kn(e){return fe("ix.validators",function(t){return Array.isArray(t)?t.push(e):[e]})}function bn(e){return ue([function(t){return t.block.height=e,t},kn(function(e){if("boolean"==typeof e.block.isSealed)throw new Error("Unable to specify both block height and isSealed.");if(e.block.id)throw new Error("Unable to specify both block height and block id.");return e})])}function In(e){return ue([function(t){return t.block.id=e,A(t)},kn(function(e,t){var n=t.Ok,r=t.Bad;return X(e)?r(e,"Unable to specify a block id with a Get Account interaction."):"boolean"==typeof e.block.isSealed?r(e,"Unable to specify both block id and isSealed."):e.block.height?r(e,"Unable to specify both block id and block height."):n(e)})])}function Pn(e){return ue([function(t){return t.message.refBlock=e,A(t)}])}var Sn=[],xn=function(e){return e},Bn=["tempId"];function An(e){return["SIGNATURE",e.addr,e.keyId].join(".")}function wn(e){return void 0===e&&(e={}),function(t){var n=c({},t,e,{signingFunction:e.signingFunction||t.signingFunction||function(e){return{addr:n.addr,keyId:n.keyId,signature:An(n)}}});return n}}var En={proposer:!1,authorizer:!1,payer:!1},Tn={__proto__:null,mockSend:function(t){return void 0===t&&(t=xn),function(n){return Promise.resolve(n).then(function(r){switch(n=r,!0){case X(n):return function(t,n){return void 0===n&&(n=5),e.invariant(t.account,"mockAccountResponse(ix) -- ix.account is missing",t),e.invariant(t.account.addr,"mockAccountResponse(ix) -- ix.account.addr is missing",t),{account:{addr:t.account.addr,keys:Array.from({length:n},function(e,t){return{index:t,sequenceNumber:42}})}}}(n);case ne(n):return{tag:"GET_BLOCK",block:{id:"32"}};default:return t(n)}})}},authzFn:wn,authzResolve:function(e){return void 0===e&&(e={}),function(t){return c({},t,{tempId:e.tempId||"WITH_RESOLVE",resolve:wn(function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)t.indexOf(n=i[r])>=0||(o[n]=e[n]);return o}(e,Bn))})}},authzResolveMany:function(e){return void 0===e&&(e={}),function(t){return c({},t,{tempId:e.tempId||"AUTHZ_RESOLVE_MANY",resolve:function(){return[e.proposer&&wn(e.proposer)({role:c({},En,{proposer:!0})})].concat(e.authorizations.map(wn).map(function(e){return e({role:c({},En,{authorizer:!0})})}),[e.payer&&wn(e.payer)({role:c({},En,{payer:!0})})]).filter(Boolean)}})}},sig:An,idof:function(e){return e.addr+"-"+e.keyId},run:function(e){return void 0===e&&(e=[]),de([Pn("123")].concat(e)).then(hn)}};Object.defineProperty(exports,"cadence",{enumerable:!0,get:function(){return a.template}}),Object.defineProperty(exports,"cdc",{enumerable:!0,get:function(){return a.template}}),exports.TestUtils=Tn,exports.VERSION="0.0.56",exports.account=function(e,t){return vn([tt(e)],t).then(ct)},exports.arg=function(e,t){return{value:e,xform:t}},exports.args=function(e){return void 0===e&&(e=[]),ue(e.map(G))},exports.atBlockHeight=bn,exports.atBlockId=In,exports.authorization=function(e,t,n,r){return{addr:e,signingFunction:t,keyId:n,sequenceNum:r}},exports.authorizations=function(e){return void 0===e&&(e=[]),ue(e.map(function(e){return T(e,{role:"authorizer"})}))},exports.block=function(t,n){var r=void 0===t?{}:t,o=r.sealed,i=void 0!==o&&o,s=r.id,u=r.height;return void 0===n&&(n={}),e.invariant(!(i&&s||i&&u),'Method: block -- Cannot pass "sealed" with "id" or "height"'),e.invariant(!(s&&u),'Method: block -- Cannot pass "id" and "height" simultaneously'),s?vn([et(),In(s)],n).then(ct):u?vn([et(),bn(u)],n).then(ct):vn([et(i)],n).then(ct)},exports.build=de,exports.config=Ee,exports.createSignableVoucher=en,exports.decode=function(e){try{return Promise.resolve(Ee().where(/^decoder\./)).then(function(t){var n=Object.entries(t).map(function(e){var t=e[0],n=e[1];return[t="/"+t.replace(/^decoder\./,"")+"$/",n]});return ct(e,Object.fromEntries(n))})}catch(e){return Promise.reject(e)}},exports.destroy=function(e){return function(t){return delete t.assigns[e],A(t)}},exports.encodeMessageFromSignable=function(e,t){var n,o,i=(n=e.voucher,(o=new Set(n.authorizers)).add(n.proposalKey.address),o.delete(n.payer),Array.from(o).map(r.withPrefix)),s=function(e){var t=new Set([e.payer]);return Array.from(t).map(r.withPrefix)}(e.voucher),u=i.includes(r.withPrefix(t)),a=s.includes(r.withPrefix(t));if(!u&&!a)throw new yn(t);var l={cadence:e.voucher.cadence,refBlock:e.voucher.refBlock,computeLimit:e.voucher.computeLimit,arguments:e.voucher.arguments,proposalKey:c({},e.voucher.proposalKey,{address:r.sansPrefix(e.voucher.proposalKey.address)}),payer:r.sansPrefix(e.voucher.payer),authorizers:e.voucher.authorizers.map(r.sansPrefix),payloadSigs:e.voucher.payloadSigs.map(function(e){return c({},e,{address:r.sansPrefix(e.address)})})};return u?It(l):Pt(l)},exports.get=ce,exports.getAccount=tt,exports.getBlock=et,exports.getBlockByHeight=function(e){return console.warn("\n    %cFCL/SDK Deprecation Notice\n    ============================\n\n    The getBlockByHeight builder has been deprecated and will be removed in future versions of the Flow JS-SDK/FCL.\n    You can learn more (including a guide on common transition paths) here: https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0003-deprecate-get-block-by-height-builder\n\n    ============================\n  ","font-weight:bold;font-family:monospace;"),ue([U,function(t){return t.block.height=e,A(t)}])},exports.getBlockById=function(e){return console.warn("\n    %cFCL/SDK Deprecation Notice\n    ============================\n\n    The getBlockById builder has been deprecated and will be removed in future versions of the Flow JS-SDK/FCL.\n    You can learn more (including a guide on common transition paths) here: https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0004-deprecate-get-block-by-id-builder\n\n    ============================\n  ","font-weight:bold;font-family:monospace;"),ue([D,function(t){return t.block.ids=[e],A(t)}])},exports.getBlockHeader=function(e){return void 0===e&&(e=null),ue([q,function(t){return t.block.isSealed=e,A(t)}])},exports.getCollection=function(e){return void 0===e&&(e=null),ue([F,function(t){return t.collection.id=e,t}])},exports.getEvents=function(e,t,n){return void 0===t&&void 0===n||console.warn("\n      %cFCL/SDK Deprecation Notice\n      ============================\n  \n      Passing a start and end into getEnvents has been deprecated and will not be supported in future versions of the Flow JS-SDK/FCL.\n      You can learn more (including a guide on common transition paths) here: https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0005-deprecate-start-end-get-events-builder\n  \n      ============================\n    ","font-weight:bold;font-family:monospace;"),ue([R,function(r){return r.events.eventType=e,r.events.start=t,r.events.end=n,A(r)}])},exports.getEventsAtBlockHeightRange=function(e,t,n){return ue([R,function(r){return r.events.eventType=e,r.events.start=t,r.events.end=n,A(r)}])},exports.getEventsAtBlockIds=function(e,t){return void 0===t&&(t=[]),ue([R,function(n){return n.events.eventType=e,n.events.blockIds=t,A(n)}])},exports.getLatestBlock=function(e){return void 0===e&&(e=!1),console.warn("\n    %cFCL/SDK Deprecation Notice\n    ============================\n\n    The getLatestBlock builder has been deprecated and will be removed in future versions of the Flow JS-SDK/FCL.\n    You can learn more (including a guide on common transition paths) here: https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0006-deprecate-get-latest-block-builder\n\n    ============================\n  ","font-weight:bold;font-family:monospace;"),ue([C,function(t){return t.block.isSealed=e,A(t)}])},exports.getTransaction=function(e){return ue([L,function(t){return t.transaction.id=e,A(t)}])},exports.getTransactionStatus=function(e){return ue([j,function(t){return t.transaction.id=e,A(t)}])},exports.interaction=k,exports.invariant=function e(){var t=[].slice.call(arguments);if(t.length>1){var n=t,r=n[0],o=n[1];return e(function(e,t){var n=t.Bad;return r?(0,t.Ok)(e):n(e,o)})}var i=t[0];return function(e){return i(e,{Ok:A,Bad:w})}},exports.isBad=ie,exports.isGetAccount=X,exports.isGetBlock=ne,exports.isGetBlockByHeight=ee,exports.isGetBlockById=Q,exports.isGetBlockHeader=re,exports.isGetCollection=oe,exports.isGetEvents=$,exports.isGetLatestBlock=Z,exports.isGetTransaction=Y,exports.isGetTransactionStatus=V,exports.isOk=function(e){return"OK"===e.status},exports.isPing=te,exports.isScript=J,exports.isTransaction=W,exports.isUnknown=M,exports.latestBlock=function(e,t){return console.warn('\n      %cFCL/SDK Deprecation Notice\n      ============================\n  \n      "latestBlock()" is deprecated, please use "block()" for this and future versions of FCL\n      You can learn more (including a guide on common transition paths) here: https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0008-deprecate-latest-block-method\n  \n      ============================\n    ',"font-weight:bold;font-family:monospace;"),vn([et(e)],t).then(ct)},exports.limit=function(e){return function(t){return t.message.computeLimit=e,t}},exports.param=function(e){return t={name:"param",transitionsPath:"https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0001-deprecate-params"},void console.warn("\n    %cFCL/SDK Deprecation Notice\n    ============================\n    The "+t.name+" builder has been deprecated and will be removed in future versions of the Flow JS-SDK/FCL.\n    You can learn more (including a guide on common transition paths) here: "+t.transitionsPath+"\n    ============================\n  ","font-weight:bold;font-family:monospace;");var t},exports.params=function(e){return t={name:"params",transitionsPath:"https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0001-deprecate-params"},void console.error("\n    %cFCL/SDK Deprecation Notice\n    ============================\n    The "+t.name+" builder has been removed from the Flow JS-SDK/FCL.\n    You can learn more (including a guide on common transition paths) here: "+t.transitionsPath+"\n    ============================\n  ","font-weight:bold;font-family:monospace;");var t},exports.payer=function(e){try{return Promise.resolve(T(e,{role:"payer"}))}catch(e){return Promise.reject(e)}},exports.ping=function(){return K},exports.pipe=ue,exports.proposer=function(e){try{return Promise.resolve(T(e,{role:"proposer"}))}catch(e){return Promise.reject(e)}},exports.put=le,exports.ref=Pn,exports.resolve=hn,exports.resolveAccounts=sn,exports.resolveArguments=yt,exports.resolveCadence=lt,exports.resolveFinalNormalization=mn,exports.resolveProposerSequenceNumber=function(e){var t=e.node;return function(e){try{return W(e)?e.accounts[e.proposer].sequenceNum?Promise.resolve(A(e)):Promise.resolve(de([tt(e.accounts[e.proposer].addr)])).then(function(n){return Promise.resolve(Qe(n,{node:t})).then(function(t){return Promise.resolve(ct(t)).then(function(t){return e.accounts[e.proposer].sequenceNum=t.keys[e.accounts[e.proposer].keyId].sequenceNumber,A(e)})})}):Promise.resolve(A(e))}catch(e){return Promise.reject(e)}}},exports.resolveRefBlockId=function(e){return function(t){try{return W(t)?t.message.refBlock?Promise.resolve(A(t)):Promise.resolve(function(e){try{var t;return Promise.resolve(ue(k(),[et()])).then(function(n){return t=n,Promise.resolve(Qe(t,e)).then(function(e){return t=e,Promise.resolve(ct(t)).then(function(e){return(t=e).id})})})}catch(e){return Promise.reject(e)}}(e)).then(function(e){return t.message.refBlock=e,A(t)}):Promise.resolve(A(t))}catch(e){return Promise.reject(e)}}},exports.resolveSignatures=cn,exports.resolveValidators=dn,exports.script=function(){return ue([N,le("ix.cadence",a.template.apply(void 0,[].slice.call(arguments)))])},exports.send=vn,exports.transaction=function(){return ue([O,le("ix.cadence",a.template.apply(void 0,[].slice.call(arguments))),function(e){return e.message.computeLimit=e.message.computeLimit||10,e.message.refBlock=e.message.refBlock||null,e.authorizations=e.authorizations||Sn,A(e)}])},exports.update=fe,exports.validator=kn,exports.voucherToTxId=function(e){return function(e){return t=Nt(function(e){!function(e){qt.forEach(function(t){return Vt(e,t)}),Ft.forEach(function(t){return Vt(e.proposalKey,t,"proposalKey")}),zt.forEach(function(t){return Vt(e,t)}),e.payloadSigs.forEach(function(e,t){Mt.forEach(function(n){return Vt(e,n,"payloadSigs",t)})}),Jt.forEach(function(t){return Vt(e,t)}),e.envelopeSigs.forEach(function(e,t){Wt.forEach(function(n){return Vt(e,n,"envelopeSigs",t)})})}(e);var t=_t(e),n=function(e){return e.map(function(e){var n=e.keyId,r=e.sig;return{signerIndex:t.get(e.address),keyId:n,sig:r}}).sort(function(e,t){return e.signerIndex>t.signerIndex?1:e.signerIndex<t.signerIndex?-1:e.keyId>t.keyId?1:e.keyId<t.keyId?-1:void 0}).map(function(e){return[e.signerIndex,e.keyId,Gt(e.sig)]})};return[[Tt(e.cadence),e.arguments.map(Et),wt(e.refBlock),e.computeLimit,At(r.sansPrefix(e.proposalKey.address)),e.proposalKey.keyId,e.proposalKey.sequenceNum,At(r.sansPrefix(e.payer)),e.authorizers.map(function(e){return At(r.sansPrefix(e))})],n(e.payloadSigs),n(e.envelopeSigs)]}(e)),(n=new s.SHA3(256)).update(Buffer.from(t,"hex")),n.digest().toString("hex");var t,n}(e)},exports.why=function(e){return e.reason};
//# sourceMappingURL=sdk.js.map
