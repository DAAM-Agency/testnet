{"version":3,"file":"sdk.modern.js","sources":["../src/interaction/interaction.js","../src/build/build.js","../src/config/index.js","../src/response/response.js","../src/send/unary.js","../src/send/send-transaction.js","../src/send/send-get-transaction-status.js","../src/send/send-get-transaction.js","../src/send/send-execute-script.js","../src/send/send-get-account.js","../src/send/send-get-events.js","../src/send/send-get-block.js","../src/send/send-get-block-header.js","../src/send/send-get-latest-block.js","../src/send/send-get-block-by-id.js","../src/send/send-get-block-by-height.js","../src/send/send-get-collection.js","../src/send/sdk-send.js","../src/send/send-ping.js","../src/build/build-get-block.js","../src/build/build-get-account.js","../src/decode/decode.js","../src/resolve/resolve-ref-block-id.js","../src/resolve/resolve-cadence.js","../src/resolve/resolve-arguments.js","../src/encode/encode.js","../src/resolve/voucher.js","../src/resolve/resolve-accounts.js","../src/resolve/resolve-signatures.js","../src/resolve/resolve-validators.js","../src/resolve/resolve-final-normalization.js","../src/resolve/resolve.js","../src/resolve/resolve-pre-send-check.js","../src/send/send.js","../src/decode/sdk-decode.js","../src/wallet-utils/encode-signable.js","../src/latest-block/latest-block.js","../src/account/account.js","../src/block/block.js","../src/build/build-authorizations.js","../src/build/build-validator.js","../src/build/build-at-block-height.js","../src/build/build-at-block-id.js","../src/build/build-get-events.js","../src/build/build-get-events-at-block-height-range.js","../src/build/build-get-events-at-block-ids.js","../src/build/build-get-block-header.js","../src/build/build-get-latest-block.js","../src/build/build-get-block-by-id.js","../src/build/build-get-block-by-height.js","../src/build/build-get-collection.js","../src/build/build-get-transaction-status.js","../src/build/build-get-transaction.js","../src/build/build-limit.js","../src/build/build-arguments.js","../src/build/build-proposer.js","../src/build/build-payer.js","../src/build/build-ping.js","../src/build/build-ref.js","../src/build/build-script.js","../src/build/build-transaction.js","../src/build/build-invariant.js","../src/resolve/resolve-proposer-sequence-number.js","../src/test-utils/mock-send.js","../src/test-utils/authz-fn.js","../src/test-utils/run.js","../src/VERSION.js","../src/sdk.js","../src/utils/deprecate.js"],"sourcesContent":["import {invariant} from \"@onflow/util-invariant\"\n\nexport const UNKNOWN /*                       */ = \"UNKNOWN\"\nexport const SCRIPT /*                        */ = \"SCRIPT\"\nexport const TRANSACTION /*                   */ = \"TRANSACTION\"\nexport const GET_TRANSACTION_STATUS /*        */ = \"GET_TRANSACTION_STATUS\"\nexport const GET_ACCOUNT /*                   */ = \"GET_ACCOUNT\"\nexport const GET_EVENTS /*                    */ = \"GET_EVENTS\"\nexport const GET_LATEST_BLOCK /*              */ = \"GET_LATEST_BLOCK\"\nexport const PING /*                          */ = \"PING\"\nexport const GET_TRANSACTION /*               */ = \"GET_TRANSACTION\"\nexport const GET_BLOCK_BY_ID /*               */ = \"GET_BLOCK_BY_ID\"\nexport const GET_BLOCK_BY_HEIGHT /*           */ = \"GET_BLOCK_BY_HEIGHT\"\nexport const GET_BLOCK /*                     */ = \"GET_BLOCK\"\nexport const GET_BLOCK_HEADER /*              */ = \"GET_BLOCK_HEADER\"\nexport const GET_COLLECTION /*                */ = \"GET_COLLECTION\"\n\nexport const BAD /* */ = \"BAD\"\nexport const OK /*  */ = \"OK\"\n\nexport const ACCOUNT /*  */ = \"ACCOUNT\"\nexport const PARAM /*    */ = \"PARAM\"\nexport const ARGUMENT /* */ = \"ARGUMENT\"\n\nexport const AUTHORIZER /* */ = \"authorizer\"\nexport const PAYER /*      */ = \"payer\"\nexport const PROPOSER /*   */ = \"proposer\"\n\nconst ACCT = `{\n  \"kind\":\"${ACCOUNT}\",\n  \"tempId\":null,\n  \"addr\":null,\n  \"keyId\":null,\n  \"sequenceNum\":null,\n  \"signature\":null,\n  \"signingFunction\":null,\n  \"resolve\":null,\n  \"role\": {\n    \"proposer\":false,\n    \"authorizer\":false,\n    \"payer\":false,\n    \"param\":false\n  }\n}`\n\nconst PRM = `{\n  \"kind\":\"${PARAM}\",\n  \"tempId\":null,\n  \"key\":null,\n  \"value\":null,\n  \"asParam\":null,\n  \"xform\":null,\n  \"resolve\": null\n}`\n\nconst ARG = `{\n  \"kind\":\"${ARGUMENT}\",\n  \"tempId\":null,\n  \"value\":null,\n  \"asArgument\":null,\n  \"xform\":null,\n  \"resolve\": null,\n  \"resolveArgument\": null\n}`\n\nconst IX = `{\n  \"tag\":\"${UNKNOWN}\",\n  \"assigns\":{},\n  \"status\":\"${OK}\",\n  \"reason\":null,\n  \"accounts\":{},\n  \"params\":{},\n  \"arguments\":{},\n  \"message\": {\n    \"cadence\":null,\n    \"refBlock\":null,\n    \"computeLimit\":null,\n    \"proposer\":null,\n    \"payer\":null,\n    \"authorizations\":[],\n    \"params\":[],\n    \"arguments\":[]\n  },\n  \"proposer\":null,\n  \"authorizations\":[],\n  \"payer\":null,\n  \"events\": {\n    \"eventType\":null,\n    \"start\":null,\n    \"end\":null,\n    \"blockIds\":[]\n  },\n  \"transaction\": {\n    \"id\":null\n  },\n  \"block\": {\n    \"id\":null,\n    \"height\":null,\n    \"isSealed\":null\n  },\n  \"account\": {\n    \"addr\":null\n  },\n  \"collection\": {\n    \"id\":null\n  }\n}`\n\nconst KEYS = new Set(Object.keys(JSON.parse(IX)))\n\nexport const interaction = () => JSON.parse(IX)\n\nconst CHARS = \"abcdefghijklmnopqrstuvwxyz0123456789\".split(\"\")\nconst randChar = () => CHARS[~~(Math.random() * CHARS.length)]\nexport const uuid = () => Array.from({length: 10}, randChar).join(\"\")\nexport const isNumber = d => typeof d === \"number\"\nexport const isArray = d => Array.isArray(d)\nexport const isObj = d => d !== null && typeof d === \"object\"\nexport const isNull = d => d == null\nexport const isFn = d => typeof d === \"function\"\n\nexport const isInteraction = ix => {\n  if (!isObj(ix) || isNull(ix) || isNumber(ix)) return false\n  for (let key of KEYS) if (!ix.hasOwnProperty(key)) return false\n  return true\n}\n\nexport const Ok = ix => {\n  ix.status = OK\n  return ix\n}\n\nexport const Bad = (ix, reason) => {\n  ix.status = BAD\n  ix.reason = reason\n  return ix\n}\n\nconst makeIx = wat => ix => {\n  ix.tag = wat\n  return Ok(ix)\n}\n\nexport const prepAccount = (acct, opts = {}) => ix => {\n  invariant(\n    typeof acct === \"function\" || typeof acct === \"object\",\n    \"prepAccount must be passed an authorization function or an account object\"\n  )\n  invariant(opts.role != null, \"Account must have a role\")\n\n  const ACCOUNT = JSON.parse(ACCT)\n  const role = opts.role\n  const tempId = uuid()\n\n  if (acct.authorization && isFn(acct.authorization)) acct = {resolve: acct.authorization}\n  if (!acct.authorization && isFn(acct)) acct = {resolve: acct}\n\n  ix.accounts[tempId] = {\n    ...ACCOUNT,\n    tempId,\n    ...acct,\n    role: {\n      ...ACCOUNT.role,\n      ...(typeof acct.role === \"object\" ? acct.role : {}),\n      [role]: true,\n    },\n  }\n\n  if (role === AUTHORIZER) {\n    ix.authorizations.push(tempId)\n  } else {\n    ix[role] = tempId\n  }\n\n  return ix\n}\n\nexport const makeArgument = arg => ix => {\n  let tempId = uuid()\n  ix.message.arguments.push(tempId)\n\n  ix.arguments[tempId] = JSON.parse(ARG)\n  ix.arguments[tempId].tempId = tempId\n  ix.arguments[tempId].value = arg.value\n  ix.arguments[tempId].asArgument = arg.asArgument\n  ix.arguments[tempId].xform = arg.xform\n  ix.arguments[tempId].resolve = arg.resolve\n  ix.arguments[tempId].resolveArgument = isFn(arg.resolveArgument) ? arg.resolveArgument.bind(arg) : arg.resolveArgument\n\n  return Ok(ix)\n}\n\nexport const makeUnknown /*                 */ = makeIx(UNKNOWN)\nexport const makeScript /*                  */ = makeIx(SCRIPT)\nexport const makeTransaction /*             */ = makeIx(TRANSACTION)\nexport const makeGetTransactionStatus /*    */ = makeIx(GET_TRANSACTION_STATUS)\nexport const makeGetTransaction /*          */ = makeIx(GET_TRANSACTION)\nexport const makeGetAccount /*              */ = makeIx(GET_ACCOUNT)\nexport const makeGetEvents /*               */ = makeIx(GET_EVENTS)\nexport const makeGetLatestBlock /*          */ = makeIx(GET_LATEST_BLOCK)\nexport const makeGetBlockById /*            */ = makeIx(GET_BLOCK_BY_ID)\nexport const makeGetBlockByHeight /*        */ = makeIx(GET_BLOCK_BY_HEIGHT)\nexport const makePing /*                    */ = makeIx(PING)\nexport const makeGetBlock /*                */ = makeIx(GET_BLOCK)\nexport const makeGetBlockHeader /*          */ = makeIx(GET_BLOCK_HEADER)\nexport const makeGetCollection /*           */ = makeIx(GET_COLLECTION)\n\nconst is = wat => ix => ix.tag === wat\n\nexport const isUnknown /*                 */ = is(UNKNOWN)\nexport const isScript /*                  */ = is(SCRIPT)\nexport const isTransaction /*             */ = is(TRANSACTION)\nexport const isGetTransactionStatus /*    */ = is(GET_TRANSACTION_STATUS)\nexport const isGetTransaction /*          */ = is(GET_TRANSACTION)\nexport const isGetAccount /*              */ = is(GET_ACCOUNT)\nexport const isGetEvents /*               */ = is(GET_EVENTS)\nexport const isGetLatestBlock /*          */ = is(GET_LATEST_BLOCK)\nexport const isGetBlockById /*            */ = is(GET_BLOCK_BY_ID)\nexport const isGetBlockByHeight /*        */ = is(GET_BLOCK_BY_HEIGHT)\nexport const isPing /*                    */ = is(PING)\nexport const isGetBlock /*                */ = is(GET_BLOCK)\nexport const isGetBlockHeader /*          */ = is(GET_BLOCK_HEADER)\nexport const isGetCollection /*           */ = is(GET_COLLECTION)\n\nexport const isOk /*  */ = ix => ix.status === OK\nexport const isBad /* */ = ix => ix.status === BAD\nexport const why /*   */ = ix => ix.reason\n\nexport const isAccount /*  */ = account => account.kind === ACCOUNT\nexport const isParam /*    */ = param => param.kind === PARAM\nexport const isArgument /* */ = argument => argument.kind === ARGUMENT\n\nconst hardMode = ix => {\n  for (let key of Object.keys(ix)) {\n    if (!KEYS.has(key))\n      throw new Error(`\"${key}\" is an invalid root level Interaction property.`)\n  }\n  return ix\n}\n\nconst recPipe = async (ix, fns = []) => {\n  try {\n    ix = hardMode(await ix)\n    if (isBad(ix)) throw new Error(`Interaction Error: ${ix.reason}`)\n    if (!fns.length) return ix\n    const [hd, ...rest] = fns\n    const cur = await hd\n    if (isFn(cur)) return recPipe(cur(ix), rest)\n    if (isNull(cur) || !cur) return recPipe(ix, rest)\n    if (isInteraction(cur)) return recPipe(cur, rest)\n    throw new Error(\"Invalid Interaction Composition\")\n  } catch (e) {\n    throw e\n  }\n}\n\nexport const pipe = (...args) => {\n  const [arg1, arg2] = args\n  if (isArray(arg1) && arg2 == null) return d => pipe(d, arg1)\n  return recPipe(arg1, arg2)\n}\n\nconst identity = v => v\n\nexport const get = (ix, key, fallback) => {\n  return ix.assigns[key] == null ? fallback : ix.assigns[key]\n}\n\nexport const put = (key, value) => ix => {\n  ix.assigns[key] = value\n  return Ok(ix)\n}\n\nexport const update = (key, fn = identity) => ix => {\n  ix.assigns[key] = fn(ix.assigns[key], ix)\n  return Ok(ix)\n}\n\nexport const destroy = key => ix => {\n  delete ix.assigns[key]\n  return Ok(ix)\n}\n","import {pipe, interaction} from \"../interaction/interaction.js\"\n\nexport function build(fns = []) {\n  return pipe(interaction(), fns)\n}\n","import {\n  spawn,\n  send,\n  subscriber,\n  SUBSCRIBE,\n  UNSUBSCRIBE,\n} from \"@onflow/util-actor\"\n\nconst NAME = \"config\"\nconst PUT = \"PUT_CONFIG\"\nconst GET = \"GET_CONFIG\"\nconst GET_ALL = \"GET_ALL_CONFIG\"\nconst UPDATE = \"UPDATE_CONFIG\"\nconst DELETE = \"DELETE_CONFIG\"\nconst CLEAR = \"CLEAR_CONFIG\"\nconst WHERE = \"WHERE_CONFIG\"\nconst UPDATED = \"CONFIG/UPDATED\"\n\nconst identity = v => v\n\nconst HANDLERS = {\n  [PUT]: (ctx, _letter, {key, value}) => {\n    if (key == null) throw new Error(\"Missing 'key' for config/put.\")\n    ctx.put(key, value)\n    ctx.broadcast(UPDATED, {...ctx.all()})\n  },\n  [GET]: (ctx, letter, {key, fallback}) => {\n    if (key == null) throw new Error(\"Missing 'key' for config/get\")\n    letter.reply(ctx.get(key, fallback))\n  },\n  [GET_ALL]: (ctx, letter) => {\n    letter.reply({...ctx.all()})\n  },\n  [UPDATE]: (ctx, letter, {key, fn}) => {\n    if (key == null) throw new Error(\"Missing 'key' for config/update\")\n    ctx.update(key, fn || identity)\n    ctx.broadcast(UPDATED, {...ctx.all()})\n  },\n  [DELETE]: (ctx, letter, {key}) => {\n    if (key == null) throw new Error(\"Missing 'key' for config/delete\")\n    ctx.delete(key)\n    ctx.broadcast(UPDATED, {...ctx.all()})\n  },\n  [CLEAR]: (ctx, letter) => {\n    let keys = Object.keys(ctx.all())\n    for (let key of keys) ctx.delete(key)\n    ctx.broadcast(UPDATED, {...ctx.all()})\n  },\n  [WHERE]: (ctx, letter, {pattern}) => {\n    if (pattern == null) throw new Error(\"Missing 'pattern' for config/where\")\n    letter.reply(ctx.where(pattern))\n  },\n  [SUBSCRIBE]: (ctx, letter) => {\n    ctx.subscribe(letter.from)\n    ctx.send(letter.from, UPDATED, {...ctx.all()})\n  },\n  [UNSUBSCRIBE]: (ctx, letter) => {\n    ctx.unsubscribe(letter.from)\n  },\n}\n\nspawn(HANDLERS, NAME)\n\nfunction put(key, value) {\n  send(NAME, PUT, {key, value})\n  return config()\n}\n\nfunction get(key, fallback) {\n  return send(NAME, GET, {key, fallback}, {expectReply: true, timeout: 10})\n}\n\nasync function first(wants = [], fallback) {\n  if (!wants.length) return fallback\n  const [head, ...rest] = wants\n  const ret = await get(head)\n  if (ret == null) return first(rest, fallback)\n  return ret\n}\n\nfunction all() {\n  return send(NAME, GET_ALL, null, {expectReply: true, timeout: 10})\n}\n\nfunction update(key, fn = identity) {\n  send(NAME, UPDATE, {key, fn})\n  return config()\n}\n\nfunction _delete(key) {\n  send(NAME, DELETE, {key})\n  return config()\n}\n\nfunction where(pattern) {\n  return send(NAME, WHERE, {pattern}, {expectReply: true, timeout: 10})\n}\n\nfunction subscribe(callback) {\n  return subscriber(NAME, () => spawn(HANDLERS, NAME), callback)\n}\n\nexport function clearConfig() {\n  return send(NAME, CLEAR)\n}\n\nfunction config(values) {\n  if (values != null && typeof values === \"object\") {\n    Object.keys(values).map(d => put(d, values[d]))\n  }\n\n  return {\n    put,\n    get,\n    all,\n    first,\n    update,\n    delete: _delete,\n    where,\n    subscribe,\n    overload,\n  }\n}\n\nconfig.put = put\nconfig.get = get\nconfig.all = all\nconfig.first = first\nconfig.update = update\nconfig.delete = _delete\nconfig.where = where\nconfig.subscribe = subscribe\nconfig.overload = overload\n\nexport {config}\n\nconst noop = v => v\nfunction overload(opts = {}, callback = noop) {\n  return new Promise(async (resolve, reject) => {\n    const oldConfig = await all()\n    try {\n      config(opts)\n      var result = await callback(await all())\n      await clearConfig()\n      await config(oldConfig)\n      resolve(result)\n    } catch (error) {\n      await clearConfig()\n      await config(oldConfig)\n      reject(error)\n    }\n  })\n}\n","const DEFAULT_RESPONSE = `{\n    \"tag\":null,\n    \"transaction\":null,\n    \"transactionStatus\":null,\n    \"transactionId\":null,\n    \"encodedData\":null,\n    \"events\":null,\n    \"account\":null,\n    \"block\":null,\n    \"blockHeader\":null,\n    \"latestBlock\":null,\n    \"collection\":null\n}`\n\nexport const response = () => JSON.parse(DEFAULT_RESPONSE)\n","import {grpc} from \"@improbable-eng/grpc-web\"\nimport {NodeHttpTransport} from \"@improbable-eng/grpc-web-node-http-transport\"\nimport {config} from \"../config\"\n\ngrpc.setDefaultTransport(NodeHttpTransport())\n\nexport async function unary(host, method, request) {\n  const metadataFromConfig = await config().get(\"grpc.metadata\", {})\n  return new Promise((resolve, reject) => {\n    grpc.unary(method, {\n      request: request,\n      host: host,\n      metadata: new grpc.Metadata(metadataFromConfig),\n      onEnd: ({status, statusMessage, message}) => {\n        if (status === grpc.Code.OK) {\n          resolve(message)\n        } else {\n          reject(new Error(statusMessage))\n        }\n      },\n    })\n  })\n}\n","import {invariant} from \"@onflow/util-invariant\"\nimport {AccessAPI, Transaction, SendTransactionRequest} from \"@onflow/protobuf\"\nimport {response} from \"../response/response.js\"\nimport {sansPrefix} from \"@onflow/util-address\"\nimport {unary as defaultUnary} from \"./unary\"\n\nconst u8ToHex = u8 => Buffer.from(u8).toString(\"hex\")\nconst paddedHexBuffer = (hex, pad) =>\n  Buffer.from(hex.padStart(pad * 2, 0), \"hex\")\nconst scriptBuffer = script => Buffer.from(script, \"utf8\")\nconst hexBuffer = hex => Buffer.from(hex, \"hex\")\nconst addressBuffer = addr => paddedHexBuffer(addr, 8)\nconst argumentBuffer = arg => Buffer.from(JSON.stringify(arg), \"utf8\")\n\nexport async function sendTransaction(ix, opts = {}) {\n  invariant(opts.node, `SDK Send Transaction Error: opts.node must be defined.`)\n\n  const unary = opts.unary || defaultUnary\n\n  ix = await ix\n\n  const tx = new Transaction()\n  tx.setScript(scriptBuffer(ix.message.cadence))\n  tx.setGasLimit(ix.message.computeLimit)\n  tx.setReferenceBlockId(\n    ix.message.refBlock ? hexBuffer(ix.message.refBlock) : null\n  )\n  tx.setPayer(addressBuffer(sansPrefix(ix.accounts[ix.payer].addr)))\n  ix.message.arguments.forEach(arg =>\n    tx.addArguments(argumentBuffer(ix.arguments[arg].asArgument))\n  )\n  ix.authorizations\n    .map(tempId => ix.accounts[tempId].addr)\n    .reduce((prev, current) => {\n      return prev.find(item => item === current) ? prev : [...prev, current]\n    }, [])\n    .forEach(addr => tx.addAuthorizers(addressBuffer(sansPrefix(addr))))\n\n  const proposalKey = new Transaction.ProposalKey()\n  proposalKey.setAddress(\n    addressBuffer(sansPrefix(ix.accounts[ix.proposer].addr))\n  )\n  proposalKey.setKeyId(ix.accounts[ix.proposer].keyId)\n  proposalKey.setSequenceNumber(ix.accounts[ix.proposer].sequenceNum)\n\n  tx.setProposalKey(proposalKey)\n\n  // Apply Non Payer Signatures to Payload Signatures\n  for (let acct of Object.values(ix.accounts)) {\n    try {\n      if (!acct.role.payer && acct.signature != null) {\n        const sig = new Transaction.Signature()\n        sig.setAddress(addressBuffer(sansPrefix(acct.addr)))\n        sig.setKeyId(acct.keyId)\n        sig.setSignature(hexBuffer(acct.signature))\n        tx.addPayloadSignatures(sig)\n      }\n    } catch (error) {\n      console.error(\"Trouble applying payload signature\", {acct, ix})\n      throw error\n    }\n  }\n\n  // Apply Payer Signatures to Envelope Signatures\n  for (let acct of Object.values(ix.accounts)) {\n    try {\n      if (acct.role.payer && acct.signature != null) {\n        const sig = new Transaction.Signature()\n        sig.setAddress(addressBuffer(sansPrefix(acct.addr)))\n        sig.setKeyId(acct.keyId)\n        sig.setSignature(hexBuffer(acct.signature))\n        tx.addEnvelopeSignatures(sig)\n      }\n    } catch (error) {\n      console.error(\"Trouble applying envelope signature\", {acct, ix})\n      throw error\n    }\n  }\n\n  const req = new SendTransactionRequest()\n  req.setTransaction(tx)\n\n  var t1 = Date.now()\n  const res = await unary(opts.node, AccessAPI.SendTransaction, req)\n  var t2 = Date.now()\n\n  let ret = response()\n  ret.tag = ix.tag\n  ret.transactionId = u8ToHex(res.getId_asU8())\n\n  if (typeof window !== \"undefined\") {\n    window.dispatchEvent(\n      new CustomEvent(\"FLOW::TX\", {\n        detail: {txId: ret.transactionId, delta: t2 - t1},\n      })\n    )\n  }\n\n  return ret\n}\n","import {invariant} from \"@onflow/util-invariant\"\nimport {AccessAPI, GetTransactionRequest} from \"@onflow/protobuf\"\nimport {response} from \"../response/response.js\"\nimport {unary as defaultUnary} from \"./unary\"\n\nconst STATUS_MAP = {\n  '0': 'UNKNOWN',\n  '1': 'PENDING',\n  '2': 'FINALIZED',\n  '3': 'EXECUTED',\n  '4': 'SEALED',\n  '5': 'EXPIRED'\n}\n\nconst u8ToHex = u8 => Buffer.from(u8).toString(\"hex\")\nconst hexBuffer = hex => Buffer.from(hex, \"hex\")\n\nconst convertStatusToString = code => {\n  if (code == null) return\n  return STATUS_MAP[String(code)]\n}\n\nexport async function sendGetTransactionStatus(ix, opts = {}) {\n  invariant(opts.node, `SDK Send Get Transaction Status Error: opts.node must be defined.`)\n\n  const unary = opts.unary || defaultUnary\n\n  ix = await ix\n\n  const req = new GetTransactionRequest()\n  req.setId(hexBuffer(ix.transaction.id))\n\n  const res = await unary(opts.node, AccessAPI.GetTransactionResult, req)\n\n  let events = res.getEventsList()\n\n  let ret = response()\n  const status = res.getStatus()\n  ret.tag = ix.tag\n  ret.transactionStatus = {\n    status: status,\n    statusString: convertStatusToString(status),\n    statusCode: res.getStatusCode(),\n    errorMessage: res.getErrorMessage(),\n    events: events.map(event => ({\n      type: event.getType(),\n      transactionId: u8ToHex(event.getTransactionId_asU8()),\n      transactionIndex: event.getTransactionIndex(),\n      eventIndex: event.getEventIndex(),\n      payload: JSON.parse(Buffer.from(event.getPayload_asU8()).toString(\"utf8\")),\n    })),\n  }\n\n  return ret\n}\n","import {invariant} from \"@onflow/util-invariant\"\nimport {AccessAPI, GetTransactionRequest} from \"@onflow/protobuf\"\nimport {response} from \"../response/response.js\"\nimport {unary as defaultUnary} from \"./unary\"\n\nconst u8ToHex = u8 => Buffer.from(u8).toString(\"hex\")\nconst hexBuffer = hex => Buffer.from(hex, \"hex\")\n\nexport async function sendGetTransaction(ix, opts = {}) {\n  invariant(opts.node, `SDK Send Get Transaction Error: opts.node must be defined.`)\n\n  const unary = opts.unary || defaultUnary\n\n  ix = await ix\n\n  const req = new GetTransactionRequest()\n  req.setId(hexBuffer(ix.transaction.id))\n\n  const res = await unary(opts.node, AccessAPI.GetTransaction, req)\n\n  let ret = response()\n  ret.tag = ix.tag\n\n  const unwrapKey = key => ({\n    address: u8ToHex(key.getAddress_asU8()),\n    keyId: key.getKeyId(),\n    sequenceNumber: key.getSequenceNumber()\n  })\n\n  const unwrapSignature = sig => ({\n    address: u8ToHex(sig.getAddress_asU8()),\n    keyId: sig.getKeyId(),\n    signature: u8ToHex(sig.getSignature_asU8())\n  })\n\n  let transaction = res.getTransaction()\n  ret.transaction = {\n      script: Buffer.from(transaction.getScript_asU8()).toString(\"utf8\"),\n      args: (transaction.getArgumentsList()).map(arg => JSON.parse(Buffer.from(arg).toString(\"utf8\"))),\n      referenceBlockId: u8ToHex(transaction.getReferenceBlockId_asU8()),\n      gasLimit: transaction.getGasLimit(),\n      proposalKey: unwrapKey(transaction.getProposalKey()),\n      payer: u8ToHex(transaction.getPayer_asU8()),\n      authorizers: (transaction.getAuthorizersList()).map(u8ToHex),\n      payloadSignatures: (transaction.getPayloadSignaturesList()).map(unwrapSignature),\n      envelopeSignatures: (transaction.getEnvelopeSignaturesList()).map(unwrapSignature)\n  }\n\n  return ret\n}\n","import {invariant} from \"@onflow/util-invariant\"\nimport {ExecuteScriptAtLatestBlockRequest, ExecuteScriptAtBlockIDRequest, ExecuteScriptAtBlockHeightRequest, AccessAPI} from \"@onflow/protobuf\"\nimport {response} from \"../response/response.js\"\nimport {unary as defaultUnary} from \"./unary\"\n\nconst argumentBuffer = arg => Buffer.from(JSON.stringify(arg), \"utf8\")\nconst hexBuffer = hex => Buffer.from(hex, \"hex\")\n\nasync function sendExecuteScriptAtBlockIDRequest(ix, opts) {\n  const unary = opts.unary || defaultUnary\n\n  const req = new ExecuteScriptAtBlockIDRequest()\n\n  req.setBlockId(hexBuffer(ix.block.id))\n\n  const code = Buffer.from(ix.message.cadence, \"utf8\")\n  ix.message.arguments.forEach(arg => req.addArguments(argumentBuffer(ix.arguments[arg].asArgument)))\n  req.setScript(code)\n\n  const res = await unary(opts.node, AccessAPI.ExecuteScriptAtBlockID, req)\n\n  return constructResponse(ix, res)\n}\n\nasync function sendExecuteScriptAtBlockHeightRequest(ix, opts) {\n  const unary = opts.unary || defaultUnary\n\n  const req = new ExecuteScriptAtBlockHeightRequest()\n\n  req.setBlockHeight(Number(ix.block.height))\n\n  const code = Buffer.from(ix.message.cadence, \"utf8\")\n  ix.message.arguments.forEach(arg => req.addArguments(argumentBuffer(ix.arguments[arg].asArgument)))\n  req.setScript(code)\n\n  const res = await unary(opts.node, AccessAPI.ExecuteScriptAtBlockHeight, req) \n  \n  return constructResponse(ix, res)\n}\n\nasync function sendExecuteScriptAtLatestBlockRequest(ix, opts) {\n  const unary = opts.unary || defaultUnary\n\n  const req = new ExecuteScriptAtLatestBlockRequest()\n  \n  const code = Buffer.from(ix.message.cadence, \"utf8\")\n  ix.message.arguments.forEach(arg => req.addArguments(argumentBuffer(ix.arguments[arg].asArgument)))\n  req.setScript(code)\n\n  const res = await unary(opts.node, AccessAPI.ExecuteScriptAtLatestBlock, req)\n\n  return constructResponse(ix, res)\n}\n\nfunction constructResponse(ix, res)  {\n  let ret = response()\n  ret.tag = ix.tag\n  ret.encodedData = JSON.parse(Buffer.from(res.getValue_asU8()).toString(\"utf8\"))\n\n  return ret\n}\n\nexport async function sendExecuteScript(ix, opts = {}) {\n  invariant(opts.node, `SDK Send Execute Script Error: opts.node must be defined.`)\n\n  ix = await ix\n\n  if (ix.block.id) {\n    return await sendExecuteScriptAtBlockIDRequest(ix, opts)\n  } else if (ix.block.height) {\n    return await sendExecuteScriptAtBlockHeightRequest(ix, opts)\n  } else {\n    return await sendExecuteScriptAtLatestBlockRequest(ix, opts)\n  }\n}\n","import {invariant} from \"@onflow/util-invariant\"\nimport {GetAccountAtLatestBlockRequest, GetAccountAtBlockHeightRequest, AccessAPI} from \"@onflow/protobuf\"\nimport {response} from \"../response/response.js\"\nimport {sansPrefix, withPrefix} from \"@onflow/util-address\"\nimport {unary as defaultUnary} from \"./unary\"\n\nconst u8ToHex = u8 => Buffer.from(u8).toString(\"hex\")\nconst paddedHexBuffer = (hex, pad) =>\n  Buffer.from(hex.padStart(pad * 2, 0), \"hex\")\n\nconst addressBuffer = addr => paddedHexBuffer(addr, 8)\n\nasync function sendGetAccountAtBlockHeightRequest(ix, opts) {\n  const unary = opts.unary || defaultUnary\n\n  const req = new GetAccountAtBlockHeightRequest()\n  req.setBlockHeight(Number(ix.block.height))\n  req.setAddress(addressBuffer(sansPrefix(ix.account.addr)))\n\n  const res = await unary(opts.node, AccessAPI.GetAccountAtBlockHeight, req)\n\n  return constructResponse(ix, res)\n}\n\nasync function sendGetAccountAtLatestBlockRequest(ix, opts) {\n  const unary = opts.unary || defaultUnary\n\n  const req = new GetAccountAtLatestBlockRequest()\n  req.setAddress(addressBuffer(sansPrefix(ix.account.addr)))\n\n  const res = await unary(opts.node, AccessAPI.GetAccountAtLatestBlock, req)\n\n  return constructResponse(ix, res)\n}\n\nfunction constructResponse(ix, res) {\n  let ret = response()\n  ret.tag = ix.tag\n\n  const account = res.getAccount()\n\n  let contractsMap;\n  const contracts = (contractsMap = account.getContractsMap()) ? contractsMap.getEntryList().reduce((acc, contract) => ({\n    ...acc,\n    [contract[0]]: Buffer.from(contract[1] || new UInt8Array()).toString(\"utf8\")\n  }), {}) : {}\n\n  ret.account = {\n    address: withPrefix(u8ToHex(account.getAddress_asU8())),\n    balance: account.getBalance(),\n    code: Buffer.from(account.getCode_asU8() || new UInt8Array()).toString(\"utf8\"),\n    contracts,\n    keys: account.getKeysList().map(publicKey => ({\n      index: publicKey.getIndex(),\n      publicKey: u8ToHex(publicKey.getPublicKey_asU8()),\n      signAlgo: publicKey.getSignAlgo(),\n      hashAlgo: publicKey.getHashAlgo(),\n      weight: publicKey.getWeight(),\n      sequenceNumber: publicKey.getSequenceNumber(),\n      revoked: publicKey.getRevoked(),\n    })),\n  }\n\n  return ret\n}\n\n\nexport async function sendGetAccount(ix, opts = {}) {\n  invariant(opts.node, `SDK Send Get Account Error: opts.node must be defined.`)\n\n  ix = await ix\n\n  if (ix.block.height !== null) {\n    return await sendGetAccountAtBlockHeightRequest(ix, opts)\n  } else {\n    return await sendGetAccountAtLatestBlockRequest(ix, opts)\n  }\n}\n","import {invariant} from \"@onflow/util-invariant\"\nimport {GetEventsForHeightRangeRequest, GetEventsForBlockIDsRequest, AccessAPI} from \"@onflow/protobuf\"\nimport {response} from \"../response/response.js\"\nimport {unary as defaultUnary} from \"./unary\"\n\nconst u8ToHex = u8 => Buffer.from(u8).toString(\"hex\")\nconst hexBuffer = hex => Buffer.from(hex, \"hex\")\n\nasync function sendGetEventsForHeightRangeRequest(ix, opts) {\n  const unary = opts.unary || defaultUnary\n\n  const req = new GetEventsForHeightRangeRequest()\n  req.setType(ix.events.eventType)\n\n  req.setStartHeight(Number(ix.events.start))\n  req.setEndHeight(Number(ix.events.end))\n\n  const res = await unary(opts.node, AccessAPI.GetEventsForHeightRange, req)\n\n  return constructResponse(ix, res)\n}\n\nasync function sendGetEventsForBlockIDsRequest(ix, opts) {\n  const unary = opts.unary || defaultUnary\n\n  const req = new GetEventsForBlockIDsRequest()\n  req.setType(ix.events.eventType)\n\n  ix.events.blockIds.forEach(id =>\n    req.addBlockIds(hexBuffer(id))\n  )\n\n  const res = await unary(opts.node, AccessAPI.GetEventsForBlockIDs, req)\n\n  return constructResponse(ix, res)\n}\n\nfunction constructResponse(ix, res) {\n  let ret = response()\n  ret.tag = ix.tag\n\n  const results = res.getResultsList()\n  ret.events = results.reduce((blocks, result) => {\n    const blockId = u8ToHex(result.getBlockId_asU8())\n    const blockHeight = result.getBlockHeight()\n    const blockTimestamp = result.getBlockTimestamp().toDate().toISOString()\n    const events = result.getEventsList()\n    events.forEach(event => {\n      blocks.push({\n        blockId,\n        blockHeight,\n        blockTimestamp,\n        type: event.getType(),\n        transactionId: u8ToHex(event.getTransactionId_asU8()),\n        transactionIndex: event.getTransactionIndex(),\n        eventIndex: event.getEventIndex(),\n        payload: JSON.parse(Buffer.from(event.getPayload_asU8()).toString(\"utf8\")),\n      })\n    })\n    return blocks\n  }, [])\n\n  return ret\n}\n\nexport async function sendGetEvents(ix, opts = {}) {  \n  invariant(opts.node, `SDK Send Get Events Error: opts.node must be defined.`)\n\n  ix = await ix\n\n  const interactionContainsBlockHeightRange = ix.events.start !== null \n  const interactionContainsBlockIDsList = Array.isArray(ix.events.blockIds) && ix.events.blockIds.length > 0\n \n  invariant(\n    interactionContainsBlockHeightRange || interactionContainsBlockIDsList,\n    \"SendGetEventsError: Unable to determine which get events request to send. Either a block height range, or block IDs must be specified.\"\n  )\n  \n  if (interactionContainsBlockHeightRange) {\n    return await sendGetEventsForHeightRangeRequest(ix, opts)\n  } else {\n    return await sendGetEventsForBlockIDsRequest(ix, opts)\n  }\n}\n","import {invariant} from \"@onflow/util-invariant\"\nimport {GetBlockByIDRequest, GetBlockByHeightRequest, GetLatestBlockRequest, AccessAPI} from \"@onflow/protobuf\"\nimport {response} from \"../response/response.js\"\nimport {unary as defaultUnary} from \"./unary\"\n\nconst u8ToHex = u8 => Buffer.from(u8).toString(\"hex\")\nconst hexBuffer = hex => Buffer.from(hex, \"hex\")\n\nasync function sendGetBlockByIDRequest(ix, opts) {\n  const unary = opts.unary || defaultUnary\n\n  const req = new GetBlockByIDRequest()\n  req.setId(hexBuffer(ix.block.id))\n\n  const res = await unary(opts.node, AccessAPI.GetBlockByID, req)\n\n  return constructResponse(ix, res)\n}\n\nasync function sendGetBlockByHeightRequest(ix, opts) {\n  const unary = opts.unary || defaultUnary\n\n  const req = new GetBlockByHeightRequest()\n  req.setHeight(Number(ix.block.height))\n    \n  const res = await unary(opts.node, AccessAPI.GetBlockByHeight, req)\n\n  return constructResponse(ix, res)\n}\n\nasync function sendGetBlockRequest(ix, opts) {\n  const unary = opts.unary || defaultUnary\n\n  const req = new GetLatestBlockRequest()\n\n  if (ix.block?.isSealed) {\n    req.setIsSealed(ix.block.isSealed)\n  }\n\n  const res = await unary(opts.node, AccessAPI.GetLatestBlock, req)\n\n  return constructResponse(ix, res)\n}\n\nfunction constructResponse(ix, res) {\n  const block = res.getBlock()\n\n  const collectionGuarantees = block.getCollectionGuaranteesList()\n  const blockSeals = block.getBlockSealsList()\n  const signatures = (block.getSignaturesList()).map(u8ToHex)\n\n  const ret = response()\n  ret.tag = ix.tag\n  ret.block = {\n    id: u8ToHex(block.getId_asU8()),\n    parentId: u8ToHex(block.getParentId_asU8()),\n    height: block.getHeight(),\n    timestamp: block.getTimestamp().toDate().toISOString(),\n    collectionGuarantees: collectionGuarantees.map(collectionGuarantee => ({\n      collectionId: u8ToHex(collectionGuarantee.getCollectionId_asU8()),\n      signatures: (collectionGuarantee.getSignaturesList()).map(u8ToHex),\n    })),\n    blockSeals: blockSeals.map(blockSeal => ({\n      blockId: u8ToHex(blockSeal.getBlockId_asU8()),\n      executionReceiptId: u8ToHex(blockSeal.getExecutionReceiptId_asU8()),\n      executionReceiptSignatures: (blockSeal.getExecutionReceiptSignaturesList()).map(u8ToHex),\n      resultApprovalSignatures: (blockSeal.getResultApprovalSignaturesList()).map(u8ToHex),\n    })),\n    signatures: signatures,\n  }\n\n  return ret\n}\n\nexport async function sendGetBlock(ix, opts = {}) {\n  invariant(opts.node, `SDK Send Get Block Error: opts.node must be defined.`)\n\n  ix = await ix\n\n  const interactionHasBlockID = ix.block.id !== null\n  const interactionHasBlockHeight = ix.block.height !== null\n\n  if (interactionHasBlockID) {\n    return await sendGetBlockByIDRequest(ix, opts)\n  } else if (interactionHasBlockHeight) {\n    return await sendGetBlockByHeightRequest(ix, opts)\n  } else {\n    return await sendGetBlockRequest(ix, opts)\n  }\n}\n","import {invariant} from \"@onflow/util-invariant\"\nimport {GetLatestBlockHeaderRequest, GetBlockHeaderByIDRequest, GetBlockHeaderByHeightRequest, AccessAPI} from \"@onflow/protobuf\"\nimport {response} from \"../response/response.js\"\nimport {unary as defaultUnary} from \"./unary\"\n\nconst u8ToHex = u8 => Buffer.from(u8).toString(\"hex\")\nconst hexBuffer = hex => Buffer.from(hex, \"hex\")\n\nasync function sendGetBlockHeaderByIDRequest(ix, opts) {\n  const unary = opts.unary || defaultUnary\n\n  const req = new GetBlockHeaderByIDRequest()\n  req.setId(hexBuffer(ix.block.id))\n\n  const res = await unary(opts.node, AccessAPI.GetBlockHeaderByID, req)\n\n  return constructResponse(ix, res)\n}\n\nasync function sendGetBlockHeaderByHeightRequest(ix, opts) {\n  const unary = opts.unary || defaultUnary\n\n  const req = new GetBlockHeaderByHeightRequest()\n  req.setHeight(Number(ix.block.height))\n\n  const res = await unary(opts.node, AccessAPI.GetBlockHeaderByHeight, req)\n\n  return constructResponse(ix, res)\n}\n\nasync function sendGetLatestBlockHeaderRequest(ix, opts) {\n  const unary = opts.unary || defaultUnary\n\n  const req = new GetLatestBlockHeaderRequest()\n\n  if (ix.block?.isSealed) {\n    req.setIsSealed(ix.block.isSealed)\n  }\n\n  const res = await unary(opts.node, AccessAPI.GetLatestBlockHeader, req)\n\n  return constructResponse(ix, res)\n}\n\nfunction constructResponse(ix, res) {\n  const blockHeader = res.getBlock()\n\n  const ret = response()\n  ret.tag = ix.tag\n  ret.blockHeader = {\n    id: u8ToHex(blockHeader.getId_asU8()),\n    parentId: u8ToHex(blockHeader.getParentId_asU8()),\n    height: blockHeader.getHeight(),\n    timestamp: blockHeader.getTimestamp().toDate().toISOString(),\n  }\n\n  return ret\n}\n\nexport async function sendGetBlockHeader(ix, opts = {}) {\n  invariant(opts.node, `SDK Send Get Block Header Error: opts.node must be defined.`)\n\n  ix = await ix\n\n  const interactionHasBlockID = ix.block.id !== null\n  const interactionHasBlockHeight = ix.block.height !== null\n\n  if (interactionHasBlockID) {\n    return await sendGetBlockHeaderByIDRequest(ix, opts)\n  } else if (interactionHasBlockHeight) {\n    return await sendGetBlockHeaderByHeightRequest(ix, opts)\n  } else {\n    return await sendGetLatestBlockHeaderRequest(ix, opts)\n  }\n}\n","import {invariant} from \"@onflow/util-invariant\"\nimport {GetLatestBlockRequest, AccessAPI} from \"@onflow/protobuf\"\nimport {response} from \"../response/response.js\"\nimport {unary} from \"./unary\"\n\nconst u8ToHex = u8 => Buffer.from(u8).toString(\"hex\")\n\nconst latestBlockDeprecationNotice = () => {\n  console.error(\n    `\n          %c@onflow/send Deprecation Notice\n          ========================\n\n          Operating upon data of the latestBlock field of the interaction object is deprecated and will no longer be recognized in future releases of @onflow/send.\n          Find out more here: https://github.com/onflow/flow-js-sdk/blob/master/packages/send/WARNINGS.md#0001-Deprecating-latestBlock-field\n\n          =======================\n        `\n      .replace(/\\n\\s+/g, \"\\n\")\n      .trim(),\n    \"font-weight:bold;font-family:monospace;\"\n  )\n}\n\nexport async function sendGetLatestBlock(ix, opts = {}) {\n  invariant(opts.node, `SDK Send Get Latest Block Error: opts.node must be defined.`)\n\n  ix = await ix\n\n  const req = new GetLatestBlockRequest()\n\n  if (ix.latestBlock && ix.latestBlock.isSealed) {\n    req.setIsSealed(ix.latestBlock.isSealed)\n    latestBlockDeprecationNotice()\n  }\n\n  if (ix.block && ix.block.isSealed) {\n    req.setIsSealed(ix.block.isSealed)\n  }\n\n  const res = await unary(opts.node, AccessAPI.GetLatestBlock, req)\n\n  const block = res.getBlock()\n\n  const collectionGuarantees = block.getCollectionGuaranteesList()\n  const blockSeals = block.getBlockSealsList()\n  const signatures = block.getSignaturesList()\n\n  const ret = response()\n  ret.tag = ix.tag\n  ret.block = {\n    id: u8ToHex(block.getId_asU8()),\n    parentId: u8ToHex(block.getParentId_asU8()),\n    height: block.getHeight(),\n    timestamp: block.getTimestamp(),\n    collectionGuarantees: collectionGuarantees.map(collectionGuarantee => ({\n      collectionId: u8ToHex(collectionGuarantee.getCollectionId_asU8()),\n      signatures: collectionGuarantee.getSignaturesList(),\n    })),\n    blockSeals: blockSeals.map(blockSeal => ({\n      blockId: u8ToHex(blockSeal.getBlockId_asU8()),\n      executionReceiptId: u8ToHex(blockSeal.getExecutionReceiptId_asU8()),\n      executionReceiptSignatures: blockSeal.getExecutionReceiptSignaturesList(),\n      resultApprovalSignatures: blockSeal.getResultApprovalSignaturesList(),\n    })),\n    signatures: signatures,\n  }\n\n  return ret\n}\n","import {invariant} from \"@onflow/util-invariant\"\nimport {GetBlockByIDRequest, AccessAPI} from \"@onflow/protobuf\"\nimport {response} from \"../response/response.js\"\nimport {unary} from \"./unary\"\n\nconst u8ToHex = u8 => Buffer.from(u8).toString(\"hex\")\nconst hexBuffer = hex => Buffer.from(hex, \"hex\")\n\nexport async function sendGetBlockById(ix, opts = {}) {\n  invariant(opts.node, `SDK Send Get Block By ID Error: opts.node must be defined.`)\n\n  ix = await ix\n\n  const req = new GetBlockByIDRequest()\n  req.setId(hexBuffer(ix.block.id))\n\n  const res = await unary(opts.node, AccessAPI.GetBlockByID, req)\n\n  const block = res.getBlock()\n\n  const collectionGuarantees = block.getCollectionGuaranteesList()\n  const blockSeals = block.getBlockSealsList()\n  const signatures = block.getSignaturesList()\n\n  const ret = response()\n  ret.tag = ix.tag\n  ret.block = {\n    id: u8ToHex(block.getId_asU8()),\n    parentId: u8ToHex(block.getParentId_asU8()),\n    height: block.getHeight(),\n    timestamp: block.getTimestamp(),\n    collectionGuarantees: collectionGuarantees.map(collectionGuarantee => ({\n      collectionId: u8ToHex(collectionGuarantee.getCollectionId_asU8()),\n      signatures: collectionGuarantee.getSignaturesList(),\n    })),\n    blockSeals: blockSeals.map(blockSeal => ({\n      blockId: u8ToHex(blockSeal.getBlockId_asU8()),\n      executionReceiptId: u8ToHex(blockSeal.getExecutionReceiptId_asU8()),\n      executionReceiptSignatures: blockSeal.getExecutionReceiptSignaturesList(),\n      resultApprovalSignatures: blockSeal.getResultApprovalSignaturesList(),\n    })),\n    signatures: signatures,\n  }\n\n  return ret\n}\n","import {invariant} from \"@onflow/util-invariant\"\nimport {GetBlockByHeightRequest, AccessAPI} from \"@onflow/protobuf\"\nimport {response} from \"../response/response.js\"\nimport {unary} from \"./unary\"\n\nconst u8ToHex = u8 => Buffer.from(u8).toString(\"hex\")\n\nexport async function sendGetBlockByHeight(ix, opts = {}) {\n  invariant(opts.node, `SDK Send Get Block By Height Error: opts.node must be defined.`)\n\n  ix = await ix\n\n  const req = new GetBlockByHeightRequest()\n  req.setHeight(Number(ix.block.height))\n\n  const res = await unary(opts.node, AccessAPI.GetBlockByHeight, req)\n\n  const block = res.getBlock()\n\n  const collectionGuarantees = block.getCollectionGuaranteesList()\n  const blockSeals = block.getBlockSealsList()\n  const signatures = block.getSignaturesList()\n\n  const ret = response()\n  ret.tag = ix.tag\n  ret.block = {\n    id: u8ToHex(block.getId_asU8()),\n    parentId: u8ToHex(block.getParentId_asU8()),\n    height: block.getHeight(),\n    timestamp: block.getTimestamp(),\n    collectionGuarantees: collectionGuarantees.map(collectionGuarantee => ({\n      collectionId: u8ToHex(collectionGuarantee.getCollectionId_asU8()),\n      signatures: collectionGuarantee.getSignaturesList(),\n    })),\n    blockSeals: blockSeals.map(blockSeal => ({\n      blockId: u8ToHex(blockSeal.getBlockId_asU8()),\n      executionReceiptId: u8ToHex(blockSeal.getExecutionReceiptId_asU8()),\n      executionReceiptSignatures: blockSeal.getExecutionReceiptSignaturesList(),\n      resultApprovalSignatures: blockSeal.getResultApprovalSignaturesList(),\n    })),\n    signatures: signatures,\n  }\n\n  return ret\n}\n","import {invariant} from \"@onflow/util-invariant\"\nimport {GetCollectionByIDRequest, AccessAPI} from \"@onflow/protobuf\"\nimport {response} from \"../response/response.js\"\nimport {unary as defaultUnary} from \"./unary\"\n\nconst u8ToHex = u8 => Buffer.from(u8).toString(\"hex\")\nconst hexBuffer = hex => Buffer.from(hex, \"hex\")\n\nexport async function sendGetCollection(ix, opts = {}) {\n  invariant(opts.node, `SDK Send Get Collection Error: opts.node must be defined.`)\n\n  const unary = opts.unary || defaultUnary\n\n  ix = await ix\n\n  const req = new GetCollectionByIDRequest()\n  req.setId(hexBuffer(ix.collection.id))\n\n  const res = await unary(opts.node, AccessAPI.GetCollectionByID, req)\n\n  const collection = res.getCollection()\n\n  const ret = response()\n  ret.tag = ix.tag\n  ret.collection = {\n    id: u8ToHex(collection.getId_asU8()),\n    transactionIds: (collection.getTransactionIdsList()).map(u8ToHex)\n  }\n\n  return ret\n}\n","import {invariant} from \"@onflow/util-invariant\"\nimport {\n  isTransaction,\n  isGetTransaction,\n  isGetTransactionStatus,\n  isScript,\n  isGetAccount,\n  isGetEvents,\n  isGetBlock,\n  isGetBlockHeader,\n  isGetLatestBlock,\n  isGetBlockById,\n  isGetBlockByHeight,\n  isPing,\n  isGetCollection,\n} from \"../interaction/interaction.js\"\nimport {sendTransaction} from \"./send-transaction.js\"\nimport {sendGetTransactionStatus} from \"./send-get-transaction-status.js\"\nimport {sendGetTransaction} from \"./send-get-transaction.js\"\nimport {sendExecuteScript} from \"./send-execute-script.js\"\nimport {sendGetAccount} from \"./send-get-account.js\"\nimport {sendGetEvents} from \"./send-get-events.js\"\nimport {sendGetBlock} from \"./send-get-block.js\"\nimport {sendGetBlockHeader} from \"./send-get-block-header.js\"\nimport {sendGetLatestBlock} from \"./send-get-latest-block.js\"\nimport {sendGetBlockById} from \"./send-get-block-by-id.js\"\nimport {sendGetBlockByHeight} from \"./send-get-block-by-height.js\"\nimport {sendGetCollection} from \"./send-get-collection.js\"\nimport {sendPing} from \"./send-ping.js\"\nimport {config} from \"../config\"\n\nexport const send = async (ix, opts = {}) => {\n  opts.node = opts.node || (await config().get(\"accessNode.api\"))\n\n  invariant(opts.node, `SDK Send Error: Either opts.node or \"accessNode.api\" in config must be defined.`)\n  \n  ix = await ix\n\n  // prettier-ignore\n  switch (true) {\n    case isTransaction(ix):\n      return opts.sendTransaction ? opts.sendTransaction(ix, opts) : sendTransaction(ix, opts)\n    case isGetTransactionStatus(ix):\n      return opts.sendGetTransactionStatus ? opts.sendGetTransactionStatus(ix, opts) : sendGetTransactionStatus(ix, opts)\n    case isGetTransaction(ix):\n      return opts.sendGetTransaction ? opts.sendGetTransaction(ix, opts) : sendGetTransaction(ix, opts)\n    case isScript(ix):\n      return opts.sendExecuteScript ? opts.sendExecuteScript(ix, opts) : sendExecuteScript(ix, opts)\n    case isGetAccount(ix):\n      return opts.sendGetAccount ? opts.sendGetAccount(ix, opts) : sendGetAccount(ix, opts)\n    case isGetEvents(ix):\n      return opts.sendGetEvents ? opts.sendGetEvents(ix, opts) : sendGetEvents(ix, opts)\n    case isGetLatestBlock(ix):\n      return opts.sendGetLatestBlock ? opts.sendGetLatestBlock(ix, opts) : sendGetLatestBlock(ix,  opts)\n    case isGetBlock(ix):\n      return opts.sendGetBlock ? opts.sendGetBlock(ix, opts) : sendGetBlock(ix, opts)\n    case isGetBlockHeader(ix):\n      return opts.sendGetBlockHeader ? opts.sendGetBlockHeader(ix, opts) : sendGetBlockHeader(ix, opts)\n    case isGetBlockById(ix):\n      return opts.sendGetBlockById ? opts.sendGetBlockById(ix, opts) : sendGetBlockById(ix, opts)\n    case isGetBlockByHeight(ix):\n      return opts.sendGetBlockByHeight ? opts.sendGetBlockByHeight(ix, opts) : sendGetBlockByHeight(ix, opts)\n    case isGetCollection(ix):\n      return opts.sendGetCollection ? opts.sendGetCollection(ix, opts) : sendGetCollection(ix, opts)\n    case isPing(ix):\n      return opts.sendPing ? opts.sendPing(ix, opts) : sendPing(ix, opts)\n    default:\n      return ix\n  }\n}\n","import {invariant} from \"@onflow/util-invariant\"\nimport {AccessAPI, PingRequest} from \"@onflow/protobuf\"\nimport {response} from \"../response/response.js\"\nimport {unary as defaultUnary} from \"./unary\"\n\nexport async function sendPing(ix, opts = {}) {\n  invariant(opts.node, `SDK Send Ping Error: opts.node must be defined.`)\n\n  const unary = opts.unary || defaultUnary\n\n  ix = await ix\n\n  const req = new PingRequest()\n\n  const res = await unary(opts.node, AccessAPI.Ping, req)\n\n  let ret = response()\n  ret.tag = ix.tag\n\n  return ret\n}\n","import {pipe, Ok, makeGetBlock} from \"../interaction/interaction.js\"\n\nexport function getBlock(isSealed = null) {\n  return pipe([\n    makeGetBlock,\n    ix => {\n      ix.block.isSealed = isSealed\n      return Ok(ix)\n    }\n  ])\n}\n","import {pipe, makeGetAccount, Ok} from \"../interaction/interaction.js\"\nimport {sansPrefix} from \"@onflow/util-address\"\n\nexport function getAccount(addr) {\n  return pipe([\n    makeGetAccount,\n    ix => {\n      ix.account.addr = sansPrefix(addr)\n      return Ok(ix)\n    }\n  ])\n}\n","const latestBlockDeprecationNotice = () => {\n  console.error(\n    `\n          %c@onflow/decode Deprecation Notice\n          ========================\n\n          Operating upon data of the latestBlock field of the response object is deprecated and will no longer be recognized in future releases of @onflow/decode.\n          Find out more here: https://github.com/onflow/flow-js-sdk/blob/master/packages/decode/WARNINGS.md#0001-Deprecating-latestBlock-field\n\n          =======================\n        `\n      .replace(/\\n\\s+/g, \"\\n\")\n      .trim(),\n    \"font-weight:bold;font-family:monospace;\"\n  )\n}\n\nconst decodeNumber = async (num, _, stack) => {\n  try {\n    return Number(num)\n  } catch (e) {\n    throw new Error(`Decode Number Error : ${stack.join(\".\")}`)\n  }\n}\n\nconst decodeImplicit = async (i) => i\n\nconst decodeVoid = async () => null\n\nconst decodeType = async (type) => {\n  return type.staticType\n}\n\nconst decodePath = async (path) => {\n  return {\n    domain: path.domain,\n    identifier: path.identifier\n  }\n}\n\nconst decodeCapability = async (cap) => {\n  return {\n    path: cap.path,\n    address: cap.address,\n    borrowType: cap.borrowType\n  }\n}\n\nconst decodeOptional = async (optional, decoders, stack) =>\n  optional ? await recurseDecode(optional, decoders, stack) : null\n\nconst decodeReference = async (v) => ({address: v.address, type: v.type})\n\nconst decodeArray = async (array, decoders, stack) =>\n  await Promise.all(\n    array.map(\n      (v) =>\n        new Promise(async (res) =>\n          res(await recurseDecode(v, decoders, [...stack, v.type]))\n        )\n    )\n  )\n\nconst decodeDictionary = async (dictionary, decoders, stack) =>\n  await dictionary.reduce(async (acc, v) => {\n    acc = await acc\n    acc[\n      await recurseDecode(v.key, decoders, [...stack, v.key])\n    ] = await recurseDecode(v.value, decoders, [...stack, v.key])\n    return acc\n  }, Promise.resolve({}))\n\nconst decodeComposite = async (composite, decoders, stack) => {\n  const decoded = await composite.fields.reduce(async (acc, v) => {\n    acc = await acc\n    acc[v.name] = await recurseDecode(v.value, decoders, [...stack, v.name])\n    return acc\n  }, Promise.resolve({}))\n  const decoder = composite.id && decoderLookup(decoders, composite.id)\n  return decoder ? await decoder(decoded) : decoded\n}\n\nconst defaultDecoders = {\n  UInt: decodeNumber,\n  Int: decodeNumber,\n  UInt8: decodeNumber,\n  Int8: decodeNumber,\n  UInt16: decodeNumber,\n  Int16: decodeNumber,\n  UInt32: decodeNumber,\n  Int32: decodeNumber,\n  UInt64: decodeNumber,\n  Int64: decodeNumber,\n  UInt128: decodeNumber,\n  Int128: decodeNumber,\n  UInt256: decodeNumber,\n  Int256: decodeNumber,\n  Word8: decodeNumber,\n  Word16: decodeNumber,\n  Word32: decodeNumber,\n  Word64: decodeNumber,\n  UFix64: decodeImplicit,\n  Fix64: decodeImplicit,\n  String: decodeImplicit,\n  Character: decodeImplicit,\n  Bool: decodeImplicit,\n  Address: decodeImplicit,\n  Void: decodeVoid,\n  Optional: decodeOptional,\n  Reference: decodeReference,\n  Array: decodeArray,\n  Dictionary: decodeDictionary,\n  Event: decodeComposite,\n  Resource: decodeComposite,\n  Struct: decodeComposite,\n  Enum: decodeComposite,\n  Type: decodeType,\n  Path: decodePath,\n  Capability: decodeCapability,\n}\n\nconst decoderLookup = (decoders, lookup) => {\n  const found = Object.keys(decoders).find((decoder) => {\n    if (/^\\/.*\\/$/.test(decoder)) {\n      const reg = new RegExp(decoder.substring(1, decoder.length - 1))\n      return reg.test(lookup)\n    }\n    return decoder === lookup\n  })\n  return lookup && found && decoders[found]\n}\n\nconst recurseDecode = async (decodeInstructions, decoders, stack) => {\n  let decoder = decoderLookup(decoders, decodeInstructions.type)\n  if (!decoder)\n    throw new Error(\n      `Undefined Decoder Error: ${decodeInstructions.type}@${stack.join(\".\")}`\n    )\n  return await decoder(decodeInstructions.value, decoders, stack)\n}\n\nexport const decode = async (\n  decodeInstructions,\n  customDecoders = {},\n  stack = []\n) => {\n  let decoders = {...defaultDecoders, ...customDecoders}\n  return await recurseDecode(decodeInstructions, decoders, stack)\n}\n\nexport const decodeResponse = async (response, customDecoders = {}) => {\n  let decoders = {...defaultDecoders, ...customDecoders}\n\n  if (response.encodedData) {\n    return await decode(response.encodedData, decoders)\n  } else if (response.transactionStatus) {\n    return {\n      ...response.transactionStatus,\n      events: await Promise.all(\n        response.transactionStatus.events.map(async function decodeEvents(e) {\n          return {\n            type: e.type,\n            transactionId: e.transactionId,\n            transactionIndex: e.transactionIndex,\n            eventIndex: e.eventIndex,\n            data: await decode(e.payload, decoders),\n          }\n        })\n      ),\n    }\n  } else if (response.transaction) {\n    return response.transaction\n  } else if (response.events) {\n    return await Promise.all(\n      response.events.map(async function decodeEvents(e) {\n        return {\n          blockId: e.blockId,\n          blockHeight: e.blockHeight,\n          blockTimestamp: e.blockTimestamp,\n          type: e.type,\n          transactionId: e.transactionId,\n          transactionIndex: e.transactionIndex,\n          eventIndex: e.eventIndex,\n          data: await decode(e.payload, decoders),\n        }\n      })\n    )\n  } else if (response.account) {\n    return response.account\n  } else if (response.block) {\n    return response.block\n  } else if (response.blockHeader) {\n    return response.blockHeader\n  } else if (response.latestBlock) {\n    latestBlockDeprecationNotice()\n    return response.latestBlock\n  } else if (response.transactionId) {\n    return response.transactionId\n  } else if (response.collection) {\n    return response.collection\n  }\n\n  return null\n}\n","import {isTransaction, Ok, interaction, pipe} from \"../interaction/interaction.js\"\nimport {send} from \"../send/sdk-send.js\"\nimport {decodeResponse} from \"../decode/decode.js\"\nimport {getBlock} from \"../build/build-get-block.js\"\n\nasync function getRefId (opts) {\n  var ix\n  ix = await pipe(interaction(), [getBlock()])\n  ix = await send(ix, opts)\n  ix = await decodeResponse(ix)\n  return ix.id\n}\n\nexport function resolveRefBlockId(opts) {\n  return async ix => {\n    if (!isTransaction(ix)) return Ok(ix)\n    if (ix.message.refBlock) return Ok(ix)\n\n    ix.message.refBlock = await getRefId(opts)\n\n    return Ok(ix)\n  }\n}\n","import {isTransaction, isScript, get} from \"../interaction/interaction.js\"\nimport {invariant} from \"@onflow/util-invariant\"\nimport {config} from \"../config\"\n\nconst isFn = v => typeof v === \"function\"\nconst isString = v => typeof v === \"string\"\n\nexport async function resolveCadence(ix) {\n  if (isTransaction(ix) || isScript(ix)) {\n    var cadence = get(ix, \"ix.cadence\")\n    invariant(\n      isFn(cadence) || isString(cadence),\n      \"Cadence needs to be a function or a string.\"\n    )\n    if (isFn(cadence)) cadence = await cadence({})\n    invariant(isString(cadence), \"Cadence needs to be a string at this point.\")\n    ix.message.cadence = await config()\n      .where(/^0x/)\n      .then(d =>\n        Object.entries(d).reduce(\n          (cadence, [key, value]) => {\n            const regex = new RegExp(\"(\\\\b\" + key + \"\\\\b)\", 'g')\n            return cadence.replace(regex, value)\n          },\n          cadence\n        )\n      )\n  }\n\n  return ix\n}\n","import {invariant} from \"@onflow/util-invariant\"\nimport {isTransaction, isScript} from \"../interaction/interaction.js\"\n\nconst isFn = v => typeof v === \"function\"\n\nfunction cast(arg) {\n  // prettier-ignore\n  invariant(typeof arg.xform != null, `No type specified for argument: ${arg.value}`)\n\n  if (isFn(arg.xform)) return arg.xform(arg.value)\n  if (isFn(arg.xform.asArgument)) return arg.xform.asArgument(arg.value)\n\n  // prettier-ignore\n  invariant(false, `Invalid Argument`, arg)\n}\n\nasync function handleArgResolution(arg, depth = 3) {\n  invariant(depth > 0, `Argument Resolve Recursion Limit Exceeded for Arg: ${arg.tempId}`)\n\n  if (isFn(arg.resolveArgument)) {\n    const resolvedArg = await arg.resolveArgument()\n    return handleArgResolution(resolvedArg, depth - 1)\n  } else {\n    return arg\n  }\n}\n\nexport async function resolveArguments(ix) {\n  if (isTransaction(ix) || isScript(ix)) {\n    for (let [id, arg] of Object.entries(ix.arguments)) {\n      const res = await handleArgResolution(arg)\n      ix.arguments[id].asArgument = cast(res)\n    }\n  }\n\n  return ix\n}\n","import { SHA3 } from \"sha3\"\nimport { encode } from \"@onflow/rlp\"\nimport { sansPrefix } from \"@onflow/util-address\"\n\nexport const encodeTransactionPayload = tx => prependTransactionDomainTag(rlpEncode(preparePayload(tx)))\nexport const encodeTransactionEnvelope = tx => prependTransactionDomainTag(rlpEncode(prepareEnvelope(tx)))\nexport const encodeTxIdFromVoucher = voucher => sha3_256(rlpEncode(prepareVoucher(voucher)))\n\nconst rightPaddedHexBuffer = (value, pad) =>\n  Buffer.from(value.padEnd(pad * 2, 0), \"hex\")\n\nconst leftPaddedHexBuffer = (value, pad) =>\n  Buffer.from(value.padStart(pad * 2, 0), \"hex\")\n\nconst TRANSACTION_DOMAIN_TAG = rightPaddedHexBuffer(Buffer.from(\"FLOW-V0.0-transaction\").toString(\"hex\"), 32).toString(\"hex\")\nconst prependTransactionDomainTag = tx => TRANSACTION_DOMAIN_TAG + tx\n\nconst addressBuffer = addr => leftPaddedHexBuffer(addr, 8)\n\nconst blockBuffer = block => leftPaddedHexBuffer(block, 32)\n\nconst argumentToString = arg => Buffer.from(JSON.stringify(arg), \"utf8\")\n\nconst scriptBuffer = script => Buffer.from(script, \"utf8\")\nconst signatureBuffer = signature => Buffer.from(signature, \"hex\")\n\nconst rlpEncode = v => {\n  return encode(v).toString(\"hex\")\n}\n\nconst sha3_256 = msg => {\n  const sha = new SHA3(256)\n  sha.update(Buffer.from(msg, \"hex\"))\n  return sha.digest().toString(\"hex\")\n}\n\nconst preparePayload = tx => {\n  validatePayload(tx)\n\n  return [\n    scriptBuffer(tx.cadence),\n    tx.arguments.map(argumentToString),\n    blockBuffer(tx.refBlock),\n    tx.computeLimit,\n    addressBuffer(tx.proposalKey.address),\n    tx.proposalKey.keyId,\n    tx.proposalKey.sequenceNum,\n    addressBuffer(tx.payer),\n    tx.authorizers.map(addressBuffer),\n  ]\n}\n\nconst prepareEnvelope = tx => {\n  validateEnvelope(tx)\n\n  return [preparePayload(tx), preparePayloadSignatures(tx)]\n}\n\nconst preparePayloadSignatures = tx => {\n  const signers = collectSigners(tx)\n\n  return tx.payloadSigs\n    .map(sig => {\n      return {\n        signerIndex: signers.get(sig.address),\n        keyId: sig.keyId,\n        sig: sig.sig,\n      }\n    })\n    .sort((a, b) => {\n      if (a.signerIndex > b.signerIndex) return 1\n      if (a.signerIndex < b.signerIndex) return -1\n\n      if (a.keyId > b.keyId) return 1\n      if (a.keyId < b.keyId) return -1\n    })\n    .map(sig => {\n      return [sig.signerIndex, sig.keyId, signatureBuffer(sig.sig)]\n    })\n}\n\nconst collectSigners = tx => {\n  const signers = new Map()\n  let i = 0\n\n  const addSigner = addr => {\n    if (!signers.has(addr)) {\n      signers.set(addr, i)\n      i++\n    }\n  }\n\n  addSigner(tx.proposalKey.address)\n  addSigner(tx.payer)\n  tx.authorizers.forEach(addSigner)\n\n  return signers\n}\n\nconst prepareVoucher = voucher => {\n  validateVoucher(voucher)\n\n  const signers = collectSigners(voucher)\n\n  const prepareSigs = sigs => {\n    return sigs.map(({ address, keyId, sig }) => {\n      return { signerIndex: signers.get(address), keyId, sig }\n    }).sort((a, b) => {\n      if (a.signerIndex > b.signerIndex) return 1\n      if (a.signerIndex < b.signerIndex) return -1\n      if (a.keyId > b.keyId) return 1\n      if (a.keyId < b.keyId) return -1\n    }).map(sig => {\n      return [sig.signerIndex, sig.keyId, signatureBuffer(sig.sig)]\n    })\n  }\n\n  return [\n    [\n      scriptBuffer(voucher.cadence),\n      voucher.arguments.map(argumentToString),\n      blockBuffer(voucher.refBlock),\n      voucher.computeLimit,\n      addressBuffer(sansPrefix(voucher.proposalKey.address)),\n      voucher.proposalKey.keyId,\n      voucher.proposalKey.sequenceNum,\n      addressBuffer(sansPrefix(voucher.payer)),\n      voucher.authorizers.map(authorizer => addressBuffer(sansPrefix(authorizer))),\n    ],\n    prepareSigs(voucher.payloadSigs),\n    prepareSigs(voucher.envelopeSigs),\n  ]\n}\n\nconst validatePayload = tx => {\n  payloadFields.forEach(field => checkField(tx, field))\n  proposalKeyFields.forEach(field =>\n    checkField(tx.proposalKey, field, \"proposalKey\")\n  )\n}\n\nconst validateEnvelope = tx => {\n  payloadSigsFields.forEach(field => checkField(tx, field))\n  tx.payloadSigs.forEach((sig, index) => {\n    payloadSigFields.forEach(field =>\n      checkField(sig, field, \"payloadSigs\", index)\n    )\n  })\n}\n\nconst validateVoucher = voucher => {\n  payloadFields.forEach(field => checkField(voucher, field))\n  proposalKeyFields.forEach(field =>\n    checkField(voucher.proposalKey, field, \"proposalKey\")\n  )\n  payloadSigsFields.forEach(field => checkField(voucher, field))\n  voucher.payloadSigs.forEach((sig, index) => {\n    payloadSigFields.forEach(field =>\n      checkField(sig, field, \"payloadSigs\", index)\n    )\n  })\n  envelopeSigsFields.forEach(field => checkField(voucher, field))\n  voucher.envelopeSigs.forEach((sig, index) => {\n    envelopeSigFields.forEach(field =>\n      checkField(sig, field, \"envelopeSigs\", index)\n    )\n  })\n}\n\nconst isNumber = v => typeof v === \"number\"\nconst isString = v => typeof v === \"string\"\nconst isObject = v => v !== null && typeof v === \"object\"\nconst isArray = v => isObject(v) && v instanceof Array\n\nconst payloadFields = [\n  {name: \"cadence\", check: isString},\n  {name: \"arguments\", check: isArray},\n  {name: \"refBlock\", check: isString, defaultVal: \"0\"},\n  {name: \"computeLimit\", check: isNumber},\n  {name: \"proposalKey\", check: isObject},\n  {name: \"payer\", check: isString},\n  {name: \"authorizers\", check: isArray},\n]\n\nconst proposalKeyFields = [\n  {name: \"address\", check: isString},\n  {name: \"keyId\", check: isNumber},\n  {name: \"sequenceNum\", check: isNumber},\n]\n\nconst payloadSigsFields = [{name: \"payloadSigs\", check: isArray}]\n\nconst payloadSigFields = [\n  {name: \"address\", check: isString},\n  {name: \"keyId\", check: isNumber},\n  {name: \"sig\", check: isString},\n]\n\nconst envelopeSigsFields = [{name: \"envelopeSigs\", check: isArray}]\n\nconst envelopeSigFields = [\n  {name: \"address\", check: isString},\n  {name: \"keyId\", check: isNumber},\n  {name: \"sig\", check: isString},\n]\n\nconst checkField = (obj, field, base, index) => {\n  const {name, check, defaultVal} = field\n  if (obj[name] == null && defaultVal != null) obj[name] = defaultVal\n  if (obj[name] == null) throw missingFieldError(name, base, index)\n  if (!check(obj[name])) throw invalidFieldError(name, base, index)\n}\n\nconst printFieldName = (field, base, index) => {\n  if (!!base)\n    return index == null ? `${base}.${field}` : `${base}.${index}.${field}`\n  return field\n}\n\nconst missingFieldError = (field, base, index) =>\n  new Error(`Missing field ${printFieldName(field, base, index)}`)\nconst invalidFieldError = (field, base, index) =>\n  new Error(`Invalid field ${printFieldName(field, base, index)}`)\n","import {withPrefix} from \"@onflow/util-address\"\nimport {encodeTxIdFromVoucher} from \"../encode/encode.js\"\n\nexport function findInsideSigners(ix) {\n  // Inside Signers Are: (authorizers + proposer) - payer\n  let inside = new Set(ix.authorizations)\n  inside.add(ix.proposer)\n  inside.delete(ix.payer)\n  return Array.from(inside)\n}\n\nexport function findOutsideSigners(ix) {\n  // Outside Signers Are: (payer)\n  let outside = new Set([ix.payer])\n  return Array.from(outside)\n}\n\nexport const createSignableVoucher = ix => {\n  const buildAuthorizers = () => {\n    const authorizations = ix.authorizations\n      .map(cid => withPrefix(ix.accounts[cid].addr))\n      .reduce((prev, current) => {\n        return prev.find(item => item === current) ? prev : [...prev, current]\n      }, [])\n    return authorizations[0] ? authorizations : []\n  }\n\n  const buildInsideSigners = () =>\n    findInsideSigners(ix).map(id => ({\n      address: withPrefix(ix.accounts[id].addr),\n      keyId: ix.accounts[id].keyId,\n      sig: ix.accounts[id].signature,\n    }))\n\n  const buildOutsideSigners = () =>\n    findOutsideSigners(ix).map(id => ({\n      address: withPrefix(ix.accounts[id].addr),\n      keyId: ix.accounts[id].keyId,\n      sig: ix.accounts[id].signature,\n    }))\n\n  return {\n    cadence: ix.message.cadence,\n    refBlock: ix.message.refBlock || null,\n    computeLimit: ix.message.computeLimit,\n    arguments: ix.message.arguments.map(id => ix.arguments[id].asArgument),\n    proposalKey: {\n      address: withPrefix(ix.accounts[ix.proposer].addr),\n      keyId: ix.accounts[ix.proposer].keyId,\n      sequenceNum: ix.accounts[ix.proposer].sequenceNum,\n    },\n    payer: withPrefix(ix.accounts[ix.payer].addr),\n    authorizers: buildAuthorizers(),\n    payloadSigs: buildInsideSigners(),\n    envelopeSigs: buildOutsideSigners(),\n  }\n}\n\nexport const voucherToTxId = voucher => {\n  return encodeTxIdFromVoucher(voucher)\n}\n","import {invariant} from \"@onflow/util-invariant\"\nimport {isTransaction} from \"../interaction/interaction.js\"\nimport {createSignableVoucher} from \"./voucher.js\"\n\nconst isFn = v => typeof v === \"function\"\nexport function buildPreSignable(acct, ix) {\n  try {\n    return {\n      f_type: \"PreSignable\",\n      f_vsn: \"1.0.1\",\n      roles: acct.role,\n      cadence: ix.message.cadence,\n      args: ix.message.arguments.map(d => ix.arguments[d].asArgument),\n      data: {},\n      interaction: ix,\n      voucher: createSignableVoucher(ix),\n    }\n  } catch (error) {\n    console.error(\"buildPreSignable\", error)\n    throw error\n  }\n}\n\nasync function collectAccounts(ix, accounts, last, depth = 3) {\n  invariant(depth, \"Account Resolve Recursion Limit Exceeded\", {ix, accounts})\n\n  let authorizations = []\n  for (let ax of accounts) {\n    var old = last || ax\n    if (isFn(ax.resolve)) ax = await ax.resolve(ax, buildPreSignable(ax, ix))\n\n    if (Array.isArray(ax)) {\n      await collectAccounts(ix, ax, old, depth - 1)\n    } else {\n      if (ax.addr != null && ax.keyId != null) {\n        ax.tempId = `${ax.addr}-${ax.keyId}`\n      }\n      ix.accounts[ax.tempId] = ix.accounts[ax.tempId] || ax\n      ix.accounts[ax.tempId].role.proposer =\n        ix.accounts[ax.tempId].role.proposer || ax.role.proposer\n      ix.accounts[ax.tempId].role.payer =\n        ix.accounts[ax.tempId].role.payer || ax.role.payer\n      ix.accounts[ax.tempId].role.authorizer =\n        ix.accounts[ax.tempId].role.authorizer || ax.role.authorizer\n\n      if (ix.accounts[ax.tempId].role.proposer && ix.proposer === old.tempId) {\n        ix.proposer = ax.tempId\n      }\n\n      if (ix.accounts[ax.tempId].role.payer && ix.payer === old.tempId) {\n        ix.payer = ax.tempId\n      }\n\n      if (ix.accounts[ax.tempId].role.authorizer) {\n        if (last) {\n          // do group replacement\n          authorizations = Array.from(new Set([...authorizations, ax.tempId]))\n        } else {\n          // do 1-1 replacement\n          ix.authorizations = ix.authorizations.map(d =>\n            d === old.tempId ? ax.tempId : d\n          )\n          // if (!new Set(ix.authorizations).has(ax.tempId)) {\n          //   ix.authorizations = Array.from(\n          //     new Set([...ix.authorizations, ax.tempId])\n          //   )\n          // }\n        }\n      }\n    }\n    if (old.tempId != ax.tempId) delete ix.accounts[old.tempId]\n  }\n\n  if (last) {\n    // complete (flatmap) group replacement\n    ix.authorizations = ix.authorizations\n      .map(d => (d === last.tempId ? authorizations : d))\n      .reduce(\n        (prev, curr) =>\n          Array.isArray(curr) ? [...prev, ...curr] : [...prev, curr],\n        []\n      )\n  }\n}\n\nexport async function resolveAccounts(ix) {\n  if (isTransaction(ix)) {\n    try {\n      await collectAccounts(ix, Object.values(ix.accounts))\n      await collectAccounts(ix, Object.values(ix.accounts))\n    } catch (error) {\n      console.error(\"=== SAD PANDA ===\\n\\n\", error, \"\\n\\n=== SAD PANDA ===\")\n      throw error\n    }\n  }\n  return ix\n}\n","import {isTransaction} from \"../interaction/interaction.js\"\nimport {sansPrefix} from \"@onflow/util-address\"\nimport {\n  encodeTransactionPayload as encodeInsideMessage,\n  encodeTransactionEnvelope as encodeOutsideMessage,\n} from \"../encode/encode.js\"\nimport {\n  createSignableVoucher,\n  findInsideSigners,\n  findOutsideSigners,\n} from \"./voucher.js\"\n\nexport async function resolveSignatures(ix) {\n  if (isTransaction(ix)) {\n    try {\n      let insideSigners = findInsideSigners(ix)\n      const insidePayload = encodeInsideMessage(prepForEncoding(ix))\n      await Promise.all(insideSigners.map(fetchSignature(ix, insidePayload)))\n\n      let outsideSigners = findOutsideSigners(ix)\n      const outsidePayload = encodeOutsideMessage({\n        ...prepForEncoding(ix),\n        payloadSigs: insideSigners.map(id => ({\n          address: ix.accounts[id].addr,\n          keyId: ix.accounts[id].keyId,\n          sig: ix.accounts[id].signature,\n        })),\n      })\n      await Promise.all(outsideSigners.map(fetchSignature(ix, outsidePayload)))\n    } catch (error) {\n      console.error(\"Signatures\", error, {ix})\n      throw error\n    }\n  }\n  return ix\n}\n\nfunction fetchSignature(ix, payload) {\n  return async function innerFetchSignature(id) {\n    const acct = ix.accounts[id]\n    if (acct.signature != null) return\n    const {signature} = await acct.signingFunction(\n      buildSignable(acct, payload, ix)\n    )\n    // if (!acct.role.proposer) {\n    //   ix.accounts[id].keyId = keyId\n    // }\n    ix.accounts[id].signature = signature\n  }\n}\n\nexport function buildSignable(acct, message, ix) {\n  try {\n    return {\n      f_type: \"Signable\",\n      f_vsn: \"1.0.1\",\n      message,\n      addr: sansPrefix(acct.addr),\n      keyId: acct.keyId,\n      roles: acct.role,\n      cadence: ix.message.cadence,\n      args: ix.message.arguments.map(d => ix.arguments[d].asArgument),\n      data: {},\n      interaction: ix,\n      voucher: createSignableVoucher(ix),\n    }\n  } catch (error) {\n    console.error(\"buildSignable\", error)\n    throw error\n  }\n}\n\nfunction prepForEncoding(ix) {\n  return {\n    cadence: ix.message.cadence,\n    refBlock: ix.message.refBlock || null,\n    computeLimit: ix.message.computeLimit,\n    arguments: ix.message.arguments.map(id => ix.arguments[id].asArgument),\n    proposalKey: {\n      address: sansPrefix(ix.accounts[ix.proposer].addr),\n      keyId: ix.accounts[ix.proposer].keyId,\n      sequenceNum: ix.accounts[ix.proposer].sequenceNum,\n    },\n    payer: sansPrefix(ix.accounts[ix.payer].addr),\n    authorizers: ix.authorizations\n      .map(cid => sansPrefix(ix.accounts[cid].addr))\n      .reduce((prev, current) => {\n        return prev.find(item => item === current) ? prev : [...prev, current]\n      }, []),\n  }\n}\n","import { get, pipe, Ok, Bad } from \"../interaction/interaction.js\"\n\nexport async function resolveValidators(ix) {\n  const validators = get(ix, 'ix.validators', [])\n  return pipe(ix, validators.map(cb => ix => cb(ix, { Ok, Bad })))\n}   \n","import {sansPrefix} from \"@onflow/util-address\"\n\nexport async function resolveFinalNormalization(ix) {\n  for (let key of Object.keys(ix.accounts)) {\n    ix.accounts[key].addr = sansPrefix(ix.accounts[key].addr)\n  }\n  return ix\n}\n","import {pipe, isTransaction} from \"../interaction/interaction.js\"\nimport {config} from \"../config\"\nimport {invariant} from \"@onflow/util-invariant\"\n\nimport {send} from \"../send/sdk-send.js\"\nimport {build} from \"../build/build.js\"\nimport {getBlock} from \"../build/build-get-block.js\"\nimport {getAccount} from \"../build/build-get-account.js\"\nimport {decodeResponse as decode} from \"../decode/decode.js\"\n\nimport {resolveRefBlockId} from \"./resolve-ref-block-id.js\"\nimport {resolveCadence} from \"./resolve-cadence.js\"\nimport {resolveArguments} from \"./resolve-arguments.js\"\nimport {resolveAccounts} from \"./resolve-accounts.js\"\nimport {resolveSignatures} from \"./resolve-signatures.js\"\nimport {resolveValidators} from \"./resolve-validators.js\"\nimport {resolveFinalNormalization} from \"./resolve-final-normalization.js\"\nimport {resolvePreSendCheck} from \"./resolve-pre-send-check.js\"\n\nconst noop = v => v\nconst debug = (key, fn = noop) => async ix => {\n  const take = (obj, keys = []) => {\n    if (typeof keys === \"string\") keys = keys.split(\" \")\n    keys.reduce((acc, key) => ({...acc, [key]: obj[key]}), {})\n  }\n\n  const accts = ix =>\n    [\n      \"\\nAccounts:\",\n      {\n        proposer: ix.proposer,\n        authorizations: ix.authorizations,\n        payer: ix.payer,\n      },\n      \"\\n\\nDetails:\",\n      ix.accounts,\n    ].filter(Boolean)\n\n  const log = (...msg) => {\n    console.log(`debug[${key}] ---\\n`, ...msg, \"\\n\\n\\n---\")\n  }\n\n  if (await config.get(`debug.${key}`)) await fn(ix, log, accts)\n  return ix\n}\n\nexport const resolve = pipe([\n  resolveCadence,\n  debug(\"cadence\", (ix, log) => log(ix.message.cadence)),\n  resolveArguments,\n  debug(\"arguments\", (ix, log) => log(ix.message.arguments, ix.message)),\n  resolveAccounts,\n  debug(\"accounts\", (ix, log, accts) => log(...accts(ix))),\n  /* special */ execFetchRef,\n  /* special */ execFetchSequenceNumber,\n  resolveSignatures,\n  debug(\"signatures\", (ix, log, accts) => log(...accts(ix))),\n  resolveFinalNormalization,\n  resolveValidators,\n  resolvePreSendCheck,\n  debug(\"resolved\", (ix, log) => log(ix)),\n])\n\nasync function execFetchRef(ix) {\n  if (isTransaction(ix) && ix.message.refBlock == null) {\n    const sendFn = await config.first([\"sdk.transport\", \"sdk.send\"], send)\n    ix.message.refBlock = (await sendFn(build([getBlock()])).then(decode)).id\n  }\n  return ix\n}\n\nasync function execFetchSequenceNumber(ix) {\n  if (isTransaction(ix)) {\n    const sendFn = await config.first([\"sdk.transport\", \"sdk.send\"], send)\n    var acct = Object.values(ix.accounts).find(a => a.role.proposer)\n    invariant(acct, `Transactions require a proposer`)\n    if (acct.sequenceNum == null) {\n      ix.accounts[acct.tempId].sequenceNum = await sendFn(\n        await build([getAccount(acct.addr)])\n      )\n        .then(decode)\n        .then(acct => acct.keys)\n        .then(keys => keys.find(key => key.index === acct.keyId))\n        .then(key => key.sequenceNumber)\n    }\n  }\n  return ix\n}\n","import {get, isFn} from \"../interaction/interaction.js\"\nimport {createSignableVoucher} from \"../resolve/voucher.js\"\n\nexport async function resolvePreSendCheck(ix) {\n  const fn = get(ix, \"ix.pre-send-check\")\n  if (isFn(fn)) {\n    await fn(createSignableVoucher(ix))\n  }\n  return ix\n}\n","import {interaction, pipe} from \"../interaction/interaction.js\"\nimport {config} from \"../config\"\nimport {resolve as defaultResolve} from \"../resolve/resolve.js\"\nimport {send as defaultSend} from \"./sdk-send.js\"\n\nexport const send = async (args = [], opts = {}) => {\n  const sendFn = await config.first(\n    [\"sdk.transport\", \"sdk.send\"],\n    opts.send || defaultSend\n  )\n\n  const resolveFn = await config.first(\n    [\"sdk.resolve\"],\n    opts.resolve || defaultResolve\n  )\n\n  if (Array.isArray(args)) args = pipe(interaction(), args)\n  return sendFn(await resolveFn(args), opts)\n}\n","import {decodeResponse} from \"./decode.js\"\nimport {config} from \"../config\"\n\nexport async function decode(response) {\n  const decodersFromConfig = await config().where(/^decoder\\./)\n  const decoders = Object.entries(decodersFromConfig).map(\n    ([pattern, xform]) => {\n      pattern = `/${pattern.replace(/^decoder\\./, \"\")}$/`\n      return [pattern, xform]\n    }\n  )\n\n  return decodeResponse(response, Object.fromEntries(decoders))\n}\n","import {withPrefix, sansPrefix} from \"@onflow/util-address\"\nimport {\n    encodeTransactionPayload,\n    encodeTransactionEnvelope,\n} from \"../encode/encode.js\"\n\nconst findPayloadSigners = (voucher) => {\n    // Payload Signers Are: (authorizers + proposer) - payer\n    let payload = new Set(voucher.authorizers)\n    payload.add(voucher.proposalKey.address)\n    payload.delete(voucher.payer)\n    return Array.from(payload).map(withPrefix)\n}\n\nconst findEnvelopeSigners = (voucher) => {\n    // Envelope Signers Are: (payer)\n    let envelope = new Set([voucher.payer])\n    return Array.from(envelope).map(withPrefix)\n}\n\nexport class UnableToDetermineMessageEncodingTypeForSignerAddress extends Error {\n    constructor(signerAddress) {\n      const msg = `\n        Encode Message From Signable Error: Unable to determine message encoding for signer addresss: ${signerAddress}. \n        Please ensure the address: ${signerAddress} is intended to sign the given transaction as specified by the transaction signable.\n      `.trim()\n      super(msg)\n      this.name = \"Unable To Determine Message Encoding For Signer Addresss\"\n    }\n}\n\nexport const encodeMessageFromSignable = (signable, signerAddress) => {\n    let payloadSigners = findPayloadSigners(signable.voucher)\n    let envelopeSigners = findEnvelopeSigners(signable.voucher)\n\n    const isPayloadSigner = payloadSigners.includes(withPrefix(signerAddress))\n    const isEnvelopeSigner = envelopeSigners.includes(withPrefix(signerAddress))\n\n    if (!isPayloadSigner && !isEnvelopeSigner) {\n        throw new UnableToDetermineMessageEncodingTypeForSignerAddress(signerAddress)\n    }\n\n    const message = {\n        cadence: signable.voucher.cadence,\n        refBlock: signable.voucher.refBlock,\n        computeLimit: signable.voucher.computeLimit,\n        arguments: signable.voucher.arguments,\n        proposalKey: {\n            ...signable.voucher.proposalKey,\n            address: sansPrefix(signable.voucher.proposalKey.address)\n        },\n        payer: sansPrefix(signable.voucher.payer),\n        authorizers: signable.voucher.authorizers.map(sansPrefix),\n        payloadSigs: signable.voucher.payloadSigs.map(ps => ({\n            ...ps,\n            address: sansPrefix(ps.address)\n        }))\n    }\n\n    return isPayloadSigner ? encodeTransactionPayload(message) : encodeTransactionEnvelope(message)\n}\n\n","import {send} from \"../send/send.js\"\nimport {getBlock} from \"../build/build-get-block\"\nimport {decodeResponse as decode} from \"../decode/decode.js\"\n\nexport function latestBlock(isSealed, opts) {\n  console.warn(\n    `\n      %cFCL/SDK Deprecation Notice\n      ============================\n  \n      \"latestBlock()\" is deprecated, please use \"block()\" for this and future versions of FCL\n      You can learn more (including a guide on common transition paths) here: https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0008-deprecate-latest-block-method\n  \n      ============================\n    `,\n      \"font-weight:bold;font-family:monospace;\"\n  ) \n\n  return send([getBlock(isSealed)], opts).then(decode)\n}\n","import {getAccount} from \"../build/build-get-account.js\"\nimport {decodeResponse as decode} from \"../decode/decode.js\"\nimport {send} from \"../send/send.js\"\n\nexport function account(address, opts) {\n  return send([getAccount(address)], opts).then(decode)\n}\n","import {send} from \"../send/send.js\"\nimport {getBlock} from \"../build/build-get-block\"\nimport {decodeResponse as decode} from \"../decode/decode.js\"\nimport {invariant} from \"@onflow/util-invariant\"\nimport {atBlockHeight, atBlockId} from \"../sdk\"\n\nexport function block({sealed = false, id, height} = {}, opts = {}) {\n  invariant(\n    !((sealed && id) || (sealed && height)),\n    `Method: block -- Cannot pass \"sealed\" with \"id\" or \"height\"`\n  )\n\n  invariant(\n    !(id && height),\n    `Method: block -- Cannot pass \"id\" and \"height\" simultaneously`\n  )\n\n  // Get block by ID\n  if (id) return send([getBlock(), atBlockId(id)], opts).then(decode)\n\n  // Get block by height\n  if (height) return send([getBlock(), atBlockHeight(height)], opts).then(decode)\n\n  // Get latest block\n  return send([getBlock(sealed)], opts).then(decode)\n}\n","import {pipe, prepAccount, AUTHORIZER} from \"../interaction/interaction.js\"\n\nexport function authorizations(ax = []) {\n  return pipe(\n    ax.map(authz => {\n      return prepAccount(authz, {role: AUTHORIZER})\n    })\n  )\n}\n\nexport function authorization(addr, signingFunction, keyId, sequenceNum) {\n  return {addr, signingFunction, keyId, sequenceNum}\n}\n","import {update} from \"../interaction/interaction.js\"\n\nexport function validator(cb) {\n    return update('ix.validators', validators => \n        Array.isArray(validators) ? validators.push(cb) : [cb]\n    )\n}\n","import {pipe} from \"../interaction/interaction.js\"\nimport {validator} from \"./build-validator.js\"\n\nexport function atBlockHeight(height) {\n  return pipe([\n    ix => {\n      ix.block.height = height\n      return ix\n    },\n    validator(ix => {\n      if (typeof ix.block.isSealed === \"boolean\")\n        throw new Error(\"Unable to specify both block height and isSealed.\")\n      if (ix.block.id)\n        throw new Error(\"Unable to specify both block height and block id.\")\n      return ix\n    }),\n  ])\n}\n","import {isGetAccount, pipe, Ok} from \"../interaction/interaction.js\"\nimport {validator} from \"./build-validator.js\"\n\nexport function atBlockId(id) {\n  return pipe([\n    ix => {\n      ix.block.id = id\n      return Ok(ix)\n    },\n    validator((ix, {Ok, Bad}) => {\n      if (isGetAccount(ix)) return Bad(ix, \"Unable to specify a block id with a Get Account interaction.\")\n      if (typeof ix.block.isSealed === \"boolean\") return Bad(ix, \"Unable to specify both block id and isSealed.\")\n      if (ix.block.height) return Bad(ix, \"Unable to specify both block id and block height.\")\n      return Ok(ix)\n    }),\n  ])\n}\n","import {pipe, Ok, makeGetEvents} from \"../interaction/interaction.js\"\n\nexport function getEvents(eventType, start, end) {\n\n  if (typeof start !== \"undefined\" || typeof end !== \"undefined\") {\n    console.warn(\n      `\n      %cFCL/SDK Deprecation Notice\n      ============================\n  \n      Passing a start and end into getEnvents has been deprecated and will not be supported in future versions of the Flow JS-SDK/FCL.\n      You can learn more (including a guide on common transition paths) here: https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0005-deprecate-start-end-get-events-builder\n  \n      ============================\n    `,\n      \"font-weight:bold;font-family:monospace;\"\n    )  \n  }\n\n  return pipe([\n    makeGetEvents,\n    ix => {\n      ix.events.eventType = eventType\n      ix.events.start = start\n      ix.events.end = end\n      return Ok(ix)\n    },\n  ])\n}\n","import {pipe, Ok, makeGetEvents} from \"../interaction/interaction.js\"\n\nexport function getEventsAtBlockHeightRange(eventType, start, end) {\n  return pipe([\n    makeGetEvents,\n    ix => {\n      ix.events.eventType = eventType\n      ix.events.start = start\n      ix.events.end = end\n      return Ok(ix)\n    },\n  ])\n}\n","import {pipe, Ok, makeGetEvents} from \"../interaction/interaction.js\"\n\nexport function getEventsAtBlockIds(eventType, blockIds = []) {\n  return pipe([\n    makeGetEvents,\n    ix => {\n      ix.events.eventType = eventType\n      ix.events.blockIds = blockIds\n      return Ok(ix)\n    },\n  ])\n}\n","import {pipe, Ok, makeGetBlockHeader} from \"../interaction/interaction.js\"\n\nexport function getBlockHeader(isSealed = null) {\n  return pipe([\n    makeGetBlockHeader,\n    ix => {\n      ix.block.isSealed = isSealed\n      return Ok(ix)\n    }\n  ])\n}\n","import {pipe, Ok, makeGetLatestBlock} from \"../interaction/interaction.js\"\n\nexport function getLatestBlock(isSealed = false) {\n\n  console.warn(\n    `\n    %cFCL/SDK Deprecation Notice\n    ============================\n\n    The getLatestBlock builder has been deprecated and will be removed in future versions of the Flow JS-SDK/FCL.\n    You can learn more (including a guide on common transition paths) here: https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0006-deprecate-get-latest-block-builder\n\n    ============================\n  `,\n    \"font-weight:bold;font-family:monospace;\"\n  )\n\n  return pipe([\n    makeGetLatestBlock,\n    ix => {\n      ix.block.isSealed = isSealed\n      return Ok(ix)\n    }\n  ])\n}\n","import {pipe, Ok, makeGetBlockById} from \"../interaction/interaction.js\"\n\nexport function getBlockById(id) {\n\n  console.warn(\n    `\n    %cFCL/SDK Deprecation Notice\n    ============================\n\n    The getBlockById builder has been deprecated and will be removed in future versions of the Flow JS-SDK/FCL.\n    You can learn more (including a guide on common transition paths) here: https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0004-deprecate-get-block-by-id-builder\n\n    ============================\n  `,\n    \"font-weight:bold;font-family:monospace;\"\n  )\n\n  return pipe([\n    makeGetBlockById,\n    ix => {\n      ix.block.ids = [id]\n      return Ok(ix)\n    }\n  ])\n}\n","import {pipe, Ok, makeGetBlockByHeight} from \"../interaction/interaction.js\"\n\nexport function getBlockByHeight(height) {\n\n  console.warn(\n    `\n    %cFCL/SDK Deprecation Notice\n    ============================\n\n    The getBlockByHeight builder has been deprecated and will be removed in future versions of the Flow JS-SDK/FCL.\n    You can learn more (including a guide on common transition paths) here: https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0003-deprecate-get-block-by-height-builder\n\n    ============================\n  `,\n    \"font-weight:bold;font-family:monospace;\"\n  )\n\n  return pipe([\n    makeGetBlockByHeight,\n    ix => {\n      ix.block.height = height\n      return Ok(ix)\n    }\n  ])\n}\n","import {pipe, makeGetCollection} from \"../interaction/interaction.js\"\n\nexport function getCollection(id = null) {\n  return pipe([\n    makeGetCollection,\n    ix => {\n      ix.collection.id = id\n      return ix\n    }\n  ])\n}\n","import {pipe, Ok, makeGetTransactionStatus} from \"../interaction/interaction.js\"\n\nexport function getTransactionStatus(transactionId) {\n  return pipe([\n    makeGetTransactionStatus,\n    ix => {\n      ix.transaction.id = transactionId\n      return Ok(ix)\n    }\n  ])\n}\n","import {pipe, Ok, makeGetTransaction} from \"../interaction/interaction.js\"\n\nexport function getTransaction(transactionId) {\n  return pipe([\n    makeGetTransaction,\n    ix => {\n      ix.transaction.id = transactionId\n      return Ok(ix)\n    }\n  ])\n}\n","export function limit(computeLimit) {\n  return ix => {\n    ix.message.computeLimit = computeLimit\n    return ix\n  }\n}\n","import {pipe, makeArgument} from \"../interaction/interaction.js\"\n\nexport function args(ax = []) {\n  return pipe(ax.map(makeArgument))\n}\n\nexport function arg(value, xform) {\n  return {value, xform}\n}\n","import {prepAccount, PROPOSER} from \"../interaction/interaction.js\"\n\nexport async function proposer(authz) {\n  return prepAccount(authz, {role: PROPOSER})\n}\n","import {prepAccount, PAYER} from \"../interaction/interaction.js\"\n\nexport async function payer(authz) {\n  return prepAccount(authz, {role: PAYER})\n}\n","import {makePing} from \"../interaction/interaction.js\"\n\nexport function ping() {\n  return makePing\n}\n","import {pipe, Ok} from \"../interaction/interaction.js\"\n\nexport function ref(refBlock) {\n  return pipe([\n    ix => {\n      ix.message.refBlock = refBlock\n      return Ok(ix)\n    }\n  ])\n}\n","import {pipe, Ok, put, makeScript} from \"../interaction/interaction.js\"\nimport {template} from \"@onflow/util-template\"\n\nexport function script(...args) {\n  return pipe([\n    makeScript,\n    put(\"ix.cadence\", template(...args))\n  ])\n}\n","import {pipe, put, Ok, makeTransaction} from \"../interaction/interaction.js\"\nimport {template} from \"@onflow/util-template\"\n\nconst DEFAULT_COMPUTE_LIMIT = 10\nconst DEFAULT_SCRIPT_ACCOUNTS = []\nconst DEFUALT_REF = null\n\nexport function transaction(...args) {\n  return pipe([\n    makeTransaction,\n    put(\"ix.cadence\", template(...args)),\n    ix => {\n      ix.message.computeLimit = ix.message.computeLimit || DEFAULT_COMPUTE_LIMIT\n      ix.message.refBlock = ix.message.refBlock || DEFUALT_REF\n      ix.authorizations = ix.authorizations || DEFAULT_SCRIPT_ACCOUNTS\n      return Ok(ix)\n    },\n  ])\n}\n","import { Ok, Bad } from \"../interaction/interaction.js\"\n\nexport function invariant(...args) {\n  if (args.length > 1) {\n    const [predicate, message] = args\n    return invariant((ix, { Ok, Bad }) => {\n      return predicate ? Ok(ix) : Bad(ix, message)\n    })\n  }\n  const [fn] = args\n  return ix => fn(ix, {Ok, Bad})\n}\n","import {isTransaction, Ok} from \"../interaction/interaction.js\"\nimport {send} from \"../send/sdk-send.js\"\nimport {decodeResponse} from \"../decode/decode.js\"\nimport {getAccount} from \"../build/build-get-account.js\"\nimport {build} from \"../build/build.js\"\n\nexport const resolveProposerSequenceNumber = ({ node }) => async (ix) => {\n  if (!(isTransaction(ix))) return Ok(ix)\n  if (ix.accounts[ix.proposer].sequenceNum) return Ok(ix)\n\n  const response = await send(await build([\n    getAccount(ix.accounts[ix.proposer].addr)\n  ]), { node })\n  const decoded = await decodeResponse(response)\n\n  ix.accounts[ix.proposer].sequenceNum = decoded.keys[ix.accounts[ix.proposer].keyId].sequenceNumber\n\n  return Ok(ix)\n}\n","import {invariant} from \"@onflow/util-invariant\"\nimport {isGetAccount, isGetBlock} from \"../interaction/interaction\"\n\nexport function mockAccountResponse(ix, numberOfKeys = 5) {\n  // prettier-ignore\n  invariant(ix.account, \"mockAccountResponse(ix) -- ix.account is missing\", ix)\n  // prettier-ignore\n  invariant( ix.account.addr, \"mockAccountResponse(ix) -- ix.account.addr is missing\", ix)\n\n  const address = ix.account.addr\n\n  return {\n    account: {\n      addr: address,\n      keys: Array.from({length: numberOfKeys}, (_, i) => ({\n        index: i,\n        sequenceNumber: 42,\n      })),\n    },\n  }\n}\n\nexport function mockGetBlockResponse(ix) {\n  return {\n    tag: \"GET_BLOCK\",\n    block: {\n      id: \"32\",\n    },\n  }\n}\n\nconst identity = v => v\n\nexport function mockSend(fallback = identity) {\n  return async function execSend(ix) {\n    ix = await ix\n    switch (true) {\n      case isGetAccount(ix):\n        return mockAccountResponse(ix)\n\n      case isGetBlock(ix):\n        return mockGetBlockResponse(ix)\n\n      default:\n        return fallback(ix)\n    }\n  }\n}\n","export const idof = acct => `${acct.addr}-${acct.keyId}`\n\nexport function sig(opts) {\n  return [\"SIGNATURE\", opts.addr, opts.keyId].join(\".\")\n}\n\nexport function authzFn(opts = {}) {\n  return function (account) {\n    const acct = {\n      ...account,\n      ...opts,\n      signingFunction:\n        opts.signingFunction ||\n        account.signingFunction ||\n        fallbackSigningFunction,\n    }\n\n    return acct\n\n    function fallbackSigningFunction(signable) {\n      return {\n        addr: acct.addr,\n        keyId: acct.keyId,\n        signature: sig(acct),\n      }\n    }\n  }\n}\n\nexport function authzResolve(opts = {}) {\n  return function (account) {\n    const {tempId, ...rest} = opts\n    return {\n      ...account,\n      tempId: tempId || \"WITH_RESOLVE\",\n      resolve: authzFn(rest),\n    }\n  }\n}\n\nconst ROLE = {proposer: false, authorizer: false, payer: false}\nconst noop = () => {}\n\nexport function authzResolveMany(opts = {}) {\n  return function (account) {\n    const tempId = opts.tempId || \"AUTHZ_RESOLVE_MANY\"\n    return {\n      ...account,\n      tempId,\n      resolve: () =>\n        [\n          opts.proposer &&\n            authzFn(opts.proposer)({role: {...ROLE, proposer: true}}),\n          ...opts.authorizations\n            .map(authzFn)\n            .map(d => d({role: {...ROLE, authorizer: true}})),\n          opts.payer && authzFn(opts.payer)({role: {...ROLE, payer: true}}),\n        ].filter(Boolean),\n    }\n  }\n}\n","import {build} from \"../build/build\"\nimport {resolve} from \"../resolve/resolve\"\nimport {ref} from \"../build/build-ref\"\n\nexport const run = (fns = []) => build([ref(\"123\"), ...fns]).then(resolve)\n","export const VERSION = \"0.0.56\"\n","import {deprecate} from \"./utils\"\n// Base\nexport {build} from \"./build/build.js\"\nexport {resolve} from \"./resolve/resolve.js\"\nexport {send} from \"./send/send.js\"\nexport {decode} from \"./decode/sdk-decode.js\"\n\n// Utils\nexport {\n  interaction,\n  isOk,\n  isBad,\n  why,\n  pipe,\n  get,\n  put,\n  update,\n  destroy,\n  isUnknown,\n  isScript,\n  isTransaction,\n  isGetTransaction,\n  isGetTransactionStatus,\n  isGetAccount,\n  isGetEvents,\n  isGetLatestBlock,\n  isGetBlockById,\n  isGetBlockByHeight,\n  isPing,\n  isGetBlock,\n  isGetBlockHeader,\n  isGetCollection,\n} from \"./interaction/interaction.js\"\nexport {createSignableVoucher, voucherToTxId} from \"./resolve/voucher.js\"\nexport {encodeMessageFromSignable} from \"./wallet-utils/encode-signable.js\"\nexport {template as cadence} from \"@onflow/util-template\"\nexport {template as cdc} from \"@onflow/util-template\"\n\n// Helpers\nexport {latestBlock} from \"./latest-block/latest-block.js\"\nexport {account} from \"./account/account.js\"\nexport {block} from \"./block/block.js\"\n\n// Builders\nexport {authorizations, authorization} from \"./build/build-authorizations.js\"\nexport {atBlockHeight} from \"./build/build-at-block-height.js\"\nexport {atBlockId} from \"./build/build-at-block-id.js\"\nexport {getAccount} from \"./build/build-get-account.js\"\nexport {getEvents} from \"./build/build-get-events.js\"\nexport {getEventsAtBlockHeightRange} from \"./build/build-get-events-at-block-height-range.js\"\nexport {getEventsAtBlockIds} from \"./build/build-get-events-at-block-ids\"\nexport {getBlock} from \"./build/build-get-block.js\"\nexport {getBlockHeader} from \"./build/build-get-block-header.js\"\nexport {getLatestBlock} from \"./build/build-get-latest-block.js\"\nexport {getBlockById} from \"./build/build-get-block-by-id.js\"\nexport {getBlockByHeight} from \"./build/build-get-block-by-height\"\nexport {getCollection} from \"./build/build-get-collection\"\nexport {getTransactionStatus} from \"./build/build-get-transaction-status.js\"\nexport {getTransaction} from \"./build/build-get-transaction.js\"\nexport {limit} from \"./build/build-limit.js\"\nexport {args, arg} from \"./build/build-arguments.js\"\nexport {proposer} from \"./build/build-proposer.js\"\nexport {payer} from \"./build/build-payer.js\"\nexport {ping} from \"./build/build-ping.js\"\nexport {ref} from \"./build/build-ref.js\"\nexport {script} from \"./build/build-script.js\"\nexport {transaction} from \"./build/build-transaction.js\"\nexport {validator} from \"./build/build-validator.js\"\nexport {invariant} from \"./build/build-invariant.js\"\n// export {preSendCheck} from \"./build/build-pre-send-check.js\"\n\n// Resolvers\nexport {resolveCadence} from \"./resolve/resolve-cadence.js\"\nexport {resolveFinalNormalization} from \"./resolve/resolve-final-normalization\"\nexport {resolveProposerSequenceNumber} from \"./resolve/resolve-proposer-sequence-number\"\nexport {resolveArguments} from \"./resolve/resolve-arguments.js\"\nexport {resolveAccounts} from \"./resolve/resolve-accounts.js\"\nexport {resolveSignatures} from \"./resolve/resolve-signatures.js\"\nexport {resolveValidators} from \"./resolve/resolve-validators.js\"\nexport {resolveRefBlockId} from \"./resolve/resolve-ref-block-id.js\"\n// export {resolvePreSendCheck} from \"./resolve/resolve-pre-send-check.js\"\n\n// Config\nexport {config} from \"./config\"\n\n// Deprecated\nexport const params = params =>\n  deprecate.error({\n    name: \"params\",\n    transitionsPath:\n      \"https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0001-deprecate-params\",\n  })\nexport const param = params =>\n  deprecate.warn({\n    name: \"param\",\n    transitionsPath:\n      \"https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0001-deprecate-params\",\n  })\n\nimport * as TestUtils from \"./test-utils\"\nexport {TestUtils}\n\nexport {VERSION} from \"./VERSION\"\n","const buildWarningMessage = ({name, transitionsPath}) => {\n  console.warn(\n    `\n    %cFCL/SDK Deprecation Notice\n    ============================\n    The ${name} builder has been deprecated and will be removed in future versions of the Flow JS-SDK/FCL.\n    You can learn more (including a guide on common transition paths) here: ${transitionsPath}\n    ============================\n  `,\n    \"font-weight:bold;font-family:monospace;\"\n  )\n}\n\nconst buildErrorMessage = ({name, transitionsPath}) => {\n  console.error(\n    `\n    %cFCL/SDK Deprecation Notice\n    ============================\n    The ${name} builder has been removed from the Flow JS-SDK/FCL.\n    You can learn more (including a guide on common transition paths) here: ${transitionsPath}\n    ============================\n  `,\n    \"font-weight:bold;font-family:monospace;\"\n  )\n}\n\nconst warn = deprecated => buildWarningMessage(deprecated)\n\nconst error = deprecated => {\n  buildErrorMessage(deprecated)\n}\n\nexport const deprecate = {\n  warn,\n  error,\n}\n"],"names":["IX","KEYS","Set","Object","keys","JSON","parse","interaction","CHARS","split","randChar","Math","random","length","uuid","Array","from","join","isNull","d","isFn","Ok","ix","status","Bad","reason","makeIx","wat","tag","prepAccount","acct","opts","invariant","role","ACCOUNT","tempId","authorization","resolve","accounts","authorizations","push","makeArgument","arg","message","arguments","value","asArgument","xform","resolveArgument","bind","makeScript","makeTransaction","makeGetTransactionStatus","makeGetTransaction","makeGetAccount","makeGetEvents","makeGetLatestBlock","makeGetBlockById","makeGetBlockByHeight","makePing","makeGetBlock","makeGetBlockHeader","makeGetCollection","is","isUnknown","isScript","isTransaction","isGetTransactionStatus","isGetTransaction","isGetAccount","isGetEvents","isGetLatestBlock","isGetBlockById","isGetBlockByHeight","isPing","isGetBlock","isGetBlockHeader","isGetCollection","isOk","isBad","why","recPipe","async","fns","key","has","Error","hardMode","hd","rest","cur","isNumber","hasOwnProperty","isInteraction","e","pipe","args","arg1","arg2","isArray","identity","v","get","fallback","assigns","put","update","fn","destroy","build","NAME","PUT","GET","UPDATED","HANDLERS","ctx","_letter","broadcast","all","letter","reply","GET_ALL_CONFIG","UPDATE_CONFIG","DELETE_CONFIG","delete","CLEAR_CONFIG","WHERE_CONFIG","pattern","where","SUBSCRIBE","subscribe","send","UNSUBSCRIBE","unsubscribe","config","expectReply","timeout","first","wants","head","ret","_delete","callback","subscriber","spawn","clearConfig","values","map","overload","noop","Promise","reject","oldConfig","result","error","response","unary","host","method","request","metadataFromConfig","grpc","metadata","Metadata","onEnd","statusMessage","Code","OK","setDefaultTransport","NodeHttpTransport","hexBuffer","hex","Buffer","addressBuffer","addr","padStart","pad","STATUS_MAP","convertStatusToString","code","String","u8ToHex","u8","toString","argumentBuffer","stringify","constructResponse","res","encodedData","getValue_asU8","account","getAccount","contractsMap","contracts","getContractsMap","getEntryList","reduce","acc","contract","UInt8Array","address","withPrefix","getAddress_asU8","balance","getBalance","getCode_asU8","getKeysList","publicKey","index","getIndex","getPublicKey_asU8","signAlgo","getSignAlgo","hashAlgo","getHashAlgo","weight","getWeight","sequenceNumber","getSequenceNumber","revoked","getRevoked","results","getResultsList","events","blocks","blockId","getBlockId_asU8","blockHeight","getBlockHeight","blockTimestamp","getBlockTimestamp","toDate","toISOString","getEventsList","forEach","event","type","getType","transactionId","getTransactionId_asU8","transactionIndex","getTransactionIndex","eventIndex","getEventIndex","payload","getPayload_asU8","block","getBlock","collectionGuarantees","getCollectionGuaranteesList","blockSeals","getBlockSealsList","signatures","getSignaturesList","id","getId_asU8","parentId","getParentId_asU8","height","getHeight","timestamp","getTimestamp","collectionGuarantee","collectionId","getCollectionId_asU8","blockSeal","executionReceiptId","getExecutionReceiptId_asU8","executionReceiptSignatures","getExecutionReceiptSignaturesList","resultApprovalSignatures","getResultApprovalSignaturesList","blockHeader","node","sendTransaction","defaultUnary","tx","Transaction","setScript","script","scriptBuffer","cadence","setGasLimit","computeLimit","setReferenceBlockId","refBlock","setPayer","sansPrefix","payer","addArguments","prev","current","find","item","addAuthorizers","proposalKey","ProposalKey","setAddress","proposer","setKeyId","keyId","setSequenceNumber","sequenceNum","setProposalKey","signature","sig","Signature","setSignature","addPayloadSignatures","console","addEnvelopeSignatures","req","SendTransactionRequest","setTransaction","t1","Date","now","AccessAPI","SendTransaction","t2","window","dispatchEvent","CustomEvent","detail","txId","delta","sendGetTransactionStatus","GetTransactionRequest","setId","transaction","GetTransactionResult","getStatus","transactionStatus","statusString","statusCode","getStatusCode","errorMessage","getErrorMessage","sendGetTransaction","GetTransaction","unwrapSignature","getKeyId","getSignature_asU8","getTransaction","getScript_asU8","getArgumentsList","referenceBlockId","getReferenceBlockId_asU8","gasLimit","getGasLimit","getProposalKey","getPayer_asU8","authorizers","getAuthorizersList","payloadSignatures","getPayloadSignaturesList","envelopeSignatures","getEnvelopeSignaturesList","sendExecuteScript","ExecuteScriptAtBlockIDRequest","setBlockId","ExecuteScriptAtBlockID","sendExecuteScriptAtBlockIDRequest","ExecuteScriptAtBlockHeightRequest","setBlockHeight","Number","ExecuteScriptAtBlockHeight","sendExecuteScriptAtBlockHeightRequest","ExecuteScriptAtLatestBlockRequest","ExecuteScriptAtLatestBlock","sendExecuteScriptAtLatestBlockRequest","sendGetAccount","GetAccountAtBlockHeightRequest","GetAccountAtBlockHeight","sendGetAccountAtBlockHeightRequest","GetAccountAtLatestBlockRequest","GetAccountAtLatestBlock","sendGetAccountAtLatestBlockRequest","sendGetEvents","interactionContainsBlockHeightRange","start","interactionContainsBlockIDsList","blockIds","GetEventsForHeightRangeRequest","setType","eventType","setStartHeight","setEndHeight","end","GetEventsForHeightRange","sendGetEventsForHeightRangeRequest","GetEventsForBlockIDsRequest","addBlockIds","GetEventsForBlockIDs","sendGetEventsForBlockIDsRequest","sendGetLatestBlock","GetLatestBlockRequest","latestBlock","isSealed","setIsSealed","replace","trim","GetLatestBlock","sendGetBlock","interactionHasBlockHeight","GetBlockByIDRequest","GetBlockByID","sendGetBlockByIDRequest","GetBlockByHeightRequest","setHeight","GetBlockByHeight","sendGetBlockByHeightRequest","_ix$block","sendGetBlockRequest","sendGetBlockHeader","GetBlockHeaderByIDRequest","GetBlockHeaderByID","sendGetBlockHeaderByIDRequest","GetBlockHeaderByHeightRequest","GetBlockHeaderByHeight","sendGetBlockHeaderByHeightRequest","GetLatestBlockHeaderRequest","GetLatestBlockHeader","sendGetLatestBlockHeaderRequest","sendGetBlockById","sendGetBlockByHeight","sendGetCollection","GetCollectionByIDRequest","collection","GetCollectionByID","getCollection","transactionIds","getTransactionIdsList","sendPing","PingRequest","Ping","decodeNumber","num","_","stack","decodeImplicit","i","decodeComposite","composite","decoders","decoded","fields","name","recurseDecode","decoder","decoderLookup","defaultDecoders","UInt","Int","UInt8","Int8","UInt16","Int16","UInt32","Int32","UInt64","Int64","UInt128","Int128","UInt256","Int256","Word8","Word16","Word32","Word64","UFix64","Fix64","Character","Bool","Address","Void","Optional","optional","Reference","array","Dictionary","dictionary","Event","Resource","Struct","Enum","Type","staticType","Path","domain","path","identifier","Capability","cap","borrowType","lookup","found","test","RegExp","substring","decodeInstructions","decode","customDecoders","decodeResponse","data","resolveRefBlockId","getRefId","isString","resolveCadence","then","entries","regex","cast","handleArgResolution","depth","resolveArguments","encodeTransactionPayload","prependTransactionDomainTag","rlpEncode","preparePayload","encodeTransactionEnvelope","prepareEnvelope","leftPaddedHexBuffer","TRANSACTION_DOMAIN_TAG","padEnd","blockBuffer","argumentToString","signatureBuffer","encode","validatePayload","validateEnvelope","preparePayloadSignatures","signers","collectSigners","payloadSigs","signerIndex","sort","a","b","Map","addSigner","set","payloadFields","field","checkField","proposalKeyFields","payloadSigsFields","payloadSigFields","isObject","check","defaultVal","envelopeSigsFields","envelopeSigFields","obj","base","missingFieldError","invalidFieldError","printFieldName","findInsideSigners","inside","add","findOutsideSigners","outside","createSignableVoucher","cid","buildAuthorizers","envelopeSigs","voucherToTxId","voucher","msg","sha","SHA3","digest","sha3_256","validateVoucher","prepareSigs","sigs","authorizer","prepareVoucher","encodeTxIdFromVoucher","buildPreSignable","f_type","f_vsn","roles","collectAccounts","last","ax","old","curr","resolveAccounts","resolveSignatures","insideSigners","insidePayload","encodeInsideMessage","prepForEncoding","fetchSignature","outsideSigners","outsidePayload","encodeOutsideMessage","signingFunction","buildSignable","resolveValidators","validators","cb","resolveFinalNormalization","debug","log","filter","Boolean","accts","sendFn","defaultSend","resolveFn","defaultResolve","decodersFromConfig","fromEntries","UnableToDetermineMessageEncodingTypeForSignerAddress","constructor","signerAddress","super","this","encodeMessageFromSignable","signable","payloadSigners","findPayloadSigners","envelopeSigners","envelope","findEnvelopeSigners","isPayloadSigner","includes","isEnvelopeSigner","ps","warn","sealed","atBlockId","atBlockHeight","authz","validator","getEvents","getEventsAtBlockHeightRange","getEventsAtBlockIds","getBlockHeader","getLatestBlock","getBlockById","ids","getBlockByHeight","getTransactionStatus","limit","ping","ref","template","DEFAULT_SCRIPT_ACCOUNTS","predicate","resolveProposerSequenceNumber","authzFn","ROLE","numberOfKeys","mockAccountResponse","VERSION","params","transitionsPath","buildErrorMessage","param","buildWarningMessage"],"mappings":"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"}