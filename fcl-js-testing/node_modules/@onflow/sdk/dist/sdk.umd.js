!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("@onflow/util-invariant"),require("@onflow/util-actor"),require("@onflow/protobuf"),require("@onflow/util-address"),require("@improbable-eng/grpc-web"),require("@improbable-eng/grpc-web-node-http-transport"),require("sha3"),require("@onflow/rlp"),require("@onflow/util-template")):"function"==typeof define&&define.amd?define(["exports","@onflow/util-invariant","@onflow/util-actor","@onflow/protobuf","@onflow/util-address","@improbable-eng/grpc-web","@improbable-eng/grpc-web-node-http-transport","sha3","@onflow/rlp","@onflow/util-template"],n):n((e||self).sdk={},e.utilInvariant,e.utilActor,e.protobuf,e.utilAddress,e.grpcWeb,e.grpcWebNodeHttpTransport,e.sha3,e.rlp,e.utilTemplate)}(this,function(e,n,t,r,o,i,u,a,c,s){function l(){return l=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},l.apply(this,arguments)}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function d(e,n){return d=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e},d(e,n)}function m(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function p(e,n,t){return p=m()?Reflect.construct:function(e,n,t){var r=[null];r.push.apply(r,n);var o=new(Function.bind.apply(e,r));return t&&d(o,t.prototype),o},p.apply(null,arguments)}function g(e){var n="function"==typeof Map?new Map:void 0;return g=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return p(e,arguments,f(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),d(t,e)},g(e)}function h(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var v,y="SCRIPT",k="TRANSACTION",b="GET_TRANSACTION_STATUS",I="GET_ACCOUNT",P="GET_EVENTS",S="GET_LATEST_BLOCK",B="PING",w="GET_TRANSACTION",A="GET_BLOCK_BY_ID",x="GET_BLOCK_BY_HEIGHT",E="GET_BLOCK",T="GET_BLOCK_HEADER",j="GET_COLLECTION",N="authorizer",G='{\n  "tag":"UNKNOWN",\n  "assigns":{},\n  "status":"OK",\n  "reason":null,\n  "accounts":{},\n  "params":{},\n  "arguments":{},\n  "message": {\n    "cadence":null,\n    "refBlock":null,\n    "computeLimit":null,\n    "proposer":null,\n    "payer":null,\n    "authorizations":[],\n    "params":[],\n    "arguments":[]\n  },\n  "proposer":null,\n  "authorizations":[],\n  "payer":null,\n  "events": {\n    "eventType":null,\n    "start":null,\n    "end":null,\n    "blockIds":[]\n  },\n  "transaction": {\n    "id":null\n  },\n  "block": {\n    "id":null,\n    "height":null,\n    "isSealed":null\n  },\n  "account": {\n    "addr":null\n  },\n  "collection": {\n    "id":null\n  }\n}',L=new Set(Object.keys(JSON.parse(G))),O=function(){return JSON.parse(G)},R="abcdefghijklmnopqrstuvwxyz0123456789".split(""),D=function(){return R[~~(Math.random()*R.length)]},_=function(){return Array.from({length:10},D).join("")},U=function(e){return Array.isArray(e)},C=function(e){return null==e},K=function(e){return"function"==typeof e},H=function(e){return e.status="OK",e},q=function(e,n){return e.status="BAD",e.reason=n,e},F=function(e){return function(n){return n.tag=e,H(n)}},z=function(e,t){return void 0===t&&(t={}),function(r){var o;n.invariant("function"==typeof e||"object"==typeof e,"prepAccount must be passed an authorization function or an account object"),n.invariant(null!=t.role,"Account must have a role");var i=JSON.parse('{\n  "kind":"ACCOUNT",\n  "tempId":null,\n  "addr":null,\n  "keyId":null,\n  "sequenceNum":null,\n  "signature":null,\n  "signingFunction":null,\n  "resolve":null,\n  "role": {\n    "proposer":false,\n    "authorizer":false,\n    "payer":false,\n    "param":false\n  }\n}'),u=t.role,a=_();return e.authorization&&K(e.authorization)&&(e={resolve:e.authorization}),!e.authorization&&K(e)&&(e={resolve:e}),r.accounts[a]=l({},i,{tempId:a},e,{role:l({},i.role,"object"==typeof e.role?e.role:{},(o={},o[u]=!0,o))}),u===N?r.authorizations.push(a):r[u]=a,r}},M=function(e){return function(n){var t=_();return n.message.arguments.push(t),n.arguments[t]=JSON.parse('{\n  "kind":"ARGUMENT",\n  "tempId":null,\n  "value":null,\n  "asArgument":null,\n  "xform":null,\n  "resolve": null,\n  "resolveArgument": null\n}'),n.arguments[t].tempId=t,n.arguments[t].value=e.value,n.arguments[t].asArgument=e.asArgument,n.arguments[t].xform=e.xform,n.arguments[t].resolve=e.resolve,n.arguments[t].resolveArgument=K(e.resolveArgument)?e.resolveArgument.bind(e):e.resolveArgument,H(n)}},J=F(y),W=F(k),V=F(b),Y=F(w),X=F(I),$=F(P),Z=F(S),Q=F(A),ee=F(x),ne=F(B),te=F(E),re=F(T),oe=F(j),ie=function(e){return function(n){return n.tag===e}},ue=ie("UNKNOWN"),ae=ie(y),ce=ie(k),se=ie(b),le=ie(w),fe=ie(I),de=ie(P),me=ie(S),pe=ie(A),ge=ie(x),he=ie(B),ve=ie(E),ye=ie(T),ke=ie(j),be=function(e){return"BAD"===e.status},Ie=function e(n,t){void 0===t&&(t=[]);try{return Promise.resolve(function(r,o){try{var i=Promise.resolve(n).then(function(r){if(n=function(e){for(var n=0,t=Object.keys(e);n<t.length;n++){var r=t[n];if(!L.has(r))throw new Error('"'+r+'" is an invalid root level Interaction property.')}return e}(r),be(n))throw new Error("Interaction Error: "+n.reason);if(!t.length)return n;var o=t[0],i=t.slice(1);return Promise.resolve(o).then(function(t){if(K(t))return e(t(n),i);if(C(t)||!t)return e(n,i);if(function(e){if(null===(n=e)||"object"!=typeof n||C(e)||function(e){return"number"==typeof e}(e))return!1;for(var n,t,r=function(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(t)return(t=t.call(e)).next.bind(t);if(Array.isArray(e)||(t=function(e,n){if(e){if("string"==typeof e)return h(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?h(e,n):void 0}}(e))){t&&(e=t);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(L);!(t=r()).done;)if(!e.hasOwnProperty(t.value))return!1;return!0}(t))return e(t,i);throw new Error("Invalid Interaction Composition")})})}catch(e){return o(e)}return i&&i.then?i.then(void 0,o):i}(0,function(e){throw e}))}catch(e){return Promise.reject(e)}},Pe=function e(){var n=[].slice.call(arguments),t=n[0],r=n[1];return U(t)&&null==r?function(n){return e(n,t)}:Ie(t,r)},Se=function(e){return e},Be=function(e,n,t){return null==e.assigns[n]?t:e.assigns[n]},we=function(e,n){return function(t){return t.assigns[e]=n,H(t)}},Ae=function(e,n){return void 0===n&&(n=Se),function(t){return t.assigns[e]=n(t.assigns[e],t),H(t)}};function xe(e){return void 0===e&&(e=[]),Pe(O(),e)}var Ee=function e(n,t){void 0===n&&(n=[]);try{if(!n.length)return Promise.resolve(t);var r=n[0],o=n.slice(1);return Promise.resolve(He(r)).then(function(n){return null==n?e(o,t):n})}catch(e){return Promise.reject(e)}},Te="config",je="PUT_CONFIG",Ne="GET_CONFIG",Ge="GET_ALL_CONFIG",Le="UPDATE_CONFIG",Oe="DELETE_CONFIG",Re="CLEAR_CONFIG",De="WHERE_CONFIG",_e="CONFIG/UPDATED",Ue=function(e){return e},Ce=((v={})[je]=function(e,n,t){var r=t.key,o=t.value;if(null==r)throw new Error("Missing 'key' for config/put.");e.put(r,o),e.broadcast(_e,l({},e.all()))},v[Ne]=function(e,n,t){var r=t.key,o=t.fallback;if(null==r)throw new Error("Missing 'key' for config/get");n.reply(e.get(r,o))},v[Ge]=function(e,n){n.reply(l({},e.all()))},v[Le]=function(e,n,t){var r=t.key,o=t.fn;if(null==r)throw new Error("Missing 'key' for config/update");e.update(r,o||Ue),e.broadcast(_e,l({},e.all()))},v[Oe]=function(e,n,t){var r=t.key;if(null==r)throw new Error("Missing 'key' for config/delete");e.delete(r),e.broadcast(_e,l({},e.all()))},v[Re]=function(e,n){for(var t=0,r=Object.keys(e.all());t<r.length;t++)e.delete(r[t]);e.broadcast(_e,l({},e.all()))},v[De]=function(e,n,t){var r=t.pattern;if(null==r)throw new Error("Missing 'pattern' for config/where");n.reply(e.where(r))},v[t.SUBSCRIBE]=function(e,n){e.subscribe(n.from),e.send(n.from,_e,l({},e.all()))},v[t.UNSUBSCRIBE]=function(e,n){e.unsubscribe(n.from)},v);function Ke(e,n){return t.send(Te,je,{key:e,value:n}),Ve()}function He(e,n){return t.send(Te,Ne,{key:e,fallback:n},{expectReply:!0,timeout:10})}function qe(){return t.send(Te,Ge,null,{expectReply:!0,timeout:10})}function Fe(e,n){return void 0===n&&(n=Ue),t.send(Te,Le,{key:e,fn:n}),Ve()}function ze(e){return t.send(Te,Oe,{key:e}),Ve()}function Me(e){return t.send(Te,De,{pattern:e},{expectReply:!0,timeout:10})}function Je(e){return t.subscriber(Te,function(){return t.spawn(Ce,Te)},e)}function We(){return t.send(Te,Re)}function Ve(e){return null!=e&&"object"==typeof e&&Object.keys(e).map(function(n){return Ke(n,e[n])}),{put:Ke,get:He,all:qe,first:Ee,update:Fe,delete:ze,where:Me,subscribe:Je,overload:Xe}}t.spawn(Ce,Te),Ve.put=Ke,Ve.get=He,Ve.all=qe,Ve.first=Ee,Ve.update=Fe,Ve.delete=ze,Ve.where=Me,Ve.subscribe=Je,Ve.overload=Xe;var Ye=function(e){return e};function Xe(e,n){return void 0===e&&(e={}),void 0===n&&(n=Ye),new Promise(function(t,r){try{return Promise.resolve(qe()).then(function(o){var i=function(r,i){try{var u=function(){Ve(e);var r=n;return Promise.resolve(qe()).then(function(e){return Promise.resolve(r(e)).then(function(e){return Promise.resolve(We()).then(function(){return Promise.resolve(Ve(o)).then(function(){t(e)})})})})}()}catch(e){return i(e)}return u&&u.then?u.then(void 0,i):u}(0,function(e){return Promise.resolve(We()).then(function(){return Promise.resolve(Ve(o)).then(function(){r(e)})})});if(i&&i.then)return i.then(function(){})})}catch(e){return Promise.reject(e)}})}var $e=function(){return JSON.parse('{\n    "tag":null,\n    "transaction":null,\n    "transactionStatus":null,\n    "transactionId":null,\n    "encodedData":null,\n    "events":null,\n    "account":null,\n    "block":null,\n    "blockHeader":null,\n    "latestBlock":null,\n    "collection":null\n}')},Ze=function(e,n,t){try{return Promise.resolve(Ve().get("grpc.metadata",{})).then(function(r){return new Promise(function(o,u){i.grpc.unary(n,{request:t,host:e,metadata:new i.grpc.Metadata(r),onEnd:function(e){var n=e.statusMessage;e.status===i.grpc.Code.OK?o(e.message):u(new Error(n))}})})})}catch(e){return Promise.reject(e)}};i.grpc.setDefaultTransport(u.NodeHttpTransport());var Qe=function(e){return Buffer.from(e,"hex")},en=function(e){return Buffer.from(e.padStart(16,0),"hex")},nn={0:"UNKNOWN",1:"PENDING",2:"FINALIZED",3:"EXECUTED",4:"SEALED",5:"EXPIRED"},tn=function(e){if(null!=e)return nn[String(e)]},rn=function(e){return Buffer.from(e).toString("hex")},on=function(e){return Buffer.from(JSON.stringify(e),"utf8")};function un(e,n){var t=$e();return t.tag=e.tag,t.encodedData=JSON.parse(Buffer.from(n.getValue_asU8()).toString("utf8")),t}var an=function(e){return Buffer.from(e).toString("hex")},cn=function(e){return Buffer.from(e.padStart(16,0),"hex")};function sn(e,n){var t=$e();t.tag=e.tag;var r,i=n.getAccount(),u=(r=i.getContractsMap())?r.getEntryList().reduce(function(e,n){var t;return l({},e,((t={})[n[0]]=Buffer.from(n[1]||new UInt8Array).toString("utf8"),t))},{}):{};return t.account={address:o.withPrefix(an(i.getAddress_asU8())),balance:i.getBalance(),code:Buffer.from(i.getCode_asU8()||new UInt8Array).toString("utf8"),contracts:u,keys:i.getKeysList().map(function(e){return{index:e.getIndex(),publicKey:an(e.getPublicKey_asU8()),signAlgo:e.getSignAlgo(),hashAlgo:e.getHashAlgo(),weight:e.getWeight(),sequenceNumber:e.getSequenceNumber(),revoked:e.getRevoked()}})},t}var ln=function(e){return Buffer.from(e).toString("hex")};function fn(e,n){var t=$e();t.tag=e.tag;var r=n.getResultsList();return t.events=r.reduce(function(e,n){var t=ln(n.getBlockId_asU8()),r=n.getBlockHeight(),o=n.getBlockTimestamp().toDate().toISOString();return n.getEventsList().forEach(function(n){e.push({blockId:t,blockHeight:r,blockTimestamp:o,type:n.getType(),transactionId:ln(n.getTransactionId_asU8()),transactionIndex:n.getTransactionIndex(),eventIndex:n.getEventIndex(),payload:JSON.parse(Buffer.from(n.getPayload_asU8()).toString("utf8"))})}),e},[]),t}var dn=function(e){return Buffer.from(e).toString("hex")};function mn(e,n){var t=n.getBlock(),r=t.getCollectionGuaranteesList(),o=t.getBlockSealsList(),i=t.getSignaturesList().map(dn),u=$e();return u.tag=e.tag,u.block={id:dn(t.getId_asU8()),parentId:dn(t.getParentId_asU8()),height:t.getHeight(),timestamp:t.getTimestamp().toDate().toISOString(),collectionGuarantees:r.map(function(e){return{collectionId:dn(e.getCollectionId_asU8()),signatures:e.getSignaturesList().map(dn)}}),blockSeals:o.map(function(e){return{blockId:dn(e.getBlockId_asU8()),executionReceiptId:dn(e.getExecutionReceiptId_asU8()),executionReceiptSignatures:e.getExecutionReceiptSignaturesList().map(dn),resultApprovalSignatures:e.getResultApprovalSignaturesList().map(dn)}}),signatures:i},u}var pn=function(e){return Buffer.from(e).toString("hex")};function gn(e,n){var t=n.getBlock(),r=$e();return r.tag=e.tag,r.blockHeader={id:pn(t.getId_asU8()),parentId:pn(t.getParentId_asU8()),height:t.getHeight(),timestamp:t.getTimestamp().toDate().toISOString()},r}var hn=function(e){return Buffer.from(e).toString("hex")},vn=function(e){return Buffer.from(e).toString("hex")},yn=function(e){return Buffer.from(e).toString("hex")},kn=function(e){return Buffer.from(e).toString("hex")},bn=function(e,t){void 0===t&&(t={});try{var i=function(i){return t.node=i,n.invariant(t.node,'SDK Send Error: Either opts.node or "accessNode.api" in config must be defined.'),Promise.resolve(e).then(function(i){switch(e=i,!0){case ce(e):return t.sendTransaction?t.sendTransaction(e,t):function(e,t){void 0===t&&(t={});try{n.invariant(t.node,"SDK Send Transaction Error: opts.node must be defined.");var i=t.unary||Ze;return Promise.resolve(e).then(function(n){e=n;var u=new r.Transaction;u.setScript(Buffer.from(e.message.cadence,"utf8")),u.setGasLimit(e.message.computeLimit),u.setReferenceBlockId(e.message.refBlock?Qe(e.message.refBlock):null),u.setPayer(en(o.sansPrefix(e.accounts[e.payer].addr))),e.message.arguments.forEach(function(n){return u.addArguments(function(e){return Buffer.from(JSON.stringify(e),"utf8")}(e.arguments[n].asArgument))}),e.authorizations.map(function(n){return e.accounts[n].addr}).reduce(function(e,n){return e.find(function(e){return e===n})?e:[].concat(e,[n])},[]).forEach(function(e){return u.addAuthorizers(en(o.sansPrefix(e)))});var a=new r.Transaction.ProposalKey;a.setAddress(en(o.sansPrefix(e.accounts[e.proposer].addr))),a.setKeyId(e.accounts[e.proposer].keyId),a.setSequenceNumber(e.accounts[e.proposer].sequenceNum),u.setProposalKey(a);for(var c=0,s=Object.values(e.accounts);c<s.length;c++){var l=s[c];try{if(!l.role.payer&&null!=l.signature){var f=new r.Transaction.Signature;f.setAddress(en(o.sansPrefix(l.addr))),f.setKeyId(l.keyId),f.setSignature(Qe(l.signature)),u.addPayloadSignatures(f)}}catch(n){throw console.error("Trouble applying payload signature",{acct:l,ix:e}),n}}for(var d=0,m=Object.values(e.accounts);d<m.length;d++){var p=m[d];try{if(p.role.payer&&null!=p.signature){var g=new r.Transaction.Signature;g.setAddress(en(o.sansPrefix(p.addr))),g.setKeyId(p.keyId),g.setSignature(Qe(p.signature)),u.addEnvelopeSignatures(g)}}catch(n){throw console.error("Trouble applying envelope signature",{acct:p,ix:e}),n}}var h=new r.SendTransactionRequest;h.setTransaction(u);var v=Date.now();return Promise.resolve(i(t.node,r.AccessAPI.SendTransaction,h)).then(function(n){var t,r=Date.now(),o=$e();return o.tag=e.tag,o.transactionId=(t=n.getId_asU8(),Buffer.from(t).toString("hex")),"undefined"!=typeof window&&window.dispatchEvent(new CustomEvent("FLOW::TX",{detail:{txId:o.transactionId,delta:r-v}})),o})})}catch(e){return Promise.reject(e)}}(e,t);case se(e):return t.sendGetTransactionStatus?t.sendGetTransactionStatus(e,t):function(e,t){void 0===t&&(t={});try{n.invariant(t.node,"SDK Send Get Transaction Status Error: opts.node must be defined.");var o=t.unary||Ze;return Promise.resolve(e).then(function(n){e=n;var i=new r.GetTransactionRequest;return i.setId(Buffer.from(e.transaction.id,"hex")),Promise.resolve(o(t.node,r.AccessAPI.GetTransactionResult,i)).then(function(n){var t=n.getEventsList(),r=$e(),o=n.getStatus();return r.tag=e.tag,r.transactionStatus={status:o,statusString:tn(o),statusCode:n.getStatusCode(),errorMessage:n.getErrorMessage(),events:t.map(function(e){return{type:e.getType(),transactionId:(n=e.getTransactionId_asU8(),Buffer.from(n).toString("hex")),transactionIndex:e.getTransactionIndex(),eventIndex:e.getEventIndex(),payload:JSON.parse(Buffer.from(e.getPayload_asU8()).toString("utf8"))};var n})},r})})}catch(e){return Promise.reject(e)}}(e,t);case le(e):return t.sendGetTransaction?t.sendGetTransaction(e,t):function(e,t){void 0===t&&(t={});try{n.invariant(t.node,"SDK Send Get Transaction Error: opts.node must be defined.");var o=t.unary||Ze;return Promise.resolve(e).then(function(n){e=n;var i=new r.GetTransactionRequest;return i.setId(Buffer.from(e.transaction.id,"hex")),Promise.resolve(o(t.node,r.AccessAPI.GetTransaction,i)).then(function(n){var t=$e();t.tag=e.tag;var r,o=function(e){return{address:rn(e.getAddress_asU8()),keyId:e.getKeyId(),signature:rn(e.getSignature_asU8())}},i=n.getTransaction();return t.transaction={script:Buffer.from(i.getScript_asU8()).toString("utf8"),args:i.getArgumentsList().map(function(e){return JSON.parse(Buffer.from(e).toString("utf8"))}),referenceBlockId:rn(i.getReferenceBlockId_asU8()),gasLimit:i.getGasLimit(),proposalKey:(r=i.getProposalKey(),{address:rn(r.getAddress_asU8()),keyId:r.getKeyId(),sequenceNumber:r.getSequenceNumber()}),payer:rn(i.getPayer_asU8()),authorizers:i.getAuthorizersList().map(rn),payloadSignatures:i.getPayloadSignaturesList().map(o),envelopeSignatures:i.getEnvelopeSignaturesList().map(o)},t})})}catch(e){return Promise.reject(e)}}(e,t);case ae(e):return t.sendExecuteScript?t.sendExecuteScript(e,t):function(e,t){void 0===t&&(t={});try{return n.invariant(t.node,"SDK Send Execute Script Error: opts.node must be defined."),Promise.resolve(e).then(function(n){return e=n,Promise.resolve(e.block.id?function(e,n){try{var t=n.unary||Ze,o=new r.ExecuteScriptAtBlockIDRequest;o.setBlockId(Buffer.from(e.block.id,"hex"));var i=Buffer.from(e.message.cadence,"utf8");return e.message.arguments.forEach(function(n){return o.addArguments(on(e.arguments[n].asArgument))}),o.setScript(i),Promise.resolve(t(n.node,r.AccessAPI.ExecuteScriptAtBlockID,o)).then(function(n){return un(e,n)})}catch(e){return Promise.reject(e)}}(e,t):e.block.height?function(e,n){try{var t=n.unary||Ze,o=new r.ExecuteScriptAtBlockHeightRequest;o.setBlockHeight(Number(e.block.height));var i=Buffer.from(e.message.cadence,"utf8");return e.message.arguments.forEach(function(n){return o.addArguments(on(e.arguments[n].asArgument))}),o.setScript(i),Promise.resolve(t(n.node,r.AccessAPI.ExecuteScriptAtBlockHeight,o)).then(function(n){return un(e,n)})}catch(e){return Promise.reject(e)}}(e,t):function(e,n){try{var t=n.unary||Ze,o=new r.ExecuteScriptAtLatestBlockRequest,i=Buffer.from(e.message.cadence,"utf8");return e.message.arguments.forEach(function(n){return o.addArguments(on(e.arguments[n].asArgument))}),o.setScript(i),Promise.resolve(t(n.node,r.AccessAPI.ExecuteScriptAtLatestBlock,o)).then(function(n){return un(e,n)})}catch(e){return Promise.reject(e)}}(e,t))})}catch(e){return Promise.reject(e)}}(e,t);case fe(e):return t.sendGetAccount?t.sendGetAccount(e,t):function(e,t){void 0===t&&(t={});try{return n.invariant(t.node,"SDK Send Get Account Error: opts.node must be defined."),Promise.resolve(e).then(function(n){return e=n,Promise.resolve(null!==e.block.height?function(e,n){try{var t=n.unary||Ze,i=new r.GetAccountAtBlockHeightRequest;return i.setBlockHeight(Number(e.block.height)),i.setAddress(cn(o.sansPrefix(e.account.addr))),Promise.resolve(t(n.node,r.AccessAPI.GetAccountAtBlockHeight,i)).then(function(n){return sn(e,n)})}catch(e){return Promise.reject(e)}}(e,t):function(e,n){try{var t=n.unary||Ze,i=new r.GetAccountAtLatestBlockRequest;return i.setAddress(cn(o.sansPrefix(e.account.addr))),Promise.resolve(t(n.node,r.AccessAPI.GetAccountAtLatestBlock,i)).then(function(n){return sn(e,n)})}catch(e){return Promise.reject(e)}}(e,t))})}catch(e){return Promise.reject(e)}}(e,t);case de(e):return t.sendGetEvents?t.sendGetEvents(e,t):function(e,t){void 0===t&&(t={});try{return n.invariant(t.node,"SDK Send Get Events Error: opts.node must be defined."),Promise.resolve(e).then(function(o){var i=null!==(e=o).events.start,u=Array.isArray(e.events.blockIds)&&e.events.blockIds.length>0;return n.invariant(i||u,"SendGetEventsError: Unable to determine which get events request to send. Either a block height range, or block IDs must be specified."),Promise.resolve(i?function(e,n){try{var t=n.unary||Ze,o=new r.GetEventsForHeightRangeRequest;return o.setType(e.events.eventType),o.setStartHeight(Number(e.events.start)),o.setEndHeight(Number(e.events.end)),Promise.resolve(t(n.node,r.AccessAPI.GetEventsForHeightRange,o)).then(function(n){return fn(e,n)})}catch(e){return Promise.reject(e)}}(e,t):function(e,n){try{var t=n.unary||Ze,o=new r.GetEventsForBlockIDsRequest;return o.setType(e.events.eventType),e.events.blockIds.forEach(function(e){return o.addBlockIds(Buffer.from(e,"hex"))}),Promise.resolve(t(n.node,r.AccessAPI.GetEventsForBlockIDs,o)).then(function(n){return fn(e,n)})}catch(e){return Promise.reject(e)}}(e,t))})}catch(e){return Promise.reject(e)}}(e,t);case me(e):return t.sendGetLatestBlock?t.sendGetLatestBlock(e,t):function(e,t){void 0===t&&(t={});try{return n.invariant(t.node,"SDK Send Get Latest Block Error: opts.node must be defined."),Promise.resolve(e).then(function(n){e=n;var o=new r.GetLatestBlockRequest;return e.latestBlock&&e.latestBlock.isSealed&&(o.setIsSealed(e.latestBlock.isSealed),console.error("\n          %c@onflow/send Deprecation Notice\n          ========================\n\n          Operating upon data of the latestBlock field of the interaction object is deprecated and will no longer be recognized in future releases of @onflow/send.\n          Find out more here: https://github.com/onflow/flow-js-sdk/blob/master/packages/send/WARNINGS.md#0001-Deprecating-latestBlock-field\n\n          =======================\n        ".replace(/\n\s+/g,"\n").trim(),"font-weight:bold;font-family:monospace;")),e.block&&e.block.isSealed&&o.setIsSealed(e.block.isSealed),Promise.resolve(Ze(t.node,r.AccessAPI.GetLatestBlock,o)).then(function(n){var t=n.getBlock(),r=t.getCollectionGuaranteesList(),o=t.getBlockSealsList(),i=t.getSignaturesList(),u=$e();return u.tag=e.tag,u.block={id:hn(t.getId_asU8()),parentId:hn(t.getParentId_asU8()),height:t.getHeight(),timestamp:t.getTimestamp(),collectionGuarantees:r.map(function(e){return{collectionId:hn(e.getCollectionId_asU8()),signatures:e.getSignaturesList()}}),blockSeals:o.map(function(e){return{blockId:hn(e.getBlockId_asU8()),executionReceiptId:hn(e.getExecutionReceiptId_asU8()),executionReceiptSignatures:e.getExecutionReceiptSignaturesList(),resultApprovalSignatures:e.getResultApprovalSignaturesList()}}),signatures:i},u})})}catch(e){return Promise.reject(e)}}(e,t);case ve(e):return t.sendGetBlock?t.sendGetBlock(e,t):function(e,t){void 0===t&&(t={});try{return n.invariant(t.node,"SDK Send Get Block Error: opts.node must be defined."),Promise.resolve(e).then(function(n){var o=null!==(e=n).block.height;return Promise.resolve(null!==e.block.id?function(e,n){try{var t=n.unary||Ze,o=new r.GetBlockByIDRequest;return o.setId(Buffer.from(e.block.id,"hex")),Promise.resolve(t(n.node,r.AccessAPI.GetBlockByID,o)).then(function(n){return mn(e,n)})}catch(e){return Promise.reject(e)}}(e,t):o?function(e,n){try{var t=n.unary||Ze,o=new r.GetBlockByHeightRequest;return o.setHeight(Number(e.block.height)),Promise.resolve(t(n.node,r.AccessAPI.GetBlockByHeight,o)).then(function(n){return mn(e,n)})}catch(e){return Promise.reject(e)}}(e,t):function(e,n){try{var t,o=n.unary||Ze,i=new r.GetLatestBlockRequest;return null!=(t=e.block)&&t.isSealed&&i.setIsSealed(e.block.isSealed),Promise.resolve(o(n.node,r.AccessAPI.GetLatestBlock,i)).then(function(n){return mn(e,n)})}catch(e){return Promise.reject(e)}}(e,t))})}catch(e){return Promise.reject(e)}}(e,t);case ye(e):return t.sendGetBlockHeader?t.sendGetBlockHeader(e,t):function(e,t){void 0===t&&(t={});try{return n.invariant(t.node,"SDK Send Get Block Header Error: opts.node must be defined."),Promise.resolve(e).then(function(n){var o=null!==(e=n).block.height;return Promise.resolve(null!==e.block.id?function(e,n){try{var t=n.unary||Ze,o=new r.GetBlockHeaderByIDRequest;return o.setId(Buffer.from(e.block.id,"hex")),Promise.resolve(t(n.node,r.AccessAPI.GetBlockHeaderByID,o)).then(function(n){return gn(e,n)})}catch(e){return Promise.reject(e)}}(e,t):o?function(e,n){try{var t=n.unary||Ze,o=new r.GetBlockHeaderByHeightRequest;return o.setHeight(Number(e.block.height)),Promise.resolve(t(n.node,r.AccessAPI.GetBlockHeaderByHeight,o)).then(function(n){return gn(e,n)})}catch(e){return Promise.reject(e)}}(e,t):function(e,n){try{var t,o=n.unary||Ze,i=new r.GetLatestBlockHeaderRequest;return null!=(t=e.block)&&t.isSealed&&i.setIsSealed(e.block.isSealed),Promise.resolve(o(n.node,r.AccessAPI.GetLatestBlockHeader,i)).then(function(n){return gn(e,n)})}catch(e){return Promise.reject(e)}}(e,t))})}catch(e){return Promise.reject(e)}}(e,t);case pe(e):return t.sendGetBlockById?t.sendGetBlockById(e,t):function(e,t){void 0===t&&(t={});try{return n.invariant(t.node,"SDK Send Get Block By ID Error: opts.node must be defined."),Promise.resolve(e).then(function(n){e=n;var o=new r.GetBlockByIDRequest;return o.setId(Buffer.from(e.block.id,"hex")),Promise.resolve(Ze(t.node,r.AccessAPI.GetBlockByID,o)).then(function(n){var t=n.getBlock(),r=t.getCollectionGuaranteesList(),o=t.getBlockSealsList(),i=t.getSignaturesList(),u=$e();return u.tag=e.tag,u.block={id:vn(t.getId_asU8()),parentId:vn(t.getParentId_asU8()),height:t.getHeight(),timestamp:t.getTimestamp(),collectionGuarantees:r.map(function(e){return{collectionId:vn(e.getCollectionId_asU8()),signatures:e.getSignaturesList()}}),blockSeals:o.map(function(e){return{blockId:vn(e.getBlockId_asU8()),executionReceiptId:vn(e.getExecutionReceiptId_asU8()),executionReceiptSignatures:e.getExecutionReceiptSignaturesList(),resultApprovalSignatures:e.getResultApprovalSignaturesList()}}),signatures:i},u})})}catch(e){return Promise.reject(e)}}(e,t);case ge(e):return t.sendGetBlockByHeight?t.sendGetBlockByHeight(e,t):function(e,t){void 0===t&&(t={});try{return n.invariant(t.node,"SDK Send Get Block By Height Error: opts.node must be defined."),Promise.resolve(e).then(function(n){e=n;var o=new r.GetBlockByHeightRequest;return o.setHeight(Number(e.block.height)),Promise.resolve(Ze(t.node,r.AccessAPI.GetBlockByHeight,o)).then(function(n){var t=n.getBlock(),r=t.getCollectionGuaranteesList(),o=t.getBlockSealsList(),i=t.getSignaturesList(),u=$e();return u.tag=e.tag,u.block={id:yn(t.getId_asU8()),parentId:yn(t.getParentId_asU8()),height:t.getHeight(),timestamp:t.getTimestamp(),collectionGuarantees:r.map(function(e){return{collectionId:yn(e.getCollectionId_asU8()),signatures:e.getSignaturesList()}}),blockSeals:o.map(function(e){return{blockId:yn(e.getBlockId_asU8()),executionReceiptId:yn(e.getExecutionReceiptId_asU8()),executionReceiptSignatures:e.getExecutionReceiptSignaturesList(),resultApprovalSignatures:e.getResultApprovalSignaturesList()}}),signatures:i},u})})}catch(e){return Promise.reject(e)}}(e,t);case ke(e):return t.sendGetCollection?t.sendGetCollection(e,t):function(e,t){void 0===t&&(t={});try{n.invariant(t.node,"SDK Send Get Collection Error: opts.node must be defined.");var o=t.unary||Ze;return Promise.resolve(e).then(function(n){e=n;var i=new r.GetCollectionByIDRequest;return i.setId(Buffer.from(e.collection.id,"hex")),Promise.resolve(o(t.node,r.AccessAPI.GetCollectionByID,i)).then(function(n){var t=n.getCollection(),r=$e();return r.tag=e.tag,r.collection={id:kn(t.getId_asU8()),transactionIds:t.getTransactionIdsList().map(kn)},r})})}catch(e){return Promise.reject(e)}}(e,t);case he(e):return t.sendPing?t.sendPing(e,t):function(e,t){void 0===t&&(t={});try{n.invariant(t.node,"SDK Send Ping Error: opts.node must be defined.");var o=t.unary||Ze;return Promise.resolve(e).then(function(n){e=n;var i=new r.PingRequest;return Promise.resolve(o(t.node,r.AccessAPI.Ping,i)).then(function(n){var t=$e();return t.tag=e.tag,t})})}catch(e){return Promise.reject(e)}}(e,t);default:return e}})},u=t.node;return Promise.resolve(u?i(u):Promise.resolve(Ve().get("accessNode.api")).then(i))}catch(e){return Promise.reject(e)}};function In(e){return void 0===e&&(e=null),Pe([te,function(n){return n.block.isSealed=e,H(n)}])}function Pn(e){return Pe([X,function(n){return n.account.addr=o.sansPrefix(e),H(n)}])}var Sn=function(e,n,t){try{try{return Promise.resolve(Number(e))}catch(e){throw new Error("Decode Number Error : "+t.join("."))}}catch(e){return Promise.reject(e)}},Bn=function(e){return Promise.resolve(e)},wn=function(e,n,t){try{return Promise.resolve(e.fields.reduce(function(e,r){return Promise.resolve(e).then(function(o){return e=o,Promise.resolve(En(r.value,n,[].concat(t,[r.name]))).then(function(n){return e[r.name]=n,e})})},Promise.resolve({}))).then(function(t){var r=e.id&&xn(n,e.id);return r?Promise.resolve(r(t)):t})}catch(e){return Promise.reject(e)}},An={UInt:Sn,Int:Sn,UInt8:Sn,Int8:Sn,UInt16:Sn,Int16:Sn,UInt32:Sn,Int32:Sn,UInt64:Sn,Int64:Sn,UInt128:Sn,Int128:Sn,UInt256:Sn,Int256:Sn,Word8:Sn,Word16:Sn,Word32:Sn,Word64:Sn,UFix64:Bn,Fix64:Bn,String:Bn,Character:Bn,Bool:Bn,Address:Bn,Void:function(){return Promise.resolve(null)},Optional:function(e,n,t){return Promise.resolve(e?En(e,n,t):null)},Reference:function(e){try{return Promise.resolve({address:e.address,type:e.type})}catch(e){return Promise.reject(e)}},Array:function(e,n,t){try{return Promise.resolve(Promise.all(e.map(function(e){return new Promise(function(r){try{return Promise.resolve(En(e,n,[].concat(t,[e.type]))).then(r)}catch(e){return Promise.reject(e)}})})))}catch(e){return Promise.reject(e)}},Dictionary:function(e,n,t){try{return Promise.resolve(e.reduce(function(e,r){return Promise.resolve(e).then(function(o){return e=o,Promise.resolve(En(r.key,n,[].concat(t,[r.key]))).then(function(o){return Promise.resolve(En(r.value,n,[].concat(t,[r.key]))).then(function(n){return e[o]=n,e})})})},Promise.resolve({})))}catch(e){return Promise.reject(e)}},Event:wn,Resource:wn,Struct:wn,Enum:wn,Type:function(e){try{return Promise.resolve(e.staticType)}catch(e){return Promise.reject(e)}},Path:function(e){try{return Promise.resolve({domain:e.domain,identifier:e.identifier})}catch(e){return Promise.reject(e)}},Capability:function(e){try{return Promise.resolve({path:e.path,address:e.address,borrowType:e.borrowType})}catch(e){return Promise.reject(e)}}},xn=function(e,n){var t=Object.keys(e).find(function(e){return/^\/.*\/$/.test(e)?new RegExp(e.substring(1,e.length-1)).test(n):e===n});return n&&t&&e[t]},En=function(e,n,t){try{var r=xn(n,e.type);if(!r)throw new Error("Undefined Decoder Error: "+e.type+"@"+t.join("."));return Promise.resolve(r(e.value,n,t))}catch(e){return Promise.reject(e)}},Tn=function(e,n,t){void 0===n&&(n={}),void 0===t&&(t=[]);var r=l({},An,n);return Promise.resolve(En(e,r,t))},jn=function(e,n){void 0===n&&(n={});try{var t,r=l({},An,n),o=e.encodedData?Promise.resolve(Tn(e.encodedData,r)).then(function(e){return t=1,e}):e.transactionStatus?Promise.resolve(Promise.all(e.transactionStatus.events.map(function(e){try{var n=e.eventIndex,t=e.transactionIndex,o=e.transactionId,i=e.type;return Promise.resolve(Tn(e.payload,r)).then(function(e){return{type:i,transactionId:o,transactionIndex:t,eventIndex:n,data:e}})}catch(e){return Promise.reject(e)}}))).then(function(n){var r=l({},e.transactionStatus,{events:n});return t=1,r}):e.transaction?(t=1,e.transaction):e.events?Promise.resolve(Promise.all(e.events.map(function(e){try{var n=e.eventIndex,t=e.transactionIndex,o=e.transactionId,i=e.type,u=e.blockTimestamp,a=e.blockHeight,c=e.blockId;return Promise.resolve(Tn(e.payload,r)).then(function(e){return{blockId:c,blockHeight:a,blockTimestamp:u,type:i,transactionId:o,transactionIndex:t,eventIndex:n,data:e}})}catch(e){return Promise.reject(e)}}))).then(function(e){return t=1,e}):e.account?(t=1,e.account):e.block?(t=1,e.block):e.blockHeader?(t=1,e.blockHeader):e.latestBlock?(console.error("\n          %c@onflow/decode Deprecation Notice\n          ========================\n\n          Operating upon data of the latestBlock field of the response object is deprecated and will no longer be recognized in future releases of @onflow/decode.\n          Find out more here: https://github.com/onflow/flow-js-sdk/blob/master/packages/decode/WARNINGS.md#0001-Deprecating-latestBlock-field\n\n          =======================\n        ".replace(/\n\s+/g,"\n").trim(),"font-weight:bold;font-family:monospace;"),t=1,e.latestBlock):e.transactionId?(t=1,e.transactionId):e.collection?(t=1,e.collection):void 0;return Promise.resolve(o&&o.then?o.then(function(e){return t?e:null}):t?o:null)}catch(e){return Promise.reject(e)}},Nn=function(e){try{var t=function(){if(ce(e)||ae(e)){var t=function(){return n.invariant(Ln(r),"Cadence needs to be a string at this point."),Promise.resolve(Ve().where(/^0x/).then(function(e){return Object.entries(e).reduce(function(e,n){var t=n[1],r=new RegExp("(\\b"+n[0]+"\\b)","g");return e.replace(r,t)},r)})).then(function(n){e.message.cadence=n})},r=Be(e,"ix.cadence");n.invariant(Gn(r)||Ln(r),"Cadence needs to be a function or a string.");var o=function(){if(Gn(r))return Promise.resolve(r({})).then(function(e){r=e})}();return o&&o.then?o.then(t):t()}}();return Promise.resolve(t&&t.then?t.then(function(){return e}):e)}catch(e){return Promise.reject(e)}},Gn=function(e){return"function"==typeof e},Ln=function(e){return"string"==typeof e};const On="undefined"!=typeof Symbol?Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")):"@@iterator";function Rn(e,n,t){if(!e.s){if(t instanceof Dn){if(!t.s)return void(t.o=Rn.bind(null,e,n));1&n&&(n=t.s),t=t.v}if(t&&t.then)return void t.then(Rn.bind(null,e,n),Rn.bind(null,e,2));e.s=n,e.v=t;var r=e.o;r&&r(e)}}var Dn=function(){function e(){}return e.prototype.then=function(n,t){var r=new e,o=this.s;if(o){var i=1&o?n:t;if(i){try{Rn(r,1,i(this.v))}catch(e){Rn(r,2,e)}return r}return this}return this.o=function(e){try{var o=e.v;1&e.s?Rn(r,1,n?n(o):o):t?Rn(r,1,t(o)):Rn(r,2,o)}catch(e){Rn(r,2,e)}},r},e}();function _n(e){return e instanceof Dn&&1&e.s}var Un,Cn=function(e){try{var t=function(){if(ce(e)||ae(e)){var t=function(e,n,t){if("function"==typeof e[On]){var r,o,i,u=e[On]();if(function e(t){try{for(;!(r=u.next()).done;)if((t=n(r.value))&&t.then){if(!_n(t))return void t.then(e,i||(i=Rn.bind(null,o=new Dn,2)));t=t.v}o?Rn(o,1,t):o=t}catch(e){Rn(o||(o=new Dn),2,e)}}(),u.return){var a=function(e){try{r.done||u.return()}catch(e){}return e};if(o&&o.then)return o.then(a,function(e){throw a(e)});a()}return o}if(!("length"in e))throw new TypeError("Object is not iterable");for(var c=[],s=0;s<e.length;s++)c.push(e[s]);return function(e,n,t){var r,o,i=-1;return function t(u){try{for(;++i<e.length;)if((u=n(i))&&u.then){if(!_n(u))return void u.then(t,o||(o=Rn.bind(null,r=new Dn,2)));u=u.v}r?Rn(r,1,u):r=u}catch(e){Rn(r||(r=new Dn),2,e)}}(),r}(c,function(e){return n(c[e])})}(Object.entries(e.arguments),function(t){var r=t[0];return Promise.resolve(Kn(t[1])).then(function(t){var o;e.arguments[r].asArgument=(n.invariant(null!=typeof(o=t).xform,"No type specified for argument: "+o.value),Hn(o.xform)?o.xform(o.value):Hn(o.xform.asArgument)?o.xform.asArgument(o.value):void n.invariant(!1,"Invalid Argument",o))})});if(t&&t.then)return t.then(function(){})}}();return Promise.resolve(t&&t.then?t.then(function(){return e}):e)}catch(e){return Promise.reject(e)}},Kn=function e(t,r){void 0===r&&(r=3);try{return n.invariant(r>0,"Argument Resolve Recursion Limit Exceeded for Arg: "+t.tempId),Hn(t.resolveArgument)?Promise.resolve(t.resolveArgument()).then(function(n){return e(n,r-1)}):Promise.resolve(t)}catch(e){return Promise.reject(e)}},Hn=function(e){return"function"==typeof e},qn=function(e){return Jn(Zn(Qn(e)))},Fn=function(e){return Jn(Zn(et(e)))},zn=function(e,n){return Buffer.from(e.padStart(2*n,0),"hex")},Mn=(Un=Buffer.from("FLOW-V0.0-transaction").toString("hex"),Buffer.from(Un.padEnd(64,0),"hex")).toString("hex"),Jn=function(e){return Mn+e},Wn=function(e){return zn(e,8)},Vn=function(e){return zn(e,32)},Yn=function(e){return Buffer.from(JSON.stringify(e),"utf8")},Xn=function(e){return Buffer.from(e,"utf8")},$n=function(e){return Buffer.from(e,"hex")},Zn=function(e){return c.encode(e).toString("hex")},Qn=function(e){return rt(e),[Xn(e.cadence),e.arguments.map(Yn),Vn(e.refBlock),e.computeLimit,Wn(e.proposalKey.address),e.proposalKey.keyId,e.proposalKey.sequenceNum,Wn(e.payer),e.authorizers.map(Wn)]},et=function(e){return ot(e),[Qn(e),nt(e)]},nt=function(e){var n=tt(e);return e.payloadSigs.map(function(e){return{signerIndex:n.get(e.address),keyId:e.keyId,sig:e.sig}}).sort(function(e,n){return e.signerIndex>n.signerIndex?1:e.signerIndex<n.signerIndex?-1:e.keyId>n.keyId?1:e.keyId<n.keyId?-1:void 0}).map(function(e){return[e.signerIndex,e.keyId,$n(e.sig)]})},tt=function(e){var n=new Map,t=0,r=function(e){n.has(e)||(n.set(e,t),t++)};return r(e.proposalKey.address),r(e.payer),e.authorizers.forEach(r),n},rt=function(e){st.forEach(function(n){return gt(e,n)}),lt.forEach(function(n){return gt(e.proposalKey,n,"proposalKey")})},ot=function(e){ft.forEach(function(n){return gt(e,n)}),e.payloadSigs.forEach(function(e,n){dt.forEach(function(t){return gt(e,t,"payloadSigs",n)})})},it=function(e){return"number"==typeof e},ut=function(e){return"string"==typeof e},at=function(e){return null!==e&&"object"==typeof e},ct=function(e){return at(e)&&e instanceof Array},st=[{name:"cadence",check:ut},{name:"arguments",check:ct},{name:"refBlock",check:ut,defaultVal:"0"},{name:"computeLimit",check:it},{name:"proposalKey",check:at},{name:"payer",check:ut},{name:"authorizers",check:ct}],lt=[{name:"address",check:ut},{name:"keyId",check:it},{name:"sequenceNum",check:it}],ft=[{name:"payloadSigs",check:ct}],dt=[{name:"address",check:ut},{name:"keyId",check:it},{name:"sig",check:ut}],mt=[{name:"envelopeSigs",check:ct}],pt=[{name:"address",check:ut},{name:"keyId",check:it},{name:"sig",check:ut}],gt=function(e,n,t,r){var o=n.name,i=n.check,u=n.defaultVal;if(null==e[o]&&null!=u&&(e[o]=u),null==e[o])throw vt(o,t,r);if(!i(e[o]))throw yt(o,t,r)},ht=function(e,n,t){return n?null==t?n+"."+e:n+"."+t+"."+e:e},vt=function(e,n,t){return new Error("Missing field "+ht(e,n,t))},yt=function(e,n,t){return new Error("Invalid field "+ht(e,n,t))};function kt(e){var n=new Set(e.authorizations);return n.add(e.proposer),n.delete(e.payer),Array.from(n)}function bt(e){var n=new Set([e.payer]);return Array.from(n)}var It=function(e){return{cadence:e.message.cadence,refBlock:e.message.refBlock||null,computeLimit:e.message.computeLimit,arguments:e.message.arguments.map(function(n){return e.arguments[n].asArgument}),proposalKey:{address:o.withPrefix(e.accounts[e.proposer].addr),keyId:e.accounts[e.proposer].keyId,sequenceNum:e.accounts[e.proposer].sequenceNum},payer:o.withPrefix(e.accounts[e.payer].addr),authorizers:(n=e.authorizations.map(function(n){return o.withPrefix(e.accounts[n].addr)}).reduce(function(e,n){return e.find(function(e){return e===n})?e:[].concat(e,[n])},[]),n[0]?n:[]),payloadSigs:kt(e).map(function(n){return{address:o.withPrefix(e.accounts[n].addr),keyId:e.accounts[n].keyId,sig:e.accounts[n].signature}}),envelopeSigs:bt(e).map(function(n){return{address:o.withPrefix(e.accounts[n].addr),keyId:e.accounts[n].keyId,sig:e.accounts[n].signature}})};var n},Pt="undefined"!=typeof Symbol?Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")):"@@iterator";function St(e,n,t){if(!e.s){if(t instanceof Bt){if(!t.s)return void(t.o=St.bind(null,e,n));1&n&&(n=t.s),t=t.v}if(t&&t.then)return void t.then(St.bind(null,e,n),St.bind(null,e,2));e.s=n,e.v=t;var r=e.o;r&&r(e)}}var Bt=function(){function e(){}return e.prototype.then=function(n,t){var r=new e,o=this.s;if(o){var i=1&o?n:t;if(i){try{St(r,1,i(this.v))}catch(e){St(r,2,e)}return r}return this}return this.o=function(e){try{var o=e.v;1&e.s?St(r,1,n?n(o):o):t?St(r,1,t(o)):St(r,2,o)}catch(e){St(r,2,e)}},r},e}();function wt(e){return e instanceof Bt&&1&e.s}var At=function(e){try{var n=function(){if(ce(e))return function(n,t){try{var r=Promise.resolve(xt(e,Object.values(e.accounts))).then(function(){return Promise.resolve(xt(e,Object.values(e.accounts))).then(function(){})})}catch(e){return t(e)}return r&&r.then?r.then(void 0,t):r}(0,function(e){throw console.error("=== SAD PANDA ===\n\n",e,"\n\n=== SAD PANDA ==="),e})}();return Promise.resolve(n&&n.then?n.then(function(n){return e}):e)}catch(e){return Promise.reject(e)}},xt=function e(t,r,o,i){void 0===i&&(i=3);try{var u=function(){o&&(t.authorizations=t.authorizations.map(function(e){return e===o.tempId?a:e}).reduce(function(e,n){return Array.isArray(n)?[].concat(e,n):[].concat(e,[n])},[]))};n.invariant(i,"Account Resolve Recursion Limit Exceeded",{ix:t,accounts:r});var a=[],c=function(e,n,t){if("function"==typeof e[Pt]){var r,o,i,u=e[Pt]();if(function e(t){try{for(;!(r=u.next()).done;)if((t=n(r.value))&&t.then){if(!wt(t))return void t.then(e,i||(i=St.bind(null,o=new Bt,2)));t=t.v}o?St(o,1,t):o=t}catch(e){St(o||(o=new Bt),2,e)}}(),u.return){var a=function(e){try{r.done||u.return()}catch(e){}return e};if(o&&o.then)return o.then(a,function(e){throw a(e)});a()}return o}if(!("length"in e))throw new TypeError("Object is not iterable");for(var c=[],s=0;s<e.length;s++)c.push(e[s]);return function(e,n,t){var r,o,i=-1;return function t(u){try{for(;++i<e.length;)if((u=n(i))&&u.then){if(!wt(u))return void u.then(t,o||(o=St.bind(null,r=new Bt,2)));u=u.v}r?St(r,1,u):r=u}catch(e){St(r||(r=new Bt),2,e)}}(),r}(c,function(e){return n(c[e])})}(r,function(n){function r(){function r(){u.tempId!=n.tempId&&delete t.accounts[u.tempId]}var c=function(){if(Array.isArray(n))return Promise.resolve(e(t,n,u,i-1)).then(function(){});null!=n.addr&&null!=n.keyId&&(n.tempId=n.addr+"-"+n.keyId),t.accounts[n.tempId]=t.accounts[n.tempId]||n,t.accounts[n.tempId].role.proposer=t.accounts[n.tempId].role.proposer||n.role.proposer,t.accounts[n.tempId].role.payer=t.accounts[n.tempId].role.payer||n.role.payer,t.accounts[n.tempId].role.authorizer=t.accounts[n.tempId].role.authorizer||n.role.authorizer,t.accounts[n.tempId].role.proposer&&t.proposer===u.tempId&&(t.proposer=n.tempId),t.accounts[n.tempId].role.payer&&t.payer===u.tempId&&(t.payer=n.tempId),t.accounts[n.tempId].role.authorizer&&(o?a=Array.from(new Set([].concat(a,[n.tempId]))):t.authorizations=t.authorizations.map(function(e){return e===u.tempId?n.tempId:e}))}();return c&&c.then?c.then(r):r()}var u=o||n,c=function(){if(Et(n.resolve))return Promise.resolve(n.resolve(n,function(e,n){try{return{f_type:"PreSignable",f_vsn:"1.0.1",roles:e.role,cadence:n.message.cadence,args:n.message.arguments.map(function(e){return n.arguments[e].asArgument}),data:{},interaction:n,voucher:It(n)}}catch(e){throw console.error("buildPreSignable",e),e}}(n,t))).then(function(e){n=e})}();return c&&c.then?c.then(r):r()});return Promise.resolve(c&&c.then?c.then(u):u())}catch(e){return Promise.reject(e)}},Et=function(e){return"function"==typeof e},Tt=function(e){try{var n=function(){if(ce(e))return function(n,t){try{var r=(o=kt(e),i=qn(Nt(e)),Promise.resolve(Promise.all(o.map(jt(e,i)))).then(function(){var n=bt(e),t=Fn(l({},Nt(e),{payloadSigs:o.map(function(n){return{address:e.accounts[n].addr,keyId:e.accounts[n].keyId,sig:e.accounts[n].signature}})}));return Promise.resolve(Promise.all(n.map(jt(e,t)))).then(function(){})}))}catch(e){return t(e)}var o,i;return r&&r.then?r.then(void 0,t):r}(0,function(n){throw console.error("Signatures",n,{ix:e}),n})}();return Promise.resolve(n&&n.then?n.then(function(n){return e}):e)}catch(e){return Promise.reject(e)}};function jt(e,n){return function(t){try{var r=e.accounts[t];return null!=r.signature?Promise.resolve():Promise.resolve(r.signingFunction(function(e,n,t){try{return{f_type:"Signable",f_vsn:"1.0.1",message:n,addr:o.sansPrefix(e.addr),keyId:e.keyId,roles:e.role,cadence:t.message.cadence,args:t.message.arguments.map(function(e){return t.arguments[e].asArgument}),data:{},interaction:t,voucher:It(t)}}catch(e){throw console.error("buildSignable",e),e}}(r,n,e))).then(function(n){e.accounts[t].signature=n.signature})}catch(e){return Promise.reject(e)}}}function Nt(e){return{cadence:e.message.cadence,refBlock:e.message.refBlock||null,computeLimit:e.message.computeLimit,arguments:e.message.arguments.map(function(n){return e.arguments[n].asArgument}),proposalKey:{address:o.sansPrefix(e.accounts[e.proposer].addr),keyId:e.accounts[e.proposer].keyId,sequenceNum:e.accounts[e.proposer].sequenceNum},payer:o.sansPrefix(e.accounts[e.payer].addr),authorizers:e.authorizations.map(function(n){return o.sansPrefix(e.accounts[n].addr)}).reduce(function(e,n){return e.find(function(e){return e===n})?e:[].concat(e,[n])},[])}}var Gt=function(e){try{var n=Be(e,"ix.validators",[]);return Promise.resolve(Pe(e,n.map(function(e){return function(n){return e(n,{Ok:H,Bad:q})}})))}catch(e){return Promise.reject(e)}},Lt=function(e){try{for(var n=0,t=Object.keys(e.accounts);n<t.length;n++){var r=t[n];e.accounts[r].addr=o.sansPrefix(e.accounts[r].addr)}return Promise.resolve(e)}catch(e){return Promise.reject(e)}},Ot=function(e){return e},Rt=function(e,n){return void 0===n&&(n=Ot),function(t){try{var r=function(e){return["\nAccounts:",{proposer:e.proposer,authorizations:e.authorizations,payer:e.payer},"\n\nDetails:",e.accounts].filter(Boolean)},o=function(){var n;(n=console).log.apply(n,["debug["+e+"] ---\n"].concat([].slice.call(arguments),["\n\n\n---"]))};return Promise.resolve(Ve.get("debug."+e)).then(function(e){var i=function(){if(e)return Promise.resolve(n(t,o,r)).then(function(){})}();return i&&i.then?i.then(function(){return t}):t})}catch(e){return Promise.reject(e)}}},Dt=Pe([Nn,Rt("cadence",function(e,n){return n(e.message.cadence)}),Cn,Rt("arguments",function(e,n){return n(e.message.arguments,e.message)}),At,Rt("accounts",function(e,n,t){return n.apply(void 0,t(e))}),function(e){try{var n=function(){if(ce(e)&&null==e.message.refBlock)return Promise.resolve(Ve.first(["sdk.transport","sdk.send"],bn)).then(function(n){return Promise.resolve(n(xe([In()])).then(jn)).then(function(n){e.message.refBlock=n.id})})}();return Promise.resolve(n&&n.then?n.then(function(){return e}):e)}catch(e){return Promise.reject(e)}},function(e){try{var t=function(){if(ce(e))return Promise.resolve(Ve.first(["sdk.transport","sdk.send"],bn)).then(function(t){var r=Object.values(e.accounts).find(function(e){return e.role.proposer});n.invariant(r,"Transactions require a proposer");var o=function(){if(null==r.sequenceNum)return Promise.resolve(xe([Pn(r.addr)])).then(function(n){return Promise.resolve(t(n).then(jn).then(function(e){return e.keys}).then(function(e){return e.find(function(e){return e.index===r.keyId})}).then(function(e){return e.sequenceNumber})).then(function(n){e.accounts[r.tempId].sequenceNum=n})})}();if(o&&o.then)return o.then(function(){})})}();return Promise.resolve(t&&t.then?t.then(function(){return e}):e)}catch(e){return Promise.reject(e)}},Tt,Rt("signatures",function(e,n,t){return n.apply(void 0,t(e))}),Lt,Gt,function(e){try{var n=Be(e,"ix.pre-send-check"),t=function(){if(K(n))return Promise.resolve(n(It(e))).then(function(){})}();return Promise.resolve(t&&t.then?t.then(function(){return e}):e)}catch(e){return Promise.reject(e)}},Rt("resolved",function(e,n){return n(e)})]),_t=function(e,n){void 0===e&&(e=[]),void 0===n&&(n={});try{return Promise.resolve(Ve.first(["sdk.transport","sdk.send"],n.send||bn)).then(function(t){return Promise.resolve(Ve.first(["sdk.resolve"],n.resolve||Dt)).then(function(r){return Array.isArray(e)&&(e=Pe(O(),e)),Promise.resolve(r(e)).then(function(e){return t(e,n)})})})}catch(e){return Promise.reject(e)}},Ut=function(e){var n,t;function r(n){var t,r=("\n        Encode Message From Signable Error: Unable to determine message encoding for signer addresss: "+n+". \n        Please ensure the address: "+n+" is intended to sign the given transaction as specified by the transaction signable.\n      ").trim();return(t=e.call(this,r)||this).name="Unable To Determine Message Encoding For Signer Addresss",t}return t=e,(n=r).prototype=Object.create(t.prototype),n.prototype.constructor=n,d(n,t),r}(g(Error));function Ct(e){return Ae("ix.validators",function(n){return Array.isArray(n)?n.push(e):[e]})}function Kt(e){return Pe([function(n){return n.block.height=e,n},Ct(function(e){if("boolean"==typeof e.block.isSealed)throw new Error("Unable to specify both block height and isSealed.");if(e.block.id)throw new Error("Unable to specify both block height and block id.");return e})])}function Ht(e){return Pe([function(n){return n.block.id=e,H(n)},Ct(function(e,n){var t=n.Ok,r=n.Bad;return fe(e)?r(e,"Unable to specify a block id with a Get Account interaction."):"boolean"==typeof e.block.isSealed?r(e,"Unable to specify both block id and isSealed."):e.block.height?r(e,"Unable to specify both block id and block height."):t(e)})])}function qt(e){return Pe([function(n){return n.message.refBlock=e,H(n)}])}var Ft=[],zt=function(e){return e},Mt=["tempId"];function Jt(e){return["SIGNATURE",e.addr,e.keyId].join(".")}function Wt(e){return void 0===e&&(e={}),function(n){var t=l({},n,e,{signingFunction:e.signingFunction||n.signingFunction||function(e){return{addr:t.addr,keyId:t.keyId,signature:Jt(t)}}});return t}}var Vt={proposer:!1,authorizer:!1,payer:!1},Yt={__proto__:null,mockSend:function(e){return void 0===e&&(e=zt),function(t){return Promise.resolve(t).then(function(r){switch(t=r,!0){case fe(t):return function(e,t){return void 0===t&&(t=5),n.invariant(e.account,"mockAccountResponse(ix) -- ix.account is missing",e),n.invariant(e.account.addr,"mockAccountResponse(ix) -- ix.account.addr is missing",e),{account:{addr:e.account.addr,keys:Array.from({length:t},function(e,n){return{index:n,sequenceNumber:42}})}}}(t);case ve(t):return{tag:"GET_BLOCK",block:{id:"32"}};default:return e(t)}})}},authzFn:Wt,authzResolve:function(e){return void 0===e&&(e={}),function(n){return l({},n,{tempId:e.tempId||"WITH_RESOLVE",resolve:Wt(function(e,n){if(null==e)return{};var t,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n.indexOf(t=i[r])>=0||(o[t]=e[t]);return o}(e,Mt))})}},authzResolveMany:function(e){return void 0===e&&(e={}),function(n){return l({},n,{tempId:e.tempId||"AUTHZ_RESOLVE_MANY",resolve:function(){return[e.proposer&&Wt(e.proposer)({role:l({},Vt,{proposer:!0})})].concat(e.authorizations.map(Wt).map(function(e){return e({role:l({},Vt,{authorizer:!0})})}),[e.payer&&Wt(e.payer)({role:l({},Vt,{payer:!0})})]).filter(Boolean)}})}},sig:Jt,idof:function(e){return e.addr+"-"+e.keyId},run:function(e){return void 0===e&&(e=[]),xe([qt("123")].concat(e)).then(Dt)}};Object.defineProperty(e,"cadence",{enumerable:!0,get:function(){return s.template}}),Object.defineProperty(e,"cdc",{enumerable:!0,get:function(){return s.template}}),e.TestUtils=Yt,e.VERSION="0.0.56",e.account=function(e,n){return _t([Pn(e)],n).then(jn)},e.arg=function(e,n){return{value:e,xform:n}},e.args=function(e){return void 0===e&&(e=[]),Pe(e.map(M))},e.atBlockHeight=Kt,e.atBlockId=Ht,e.authorization=function(e,n,t,r){return{addr:e,signingFunction:n,keyId:t,sequenceNum:r}},e.authorizations=function(e){return void 0===e&&(e=[]),Pe(e.map(function(e){return z(e,{role:N})}))},e.block=function(e,t){var r=void 0===e?{}:e,o=r.sealed,i=void 0!==o&&o,u=r.id,a=r.height;return void 0===t&&(t={}),n.invariant(!(i&&u||i&&a),'Method: block -- Cannot pass "sealed" with "id" or "height"'),n.invariant(!(u&&a),'Method: block -- Cannot pass "id" and "height" simultaneously'),u?_t([In(),Ht(u)],t).then(jn):a?_t([In(),Kt(a)],t).then(jn):_t([In(i)],t).then(jn)},e.build=xe,e.config=Ve,e.createSignableVoucher=It,e.decode=function(e){try{return Promise.resolve(Ve().where(/^decoder\./)).then(function(n){var t=Object.entries(n).map(function(e){var n=e[0],t=e[1];return[n="/"+n.replace(/^decoder\./,"")+"$/",t]});return jn(e,Object.fromEntries(t))})}catch(e){return Promise.reject(e)}},e.destroy=function(e){return function(n){return delete n.assigns[e],H(n)}},e.encodeMessageFromSignable=function(e,n){var t,r,i=(t=e.voucher,(r=new Set(t.authorizers)).add(t.proposalKey.address),r.delete(t.payer),Array.from(r).map(o.withPrefix)),u=function(e){var n=new Set([e.payer]);return Array.from(n).map(o.withPrefix)}(e.voucher),a=i.includes(o.withPrefix(n)),c=u.includes(o.withPrefix(n));if(!a&&!c)throw new Ut(n);var s={cadence:e.voucher.cadence,refBlock:e.voucher.refBlock,computeLimit:e.voucher.computeLimit,arguments:e.voucher.arguments,proposalKey:l({},e.voucher.proposalKey,{address:o.sansPrefix(e.voucher.proposalKey.address)}),payer:o.sansPrefix(e.voucher.payer),authorizers:e.voucher.authorizers.map(o.sansPrefix),payloadSigs:e.voucher.payloadSigs.map(function(e){return l({},e,{address:o.sansPrefix(e.address)})})};return a?qn(s):Fn(s)},e.get=Be,e.getAccount=Pn,e.getBlock=In,e.getBlockByHeight=function(e){return console.warn("\n    %cFCL/SDK Deprecation Notice\n    ============================\n\n    The getBlockByHeight builder has been deprecated and will be removed in future versions of the Flow JS-SDK/FCL.\n    You can learn more (including a guide on common transition paths) here: https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0003-deprecate-get-block-by-height-builder\n\n    ============================\n  ","font-weight:bold;font-family:monospace;"),Pe([ee,function(n){return n.block.height=e,H(n)}])},e.getBlockById=function(e){return console.warn("\n    %cFCL/SDK Deprecation Notice\n    ============================\n\n    The getBlockById builder has been deprecated and will be removed in future versions of the Flow JS-SDK/FCL.\n    You can learn more (including a guide on common transition paths) here: https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0004-deprecate-get-block-by-id-builder\n\n    ============================\n  ","font-weight:bold;font-family:monospace;"),Pe([Q,function(n){return n.block.ids=[e],H(n)}])},e.getBlockHeader=function(e){return void 0===e&&(e=null),Pe([re,function(n){return n.block.isSealed=e,H(n)}])},e.getCollection=function(e){return void 0===e&&(e=null),Pe([oe,function(n){return n.collection.id=e,n}])},e.getEvents=function(e,n,t){return void 0===n&&void 0===t||console.warn("\n      %cFCL/SDK Deprecation Notice\n      ============================\n  \n      Passing a start and end into getEnvents has been deprecated and will not be supported in future versions of the Flow JS-SDK/FCL.\n      You can learn more (including a guide on common transition paths) here: https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0005-deprecate-start-end-get-events-builder\n  \n      ============================\n    ","font-weight:bold;font-family:monospace;"),Pe([$,function(r){return r.events.eventType=e,r.events.start=n,r.events.end=t,H(r)}])},e.getEventsAtBlockHeightRange=function(e,n,t){return Pe([$,function(r){return r.events.eventType=e,r.events.start=n,r.events.end=t,H(r)}])},e.getEventsAtBlockIds=function(e,n){return void 0===n&&(n=[]),Pe([$,function(t){return t.events.eventType=e,t.events.blockIds=n,H(t)}])},e.getLatestBlock=function(e){return void 0===e&&(e=!1),console.warn("\n    %cFCL/SDK Deprecation Notice\n    ============================\n\n    The getLatestBlock builder has been deprecated and will be removed in future versions of the Flow JS-SDK/FCL.\n    You can learn more (including a guide on common transition paths) here: https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0006-deprecate-get-latest-block-builder\n\n    ============================\n  ","font-weight:bold;font-family:monospace;"),Pe([Z,function(n){return n.block.isSealed=e,H(n)}])},e.getTransaction=function(e){return Pe([Y,function(n){return n.transaction.id=e,H(n)}])},e.getTransactionStatus=function(e){return Pe([V,function(n){return n.transaction.id=e,H(n)}])},e.interaction=O,e.invariant=function e(){var n=[].slice.call(arguments);if(n.length>1){var t=n,r=t[0],o=t[1];return e(function(e,n){var t=n.Bad;return r?(0,n.Ok)(e):t(e,o)})}var i=n[0];return function(e){return i(e,{Ok:H,Bad:q})}},e.isBad=be,e.isGetAccount=fe,e.isGetBlock=ve,e.isGetBlockByHeight=ge,e.isGetBlockById=pe,e.isGetBlockHeader=ye,e.isGetCollection=ke,e.isGetEvents=de,e.isGetLatestBlock=me,e.isGetTransaction=le,e.isGetTransactionStatus=se,e.isOk=function(e){return"OK"===e.status},e.isPing=he,e.isScript=ae,e.isTransaction=ce,e.isUnknown=ue,e.latestBlock=function(e,n){return console.warn('\n      %cFCL/SDK Deprecation Notice\n      ============================\n  \n      "latestBlock()" is deprecated, please use "block()" for this and future versions of FCL\n      You can learn more (including a guide on common transition paths) here: https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0008-deprecate-latest-block-method\n  \n      ============================\n    ',"font-weight:bold;font-family:monospace;"),_t([In(e)],n).then(jn)},e.limit=function(e){return function(n){return n.message.computeLimit=e,n}},e.param=function(e){return n={name:"param",transitionsPath:"https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0001-deprecate-params"},void console.warn("\n    %cFCL/SDK Deprecation Notice\n    ============================\n    The "+n.name+" builder has been deprecated and will be removed in future versions of the Flow JS-SDK/FCL.\n    You can learn more (including a guide on common transition paths) here: "+n.transitionsPath+"\n    ============================\n  ","font-weight:bold;font-family:monospace;");var n},e.params=function(e){return n={name:"params",transitionsPath:"https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0001-deprecate-params"},void console.error("\n    %cFCL/SDK Deprecation Notice\n    ============================\n    The "+n.name+" builder has been removed from the Flow JS-SDK/FCL.\n    You can learn more (including a guide on common transition paths) here: "+n.transitionsPath+"\n    ============================\n  ","font-weight:bold;font-family:monospace;");var n},e.payer=function(e){try{return Promise.resolve(z(e,{role:"payer"}))}catch(e){return Promise.reject(e)}},e.ping=function(){return ne},e.pipe=Pe,e.proposer=function(e){try{return Promise.resolve(z(e,{role:"proposer"}))}catch(e){return Promise.reject(e)}},e.put=we,e.ref=qt,e.resolve=Dt,e.resolveAccounts=At,e.resolveArguments=Cn,e.resolveCadence=Nn,e.resolveFinalNormalization=Lt,e.resolveProposerSequenceNumber=function(e){var n=e.node;return function(e){try{return ce(e)?e.accounts[e.proposer].sequenceNum?Promise.resolve(H(e)):Promise.resolve(xe([Pn(e.accounts[e.proposer].addr)])).then(function(t){return Promise.resolve(bn(t,{node:n})).then(function(n){return Promise.resolve(jn(n)).then(function(n){return e.accounts[e.proposer].sequenceNum=n.keys[e.accounts[e.proposer].keyId].sequenceNumber,H(e)})})}):Promise.resolve(H(e))}catch(e){return Promise.reject(e)}}},e.resolveRefBlockId=function(e){return function(n){try{return ce(n)?n.message.refBlock?Promise.resolve(H(n)):Promise.resolve(function(e){try{var n;return Promise.resolve(Pe(O(),[In()])).then(function(t){return n=t,Promise.resolve(bn(n,e)).then(function(e){return n=e,Promise.resolve(jn(n)).then(function(e){return(n=e).id})})})}catch(e){return Promise.reject(e)}}(e)).then(function(e){return n.message.refBlock=e,H(n)}):Promise.resolve(H(n))}catch(e){return Promise.reject(e)}}},e.resolveSignatures=Tt,e.resolveValidators=Gt,e.script=function(){return Pe([J,we("ix.cadence",s.template.apply(void 0,[].slice.call(arguments)))])},e.send=_t,e.transaction=function(){return Pe([W,we("ix.cadence",s.template.apply(void 0,[].slice.call(arguments))),function(e){return e.message.computeLimit=e.message.computeLimit||10,e.message.refBlock=e.message.refBlock||null,e.authorizations=e.authorizations||Ft,H(e)}])},e.update=Ae,e.validator=Ct,e.voucherToTxId=function(e){return function(e){return n=Zn(function(e){!function(e){st.forEach(function(n){return gt(e,n)}),lt.forEach(function(n){return gt(e.proposalKey,n,"proposalKey")}),ft.forEach(function(n){return gt(e,n)}),e.payloadSigs.forEach(function(e,n){dt.forEach(function(t){return gt(e,t,"payloadSigs",n)})}),mt.forEach(function(n){return gt(e,n)}),e.envelopeSigs.forEach(function(e,n){pt.forEach(function(t){return gt(e,t,"envelopeSigs",n)})})}(e);var n=tt(e),t=function(e){return e.map(function(e){var t=e.keyId,r=e.sig;return{signerIndex:n.get(e.address),keyId:t,sig:r}}).sort(function(e,n){return e.signerIndex>n.signerIndex?1:e.signerIndex<n.signerIndex?-1:e.keyId>n.keyId?1:e.keyId<n.keyId?-1:void 0}).map(function(e){return[e.signerIndex,e.keyId,$n(e.sig)]})};return[[Xn(e.cadence),e.arguments.map(Yn),Vn(e.refBlock),e.computeLimit,Wn(o.sansPrefix(e.proposalKey.address)),e.proposalKey.keyId,e.proposalKey.sequenceNum,Wn(o.sansPrefix(e.payer)),e.authorizers.map(function(e){return Wn(o.sansPrefix(e))})],t(e.payloadSigs),t(e.envelopeSigs)]}(e)),(t=new a.SHA3(256)).update(Buffer.from(n,"hex")),t.digest().toString("hex");var n,t}(e)},e.why=function(e){return e.reason}});
//# sourceMappingURL=sdk.umd.js.map
