!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("@onflow/sdk"),require("@onflow/util-invariant"),require("@onflow/types"),require("@onflow/util-actor"),require("@onflow/util-address"),require("@onflow/rlp"),require("@onflow/util-uid"),require("@onflow/util-template")):"function"==typeof define&&define.amd?define(["exports","@onflow/sdk","@onflow/util-invariant","@onflow/types","@onflow/util-actor","@onflow/util-address","@onflow/rlp","@onflow/util-uid","@onflow/util-template"],n):n((e||self).fcl={},e.sdk,e.utilInvariant,e.t$1,e.utilActor,e.utilAddress,e.rlp,e.utilUid,e.utilTemplate)}(this,function(e,n,t,r,o,i,a,s,u){function c(e){if(e&&e.__esModule)return e;var n=Object.create(null);return e&&Object.keys(e).forEach(function(t){if("default"!==t){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r.get?r:{enumerable:!0,get:function(){return e[t]}})}}),n.default=e,n}var l=c(n),d=c(r),f=c(a),p="0.0.78",h=function(e){try{return Promise.resolve(n.config().where(e)).then(function(n){return Object.fromEntries(Object.entries(n).map(function(n){var t=n[1];return[n[0].replace(e,""),t]}))})}catch(e){return Promise.reject(e)}},v={can:!("undefined"==typeof window),get:function(e){try{return Promise.resolve(JSON.parse(sessionStorage.getItem(e)))}catch(e){return Promise.reject(e)}},put:function(e,n){try{return Promise.resolve(sessionStorage.setItem(e,JSON.stringify(n)))}catch(e){return Promise.reject(e)}}};n.config({"discovery.wallet.method.default":"IFRAME/RPC","fcl.storage.default":v});var m=function(e){return function(n){return typeof n===e}},y=function(e){return null!=e},g=m("object"),P=m("string"),b=m("function"),E=m("number");function w(e){return b(e)?e(l.arg,d):[]}var R=function(e){return void 0===e&&(e={}),Promise.resolve(function(e){try{return t.invariant(y(e.cadence),"query({ cadence }) -- cadence is required"),t.invariant(P(e.cadence),"query({ cadence }) -- cadence must be a string"),Promise.resolve(l.config.get("accessNode.api")).then(function(e){t.invariant(e,'Required value for "accessNode.api" not defined in config. See: https://github.com/onflow/flow-js-sdk/blob/master/packages/fcl/src/exec/query.md#configuration')})}catch(e){return Promise.reject(e)}}(e)).then(function(){return l.send([l.script(e.cadence),l.args(w(e.args||[])),e.limit&&"number"==typeof e.limit&&l.limit(e.limit)]).then(l.decode)})};function S(){return S=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},S.apply(this,arguments)}function A(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function I(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(t)return(t=t.call(e)).next.bind(t);if(Array.isArray(e)||(t=function(e,n){if(e){if("string"==typeof e)return A(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?A(e,n):void 0}}(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var C={f_type:"Service",f_vsn:"1.0.0"},O={f_type:"Identity",f_vsn:"1.0.0"},j={f_type:"USER",f_vsn:"1.0.0"},D={f_type:"PollingResponse",f_vsn:"1.0.0"},N={f_type:"CompositeSignature",f_vsn:"1.0.0"};function k(e){return null==e?null:"1.0.0"===e.f_vsn?e:S({old:e},C,{type:"frame",endpoint:e.endpoint,params:e.params||{},data:e.data||{}})}function x(e){return null==e?null:"1.0.0"===e.f_vsn?e:S({},C,{type:"back-channel-rpc",endpoint:e.endpoint,method:e.method,params:e.params||{},data:e.data||{}})}function L(e){return null==e?null:(null==e.method&&(e=S({},e,{type:"local-view",method:"VIEW/IFRAME"})),"1.0.0"===e.f_vsn?e:S({},C,{type:e.type||"local-view",method:e.method,endpoint:e.endpoint,data:e.data||{},params:e.params||{}}))}var T={"back-channel-rpc":x,"pre-authz":function(e){return null==e?null:"1.0.0"===e.f_vsn?e:S({},C,{type:e.type,uid:e.id,endpoint:e.endpoint,method:e.method,identity:S({},O,{address:i.withPrefix(e.addr),keyId:e.keyId}),params:e.params,data:e.data})},authz:function(e){return null==e?null:"1.0.0"===e.f_vsn?e:S({},C,{type:e.type,uid:e.id,endpoint:e.endpoint,method:e.method,identity:S({},O,{address:i.withPrefix(e.addr),keyId:e.keyId}),params:e.params,data:e.data})},authn:function(e){return null==e?null:"1.0.0"===e.f_vsn?e:S({},C,{type:e.type,uid:e.id,endpoint:e.authn,id:e.pid,provider:{address:i.withPrefix(e.addr),name:e.name,icon:e.icon}})},frame:k,"open-id":function(e){return null==e?null:"1.0.0"===e.f_vsn?e:null},"user-signature":function(e){if(null==e)return null;if("1.0.0"===e.f_vsn)return e;throw new Error("Invalid user-signature service")},"local-view":L,"account-proof":function(e){if(null==e)return null;if("1.0.0"===e.f_vsn)return e;throw new Error("Invalid account-proof service")},"authn-refresh":function(e){if(null==e)return null;if("1.0.0"===e.f_vsn)return e;throw new Error("Invalid authn-refresh service")}};function F(e){return f.encode([e.provider.address||e.provider.name||"UNSPECIFIED",e.id]).toString("hex")}var _=function(e){try{var n=(e=function(e){return e.addr=e.addr?i.withPrefix(e.addr):null,e.paddr=e.paddr?i.withPrefix(e.paddr):null,e}(e)).services||[];return Promise.resolve(function(e,n){try{if(null==e||null==n)return Promise.resolve([]);var t=new URL(e);return t.searchParams.append("code",n),Promise.resolve(fetch(t,{method:"GET",headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()})).then(function(e){if(Array.isArray(e))return e;var n=[];if(Array.isArray(e.authorizations))for(var t,r=I(e.authorizations);!(t=r()).done;)n.push(S({type:"authz",keyId:e.keyId},t.value));return null!=e.provider&&n.push(S({type:"authn",id:"wallet-provider#authn"},e.provider)),n})}catch(e){return Promise.reject(e)}}(e.hks,e.code)).then(function(t){var r,o,a=(r=n,o=t,void 0===r&&(r=[]),void 0===o&&(o=[]),[].concat(r,o)).map(function(n){return function(e,n){try{return T[e.type](e,n)}catch(n){return console.error("Unrecognized FCL Service Type ["+e.type+"]",e,n),e}}(n,e)}),s=function(e,n){return n.find(function(e){return"authn"===e.type})}(0,a);return S({},j,{addr:i.withPrefix(e.addr),cid:F(s),loggedIn:!0,services:a,expiresAt:e.expires})})}catch(e){return Promise.reject(e)}};function U(e,n){return void 0===e&&(e=[]),e.find(function(e){return e.type===n})}function B(e){var n=new URL(e.endpoint);if(n.searchParams.append("l6n",window.location.origin),null!=e.params)for(var t=0,r=Object.entries(e.params||{});t<r.length;t++){var o=r[t];n.searchParams.append(o[0],o[1])}return n}function M(e,n){void 0===n&&(n={});var t=n.method||"POST",r="GET"===t?void 0:JSON.stringify(n.data||e.data||{});return fetch(B(e),{method:t,headers:S({},e.headers||{},n.headers||{},{"Content-Type":"application/json"}),body:r}).then(function(e){return e.json()})}function V(e){var n,t;return null==e?null:"1.0.0"===e.f_vsn?e:S({},D,{status:null!=(n=e.status)?n:"APPROVED",reason:null!=(t=e.reason)?t:null,data:e.compositeSignature||e.data||S({},e)||{},updates:x(e.authorizationUpdates),local:k((e.local||[])[0])})}var H=function e(n,r){void 0===r&&(r=function(){return!0});try{if(t.invariant(n,"Missing Polling Service",{service:n}),!r())throw new Error("Externally Halted");return Promise.resolve(M(n,{method:W(n)}).then(V)).then(function(n){switch(n.status){case"APPROVED":return n.data;case"DECLINED":throw new Error("Declined: "+(n.reason||"No reason supplied."));default:return Promise.resolve(new Promise(function(e){return setTimeout(e,500)})).then(function(){return e(n.updates,r)})}})}catch(e){return Promise.reject(e)}},z={"HTTP/GET":"GET","HTTP/POST":"POST"},W=function(e){return t.invariant(z[e.method],"Invalid Service Method for type back-channel-rpc",{service:e}),z[e.method]},K="FCL_IFRAME";function q(e){t.invariant(!document.getElementById(K),"Attempt at triggering multiple Frames",{src:e});var n=document.createElement("iframe");return n.src=e,n.id=K,n.allow="usb *; hid *",n.frameBorder="0",n.style.cssText="\n  position:fixed;\n  top: 0px;\n  right: 0px;\n  bottom: 0px;\n  left: 0px;\n  height: 100%;\n  width: 100vw;\n  display:block;\n  background:rgba(0,0,0,0.25);\n  z-index: 2147483647;\n  box-sizing: border-box;\n",document.body.append(n),[n.contentWindow,function(){document.getElementById(K)&&document.getElementById(K).remove()}]}var Y=null,J=null;function G(e){var n,t;return null==Y||null!=(n=Y)&&n.closed?(t=window,Y=t.open(e,"FCL_POP","toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=640, height=770, top="+(t.top.outerHeight/2+t.top.screenY-385)+", left="+(t.top.outerWidth/2+t.top.screenX-320))):J!==e?(Y.location.replace(e),Y.focus()):Y.focus(),J=e,[Y,function(){Y&&!Y.closed&&Y.close(),Y=null}]}var $=null,X=null;function Z(e){var n;return null==$||null!=(n=$)&&n.closed?$=window.open(e,"_blank"):X!==e?($.location.replace(e),$.focus()):$.focus(),X=e,[$,function(){$&&!$.closed&&$.close(),$=null}]}var Q,ee={"VIEW/IFRAME":q,"VIEW/POP":G,"VIEW/TAB":Z},ne=function(e,n,t,r){try{return Promise.resolve(M(e,{data:S({fclVersion:p,service:{params:e.params,data:e.data,type:e.type},config:r},n)}).then(V)).then(function(n){if("APPROVED"===n.status)return n.data;if("DECLINED"===n.status)throw new Error("Declined: "+(n.reason||"No reason supplied."));if("REDIRECT"===n.status)return n;if("PENDING"===n.status){var t=!0;return Promise.resolve(function(e,n){void 0===n&&(n={});try{try{return Promise.resolve(ee[e.method](B(e),n))}catch(t){throw console.error("execLocal({service, opts = {}})",t,{service:e,opts:n}),t}}catch(e){return Promise.reject(e)}}(L(n.local))).then(function(e){var r=e[1],o=function(){try{r(),t=!1}catch(e){console.error("Frame Close Error",e)}};return H(n.updates,function(){return t}).then(function(e){return o(),e}).catch(function(e){throw console.error(e),o(),e})})}throw console.error("Auto Decline: Invalid Response",{service:e,resp:n}),new Error("Auto Decline: Invalid Response")})}catch(e){return Promise.reject(e)}},te="FCL:VIEW:CLOSE",re="FCL:VIEW:READY",oe="FCL:VIEW:RESPONSE",ie=function(e){return"string"==typeof e&&e.toLowerCase()},ae=new Set(["monetizationstart","monetizationpending","monetizationprogress","monetizationstop"]),se=function(e,n){return console.warn("DEPRECATION NOTICE","Received "+e+", please use "+n+" for this and future versions of FCL")},ue=function(e){var n=e.close,t=e.send,r=e.onReady,o=e.onResponse,i=e.onMessage;return function(e){try{if("object"!=typeof e.data)return;if(ae.has(e.data.type))return;ie(e.data.type)===ie(te)&&n(),ie(e.data.type)===ie(re)&&r(e,{send:t,close:n}),ie(e.data.type)===ie(oe)&&o(e,{send:t,close:n}),i(e,{send:t,close:n}),ie(e.data.type)===ie("FCL:FRAME:READY")&&(se(e.data.type,re),r(e,{send:t,close:n})),ie(e.data.type)===ie("FCL:FRAME:RESPONSE")&&(se(e.data.type,oe),o(e,{send:t,close:n})),ie(e.data.type)===ie("FCL:FRAME:CLOSE")&&(se(e.data.type,te),n()),ie(e.data.type)===ie("FCL::CHALLENGE::RESPONSE")&&(se(e.data.type,oe),o(e,{send:t,close:n})),ie(e.data.type)===ie("FCL::AUTHZ_READY")&&(se(e.data.type,re),r(e,{send:t,close:n})),ie(e.data.type)===ie("FCL::CHALLENGE::CANCEL")&&(se(e.data.type,te),n()),ie(e.data.type)===ie("FCL::CANCEL")&&(se(e.data.type,te),n())}catch(e){console.error("Frame Callback Error",e),n()}}},ce=function(){},le=function(){},de=function(){},fe=function(){},pe=function e(n){var r=n.service,o=n.msg,i=void 0===o?{}:o,a=n.opts,s=void 0===a?{}:a,u=n.config,c=void 0===u?{}:u;try{return Promise.resolve(h(/^service\./)).then(function(n){return Promise.resolve(h(/^app\.detail\./)).then(function(o){var a=S({},c,{services:n,app:o});return function(n,o){try{var u=Promise.resolve(he[r.method](r,i,s,a)).then(function(n){return"REDIRECT"===n.status?(t.invariant(r.type===n.data.type,"Cannot shift recursive service type in execService"),Promise.resolve(e({service:n.data,msg:i,opts:s,config:a}))):n})}catch(e){return o(e)}return u&&u.then?u.then(void 0,o):u}(0,function(e){throw console.error("execService({service, msg = {}, opts = {}, config = {}})",e,{service:r,msg:i,opts:s,config:c}),e})})})}catch(e){return Promise.reject(e)}},he={"HTTP/RPC":ne,"HTTP/POST":ne,"IFRAME/RPC":function(e,n,t,r){return new Promise(function(o,i){var a,u=s.uid(),c=t.includeOlderJsonRpcCall;n.data=null!=(a=e.data)?a:null,function(e,n){if(void 0===n&&(n={}),null==e)return{send:ce,close:ce};var t=n.onClose||ce;window.addEventListener("message",ue({close:a,send:s,onReady:n.onReady||ce,onResponse:n.onResponse||ce,onMessage:n.onMessage||ce}));var r=q(B(e)),o=r[0],i=r[1];return{send:s,close:a};function a(){try{window.removeEventListener("message",ue),i(),t()}catch(e){console.error("Frame Close Error",e)}}function s(e){try{o.postMessage(JSON.parse(JSON.stringify(e||{})),"*")}catch(n){console.error("Frame Send Error",e,n)}}}(e,{onReady:function(t,o){var i=o.send;try{try{i({type:"FCL:VIEW:READY:RESPONSE",fclVersion:p,body:n,service:{params:e.params,data:e.data,type:e.type},config:r}),i({fclVersion:p,type:"FCL:FRAME:READY:RESPONSE",body:n,service:{params:e.params,data:e.data,type:e.type},config:r,deprecated:{message:"FCL:FRAME:READY:RESPONSE is deprecated and replaced with type: FCL:VIEW:READY:RESPONSE"}}),c&&i({jsonrpc:"2.0",id:u,method:"fcl:sign",params:[n,e.params],deprecated:{message:"jsonrpc is deprecated and replaced with type: FCL:VIEW:READY:RESPONSE"}})}catch(e){throw e}return Promise.resolve()}catch(e){return Promise.reject(e)}},onResponse:function(e,n){var t=n.close;try{if("object"!=typeof e.data)return;var r=V(e.data);switch(r.status){case"APPROVED":o(r.data),t();break;case"DECLINED":i("Declined: "+(r.reason||"No reason supplied")),t();break;case"REDIRECT":o(r),t();break;default:i("Declined: No reason supplied"),t()}}catch(e){throw console.error("execIframeRPC onResponse error",e),e}},onMessage:function(e,n){var t=n.close;try{if("object"!=typeof e.data)return;if("2.0"!==e.data.jsonrpc)return;if(e.data.id!==u)return;var r=V(e.data.result);switch(r.status){case"APPROVED":o(r.data),t();break;case"DECLINED":i("Declined: "+(r.reason||"No reason supplied")),t();break;case"REDIRECT":o(r),t();break;default:i("Declined: No reason supplied"),t()}}catch(e){throw console.error("execIframeRPC onMessage error",e),e}},onClose:function(){i("Declined: Externally Halted")}})})},"POP/RPC":function(e,n,t,r){return new Promise(function(o,i){var a=s.uid(),u=t.redir,c=t.includeOlderJsonRpcCall;n.data=e.data,function(e,n){if(void 0===n&&(n={}),null==e)return{send:le,close:le};var t=n.onClose||le;window.addEventListener("message",ue({close:s,send:u,onReady:n.onReady||le,onResponse:n.onResponse||le,onMessage:n.onMessage||le}));var r=G(B(e)),o=r[0],i=r[1],a=setInterval(function(){o&&o.closed&&s()},500);return{send:u,close:s};function s(){try{window.removeEventListener("message",ue),clearInterval(a),i(),t()}catch(e){console.error("Popup Close Error",e)}}function u(e){try{o.postMessage(JSON.parse(JSON.stringify(e||{})),"*")}catch(n){console.error("Popup Send Error",e,n)}}}(e,{onReady:function(t,o){var i=o.send;try{try{i({fclVersion:p,type:"FCL:VIEW:READY:RESPONSE",body:n,service:{params:e.params,data:e.data,type:e.type},config:r}),i({fclVersion:p,type:"FCL:FRAME:READY:RESPONSE",body:n,service:{params:e.params,data:e.data,type:e.type},config:r,deprecated:{message:"FCL:FRAME:READY:RESPONSE is deprecated and replaced with type: FCL:VIEW:READY:RESPONSE"}}),c&&i({jsonrpc:"2.0",id:a,method:"fcl:sign",params:[n,e.params]})}catch(e){throw e}return Promise.resolve()}catch(e){return Promise.reject(e)}},onResponse:function(e,n){var t=n.close;try{if("object"!=typeof e.data)return;var r=V(e.data);switch(r.status){case"APPROVED":o(r.data),!u&&t();break;case"DECLINED":i("Declined: "+(r.reason||"No reason supplied")),t();break;case"REDIRECT":o(r),t();break;default:i("Declined: No reason supplied"),t()}}catch(e){throw console.error("execPopRPC onResponse error",e),e}},onMessage:function(e,n){var t=n.close;try{if("object"!=typeof e.data)return;if("2.0"!==e.data.jsonrpc)return;if(e.data.id!==a)return;var r=V(e.data.result);switch(r.status){case"APPROVED":o(r.data),!u&&t();break;case"DECLINED":i("Declined: "+(r.reason||"No reason supplied")),t();break;case"REDIRECT":o(r),t();break;default:i("Declined: No reason supplied"),t()}}catch(e){throw console.error("execPopRPC onMessage error",e),e}},onClose:function(){i("Declined: Externally Halted")}})})},"TAB/RPC":function(e,n,t,r){return new Promise(function(o,i){var a=s.uid(),u=t.redir,c=t.includeOlderJsonRpcCall;n.data=e.data,function(e,n){if(void 0===n&&(n={}),null==e)return{send:de,close:de};var t=n.onClose||de;window.addEventListener("message",ue({close:s,send:u,onReady:n.onReady||de,onResponse:n.onResponse||de,onMessage:n.onMessage||de}));var r=Z(B(e)),o=r[0],i=r[1],a=setInterval(function(){o&&o.closed&&s()},500);return{send:u,close:s};function s(){try{window.removeEventListener("message",ue),clearInterval(a),i(),t()}catch(e){console.error("Tab Close Error",e)}}function u(e){try{o.postMessage(JSON.parse(JSON.stringify(e||{})),"*")}catch(n){console.error("Tab Send Error",e,n)}}}(e,{onReady:function(t,o){var i=o.send;try{try{i({fclVersion:p,type:"FCL:VIEW:READY:RESPONSE",body:n,service:{params:e.params,data:e.data,type:e.type},config:r}),i({fclVersion:p,type:"FCL:FRAME:READY:RESPONSE",body:n,service:{params:e.params,data:e.data,type:e.type},config:r,deprecated:{message:"FCL:FRAME:READY:RESPONSE is deprecated and replaced with type: FCL:VIEW:READY:RESPONSE"}}),c&&i({jsonrpc:"2.0",id:a,method:"fcl:sign",params:[n,e.params]})}catch(e){throw e}return Promise.resolve()}catch(e){return Promise.reject(e)}},onResponse:function(e,n){var t=n.close;try{if("object"!=typeof e.data)return;var r=V(e.data);switch(r.status){case"APPROVED":o(r.data),!u&&t();break;case"DECLINED":i("Declined: "+(r.reason||"No reason supplied")),t();break;case"REDIRECT":o(r),t();break;default:i("Declined: No reason supplied"),t()}}catch(e){throw console.error("execPopRPC onResponse error",e),e}},onMessage:function(e,n){var t=n.close;try{if("object"!=typeof e.data)return;if("2.0"!==e.data.jsonrpc)return;if(e.data.id!==a)return;var r=V(e.data.result);switch(r.status){case"APPROVED":o(r.data),!u&&t();break;case"DECLINED":i("Declined: "+(r.reason||"No reason supplied")),t();break;case"REDIRECT":o(r),t();break;default:i("Declined: No reason supplied"),t()}}catch(e){throw console.error("execPopRPC onMessage error",e),e}},onClose:function(){i("Declined: Externally Halted")}})})},"EXT/RPC":function(e,n,t,r){return new Promise(function(t,o){!function(e,n){void 0===n&&(n={});try{var t,r=function(){try{window.removeEventListener("message",ue),a()}catch(e){console.error("Extension Close Error",e)}},o=function(e){try{var n;null==(n=window[i])||n.flow.send(JSON.parse(JSON.stringify(e||{})))}catch(n){console.error("Extension Send Error",e,n)}};if(null==e)return Promise.resolve({send:fe,close:fe});var i=e.endpoint,a=n.onClose||fe;window.addEventListener("message",ue({close:r,send:o,onReady:n.onReady||fe,onResponse:n.onResponse||fe,onMessage:n.onMessage||fe})),Promise.resolve(null==(t=window[i])?void 0:t.flow.enable()).then(function(){return{send:o,close:r}})}catch(e){return Promise.reject(e)}}(e,{onReady:function(t,o){var i=o.send;try{try{i({fclVersion:p,type:"FCL:VIEW:READY:RESPONSE",body:n,service:{params:e.params,data:e.data,type:e.type},config:r})}catch(e){throw e}return Promise.resolve()}catch(e){return Promise.reject(e)}},onResponse:function(e,n){var r=n.close;try{if("object"!=typeof e.data)return;var i=V(e.data);switch(i.status){case"APPROVED":t(i.data),r();break;case"DECLINED":o("Declined: "+(i.reason||"No reason supplied")),r();break;case"REDIRECT":t(i),r();break;default:o("Declined: No reason supplied"),r()}}catch(e){throw console.error("execExtRPC onResponse error",e),e}},onClose:function(){o("Declined: Externally Halted")}})})}},ve=function(e,n){try{me(e,n);var t=n[0].addr,r=[],o=[];return n.map(function(e){r.push(e.signature),o.push(e.keyId)}),Promise.resolve(R({cadence:ye,args:function(n,i){return[n(t,i.Address),n(e,i.String),n(o,i.Array([i.Int])),n(r,i.Array([i.String]))]}}))}catch(e){return Promise.reject(e)}},me=function(e,n){return t.invariant(/^[0-9a-f]+$/i.test(e),"Signed message must be a hex string"),t.invariant(Array.isArray(n)&&n.every(function(e,n,t){return"CompositeSignature"===e.f_type}),"Must include an Array of CompositeSignatures to verify"),t.invariant(n.map(function(e){return e.addr}).every(function(e,n,t){return e===t[0]}),"User signatures to be verified must be from a single account address"),!0},ye='\n  import Crypto\n\n  pub fun getHashAlgo(_ x: Int): HashAlgorithm {\n    switch x {\n    case 1:\n        return HashAlgorithm.SHA2_256\n    case 2:\n        return HashAlgorithm.SHA2_384\n    case 3:\n        return HashAlgorithm.SHA3_256\n    case 4:\n        return HashAlgorithm.SHA3_384\n    case 5:\n        return HashAlgorithm.KMAC128_BLS_BLS12_381\n    default:\n        return HashAlgorithm.SHA3_256\n    }\n  }\n      \n  pub fun main(\n    acctAddress: Address,\n    message: String,\n    keyIds: [Int],\n    signatures: [String],\n  ): Bool {\n\n    let keyList = Crypto.KeyList()\n    let account = getAccount(acctAddress)\n    \n    let rawPublicKeys: [String] = []\n    let weights: [UFix64] = []\n    let signAlgos: [UInt] = []\n    let hashAlgos: [UInt] = []\n    let uniqueKeys: {Int: Bool} = {}\n    \n    for id in keyIds {\n      uniqueKeys[id] = true\n    }\n\n    assert(uniqueKeys.keys.length == keyIds.length, message: "Invalid KeyId: Duplicate key found for account")\n\n    var counter = 0\n    while (counter < keyIds.length) {\n      let accountKey = account.keys.get(keyIndex: keyIds[counter]) ?? panic("Key provided does not exist on account")\n      rawPublicKeys.append(String.encodeHex(accountKey.publicKey.publicKey))\n      weights.append(accountKey.weight)\n      signAlgos.append(UInt(accountKey.publicKey.signatureAlgorithm.rawValue))\n      hashAlgos.append(UInt(accountKey.hashAlgorithm.rawValue))\n      counter = counter + 1\n    }\n\n    var totalWeight = 0.0\n    for weight in weights {\n      totalWeight = totalWeight + weight\n    }\n    \n    assert(totalWeight >= 1000.0, message: "Signature key weights do not meet threshold >= 1000.0")\n\n    var i = 0\n    for rawPublicKey in rawPublicKeys {\n      keyList.add(\n        PublicKey(\n          publicKey: rawPublicKey.decodeHex(),\n          signatureAlgorithm: signAlgos[i] == 2 ? SignatureAlgorithm.ECDSA_secp256k1  : SignatureAlgorithm.ECDSA_P256\n        ),\n        hashAlgorithm: getHashAlgo(Int(hashAlgos[i])),\n        weight: weights[i]\n      )\n      i = i + 1\n    }\n\n    let signatureSet: [Crypto.KeyListSignature] = []\n\n    var j = 0\n    for signature in signatures {\n      signatureSet.append(\n        Crypto.KeyListSignature(\n          keyIndex: j,\n          signature: signature.decodeHex()\n        )\n      )\n      j = j + 1\n    }\n      \n    let signedData = message.decodeHex()\n    \n    return keyList.verify(\n      signatureSet: signatureSet,\n      signedData: signedData\n    )\n  }\n';function ge(e){return null==e?null:"1.0.0"===e.f_vsn?e:S({},N,{addr:i.sansPrefix(e.addr||e.address),signature:e.signature||e.sig,keyId:e.keyId})}function Pe(e,n,t){if(!e.s){if(t instanceof Ee){if(!t.s)return void(t.o=Pe.bind(null,e,n));1&n&&(n=t.s),t=t.v}if(t&&t.then)return void t.then(Pe.bind(null,e,n),Pe.bind(null,e,2));e.s=n,e.v=t;var r=e.o;r&&r(e)}}var be=function(e,n){try{return console.warn("\n    %cFCL/SDK Deprecation Notice\n    ============================\n    verifyUserSignatures is no longer exported as fcl.currentUser().verifyUserSignatures\n    and is now available as fcl.verifyUserSignatures\n    ============================\n    ","font-weight:bold;font-family:monospace;"),Promise.resolve(ve(e,n))}catch(e){return Promise.reject(e)}},Ee=function(){function e(){}return e.prototype.then=function(n,t){var r=new e,o=this.s;if(o){var i=1&o?n:t;if(i){try{Pe(r,1,i(this.v))}catch(e){Pe(r,2,e)}return r}return this}return this.o=function(e){try{var o=e.v;1&e.s?Pe(r,1,n?n(o):o):t?Pe(r,1,t(o)):Pe(r,2,o)}catch(e){Pe(r,2,e)}},r},e}();function we(e){return e instanceof Ee&&1&e.s}var Re=function(e){try{return Le(),Promise.resolve(Ce({redir:!0})).then(function(n){var r=U(n.services,"user-signature");return t.invariant(r,"Current user must have authorized a signing service."),Se(function(){return Promise.resolve(pe({service:r,msg:Be(e)})).then(function(e){return Array.isArray(e)?e.map(function(e){return ge(e)}):[ge(e)]})},function(e){return e})})}catch(e){return Promise.reject(e)}};function Se(e,n){try{var t=e()}catch(e){return n(e)}return t&&t.then?t.then(void 0,n):t}var Ae=function(){return Promise.resolve(Ce()).then(function(e){return n.arg(i.withPrefix(e.addr),d.Address)})},Ie=function(e){try{return Le(),Promise.resolve(S({},e,{tempId:"CURRENT_USER",resolve:function(e,n){try{return Promise.resolve(Ce({redir:!0})).then(function(t){var r;function o(n){if(r)return n;if(a)return S({},e,{tempId:"CURRENT_USER",resolve:null,addr:i.sansPrefix(a.identity.address),keyId:a.identity.keyId,sequenceNum:null,signature:null,signingFunction:function(e){try{return Promise.resolve(pe({service:a,msg:e,opts:{includeOlderJsonRpcCall:!0}})).then(ge)}catch(e){return Promise.reject(e)}}});throw new Error("No Authz or PreAuthz Service configured for CURRENT_USER")}var a=U(t.services,"authz"),s=U(t.services,"pre-authz"),u=function(){if(s)return Promise.resolve(pe({service:s,msg:n})).then(function(e){var n=function(e){var n=function(e){return{f_type:"PreAuthzResponse",f_vsn:"1.0.0",proposer:(e||{}).proposer,payer:(e||{}).payer||[],authorization:(e||{}).authorization||[]}}(e),t=[];null!=n.proposer&&t.push(["PROPOSER",n.proposer]);for(var r,o=I(n.payer||[]);!(r=o()).done;)t.push(["PAYER",r.value]);for(var i,a=I(n.authorization||[]);!(i=a()).done;)t.push(["AUTHORIZER",i.value]);return t.map(function(e){var n=e[0],t=e[1];return{tempId:[t.identity.address,t.identity.keyId].join("|"),addr:t.identity.address,keyId:t.identity.keyId,signingFunction:function(e){return pe({service:t,msg:e})},role:{proposer:"PROPOSER"===n,payer:"PAYER"===n,authorizer:"AUTHORIZER"===n}}})}(e);return r=1,n})}();return u&&u.then?u.then(o):o(u)})}catch(e){return Promise.reject(e)}}}))}catch(e){return Promise.reject(e)}},Ce=function(e){var r=void 0===e?{}:e,i=r.service,a=r.redir,s=void 0!==a&&a;try{return Promise.resolve(new Promise(function(e,r){try{return Le(),Promise.resolve(_e()).then(function(r){return Promise.resolve(Oe()).then(function(a){var u={redir:s};return Promise.resolve(function(){try{return Promise.resolve(n.config.first(["discovery.wallet","challenge.handshake"])).then(function(e){return Promise.resolve(n.config.get("discovery.authn.include",[])).then(function(t){return Promise.resolve(n.config.first(["discovery.wallet.method","discovery.wallet.method.default"])).then(function(n){return{type:"authn",endpoint:e,method:n,discoveryAuthnInclude:t}})})})}catch(e){return Promise.reject(e)}}()).then(function(c){var l=U(r.services,"authn-refresh");return Promise.resolve(n.config.get("fcl.warning.suppress.redir")).then(function(n){var d;function f(n){if(d)return n;var t=function(e,n){try{var t=Se(function(){return Promise.resolve(pe({service:S({},i||c,{method:(null==c?void 0:c.method)||i.method||"IFRAME/RPC"}),msg:a,opts:u,config:{discoveryAuthnInclude:c.discoveryAuthnInclude}})).then(function(e){return Promise.resolve(_(e)).then(function(e){o.send(je,Ne,e)})})},function(e){console.error("Error while authenticating",e)})}catch(e){return n(!0,e)}return t&&t.then?t.then(n.bind(null,!1),n.bind(null,!0)):n(!1,t)}(0,function(n,t){return Promise.resolve(_e()).then(function(r){if(e(r),n)throw t;return t})});return t&&t.then?t.then(function(){}):void 0}s&&!n&&console.warn("You are manually enabling a very experimental feature that is not yet standard, use at your own risk.\n         You can disable this warning by setting fcl.warning.suppress.redir to true in your config"),t.invariant(i||c.endpoint,'\n        If no service passed to "authenticate," then "discovery.wallet" must be defined in config.\n        See: "https://docs.onflow.org/fcl/reference/api/#setting-configuration-values"\n      ');var p=function(){if(r.loggedIn){if(l)return function(e,n){try{var t=Se(function(){return Promise.resolve(pe({service:l,msg:a,opts:u})).then(function(e){return Promise.resolve(_(e)).then(function(e){o.send(je,Ne,e)})})},function(e){console.error("Error: Could not refresh authentication.",e)})}catch(e){return n()}return t&&t.then?t.then(n,n):n()}(0,function(){return Promise.resolve(_e()).then(function(n){var t=e(n);return d=1,t})});var n=e(r);return d=1,n}}();return p&&p.then?p.then(f):f(p)})})})})}catch(e){return Promise.reject(e)}}))}catch(e){return Promise.reject(e)}},Oe=function(){try{var e=Date.now();return Promise.resolve(n.config.get("fcl.appDomainTag")).then(function(n){return{timestamp:e,appDomainTag:n,extensions:window.fcl_extensions||[]}})}catch(e){return Promise.reject(e)}},je="CURRENT_USER",De="CURRENT_USER/UPDATED",Ne="SET_CURRENT_USER",ke='{\n  "f_type": "User",\n  "f_vsn": "1.0.0",\n  "addr":null,\n  "cid":null,\n  "loggedIn":null,\n  "expiresAt":null,\n  "services":[]\n}',xe=((Q={})[o.INIT]=function(e){try{return"undefined"==typeof window&&console.warn('\n        %cFCL Warning\n        ============================\n        "currentUser" is only available in the browser.\n        For more info, please see the docs: https://docs.onflow.org/fcl/\n        ============================\n        ',"font-weight:bold;font-family:monospace;"),e.merge(JSON.parse(ke)),Promise.resolve(n.config.first(["fcl.storage","fcl.storage.default"])).then(function(n){var t=function(){if(n.can)return Promise.resolve(function(e){try{var n=JSON.parse(ke);return Promise.resolve(e.get(je)).then(function(t){return null!=t&&n.f_vsn!==t.f_vsn?(e.removeItem(je),n):t||n})}catch(e){return Promise.reject(e)}}(n)).then(function(n){(function(e){return null==e.expiresAt||0===e.expiresAt||e.expiresAt>Date.now()})(n)&&e.merge(n)})}();if(t&&t.then)return t.then(function(){})})}catch(e){return Promise.reject(e)}},Q[o.SUBSCRIBE]=function(e,n){e.subscribe(n.from),e.send(n.from,De,S({},e.all()))},Q[o.UNSUBSCRIBE]=function(e,n){e.unsubscribe(n.from)},Q.SNAPSHOT=function(e,n){try{return n.reply(S({},e.all())),Promise.resolve()}catch(e){return Promise.reject(e)}},Q[Ne]=function(e,t,r){try{return e.merge(r),Promise.resolve(n.config.first(["fcl.storage","fcl.storage.default"])).then(function(n){n.can&&n.put(je,e.all()),e.broadcast(De,S({},e.all()))})}catch(e){return Promise.reject(e)}},Q.DEL_CURRENT_USER=function(e,t){try{return e.merge(JSON.parse(ke)),Promise.resolve(n.config.first(["fcl.storage","fcl.storage.default"])).then(function(n){n.can&&n.put(je,e.all()),e.broadcast(De,S({},e.all()))})}catch(e){return Promise.reject(e)}},Q),Le=function(){return o.spawn(xe,je)};function Te(){Le(),o.send(je,"DEL_CURRENT_USER")}function Fe(e){Le();var n="@EXIT",t=o.spawn(function(t){try{var r;return t.send(je,o.SUBSCRIBE),Promise.resolve(function(e,n,t){for(var r;;){var o=e();if(we(o)&&(o=o.v),!o)return i;if(o.then){r=0;break}var i=t();if(i&&i.then){if(!we(i)){r=1;break}i=i.s}}var a=new Ee,s=Pe.bind(null,a,2);return(0===r?o.then(c):1===r?i.then(u):(void 0).then(function(){(o=e())?o.then?o.then(c).then(void 0,s):c(o):Pe(a,1,i)})).then(void 0,s),a;function u(n){i=n;do{if(!(o=e())||we(o)&&!o.v)return void Pe(a,1,i);if(o.then)return void o.then(c).then(void 0,s);we(i=t())&&(i=i.v)}while(!i||!i.then);i.then(u).then(void 0,s)}function c(e){e?(i=t())&&i.then?i.then(u).then(void 0,s):u(i):Pe(a,1,i)}}(function(){return!r&&1},0,function(){return Promise.resolve(t.receive()).then(function(i){if(i.tag===n)return t.send(je,o.UNSUBSCRIBE),void(r=1);e(i.data)})}))}catch(e){return Promise.reject(e)}});return function(){return o.send(t,n)}}function _e(){return Le(),o.send(je,"SNAPSHOT",null,{expectReply:!0,timeout:0})}var Ue,Be=function(e){return t.invariant(/^[0-9a-f]+$/i.test(e),"Message must be a hex string"),{message:e}},Me=function(){return{authenticate:Ce,unauthenticate:Te,authorization:Ie,signUserMessage:Re,verifyUserSignatures:be,subscribe:Fe,snapshot:_e,resolveArgument:Ae}};Me.authenticate=Ce,Me.unauthenticate=Te,Me.authorization=Ie,Me.signUserMessage=Re,Me.verifyUserSignatures=be,Me.subscribe=Fe,Me.snapshot=_e,Me.resolveArgument=Ae;var Ve="POLL",He=function(e){try{return Promise.resolve(n.send([n.getTransactionStatus(e)]).then(n.decode))}catch(e){return Promise.reject(e)}},ze=function(e){return e.status>=4},We=function(e){return e.status>=3},Ke=function(e){return e.status>=2},qe=((Ue={})[o.INIT]=function(e){try{return Promise.resolve(He(e.self())).then(function(n){ze(n)||setTimeout(function(){return e.sendSelf(Ve)},2500),e.merge(n)})}catch(e){return Promise.reject(e)}},Ue[o.SUBSCRIBE]=function(e,n){e.subscribe(n.from),e.send(n.from,o.UPDATED,e.all())},Ue[o.UNSUBSCRIBE]=function(e,n){e.unsubscribe(n.from)},Ue[o.SNAPSHOT]=function(e,n){try{return n.reply(e.all()),Promise.resolve()}catch(e){return Promise.reject(e)}},Ue.POLL=function(e){try{return Promise.resolve(He(e.self())).then(function(n){var t,r;ze(n)||setTimeout(function(){return e.sendSelf(Ve)},2500),t=e.all(),r=n,JSON.stringify(t)!==JSON.stringify(r)&&e.broadcast(o.UPDATED,n),e.merge(n)})}catch(e){return Promise.reject(e)}},Ue),Ye=function(e){if("object"==typeof e&&(e=e.transactionId),null==e)throw new Error("transactionId required");return e},Je=function(e){return o.spawn(qe,Ye(e))};function Ge(e){function n(n){return o.subscriber(Ye(e),Je,n)}function t(e){return function(t){void 0===t&&(t={});var r=t.suppress||!1;return new Promise(function(t,o){var i=n(function(n){n.statusCode&&!r?(o(n.errorMessage),i()):e(n)&&(t(n),i())})})}}return{snapshot:function(){return o.snapshoter(e,Je)},subscribe:n,onceFinalized:t(Ke),onceExecuted:t(We),onceSealed:t(ze)}}Ge.isUnknown=function(e){return e.status>=0},Ge.isPending=function(e){return e.status>=1},Ge.isFinalized=Ke,Ge.isExecuted=We,Ge.isSealed=ze,Ge.isExpired=function(e){return 5===e.status};var $e,Xe=function(e){try{var t=setTimeout;return Promise.resolve(n.config().get("fcl.eventPollRate",1e4)).then(function(n){return t(function(){return e.sendSelf("TICK")},n)})}catch(e){return Promise.reject(e)}},Ze=(($e={}).TICK=function(e){try{if(!e.hasSubs())return Promise.resolve();var t=e.get("hwm"),r=function(){if(null==t){var r=e.put;return Promise.resolve(n.latestBlock()).then(function(n){r.call(e,"hwm",n);var t=e.put;return Promise.resolve(Xe(e)).then(function(n){t.call(e,"tick",n)})})}return Promise.resolve(n.latestBlock()).then(function(r){return e.put("hwm",r),Promise.resolve(n.send([n.getEvents(e.self(),t.height,r.height-1)]).then(n.decode)).then(function(n){for(var t,r=I(n);!(t=r()).done;)e.broadcast("UPDATED",t.value.data);var o=e.put;return Promise.resolve(Xe(e)).then(function(n){o.call(e,"tick",n)})})})}();return Promise.resolve(r&&r.then?r.then(function(){}):void 0)}catch(e){return Promise.reject(e)}},$e[o.SUBSCRIBE]=function(e,n){try{var t=function(){e.subscribe(n.from)},r=function(){if(!e.hasSubs()){var n=e.put;return Promise.resolve(Xe(e)).then(function(t){n.call(e,"tick",t)})}}();return Promise.resolve(r&&r.then?r.then(t):t())}catch(e){return Promise.reject(e)}},$e[o.UNSUBSCRIBE]=function(e,n){e.unsubscribe(n.from),e.hasSubs()||(clearTimeout(e.get("tick")),e.delete("tick"),e.delete("hwm"))},$e),Qe=function(e){return o.spawn(Ze,e)},en=function(e){void 0===e&&(e=[]);try{return Promise.resolve(n.config.get("discovery.authn.endpoint")).then(function(r){return t.invariant(Boolean(r),'"discovery.authn.endpoint" in config must be defined.'),Promise.resolve(n.config.get("discovery.authn.include",[])).then(function(n){var t=new URL(r);return fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fclVersion:p,include:n})}).then(function(e){return e.json()}).then(function(n){return[].concat(e,n)})})})}catch(e){return Promise.reject(e)}};function nn(e){void 0===e&&(e=[]);var n=window.fcl_extensions||[];return[].concat(n,e)}var tn,rn="authn",on=((tn={})[o.INIT]=function(e){try{return"undefined"==typeof window&&console.warn('\n      %cFCL Warning\n      ============================\n      "fcl.discovery" is only available in the browser.\n      For more info, please see the docs: https://docs.onflow.org/fcl/\n      ============================\n      ',"font-weight:bold;font-family:monospace;"),Promise.resolve((n={type:rn},t=n.type,function(){var e=arguments;return function(n){return[].slice.call(e).reduce(function(e,n){return e.then(n)},Promise.resolve(n))}}(en,nn,function(e){return function(e,n){return void 0===e&&(e=[]),e.filter(function(e){return e.type===n})}(e,t)})([]))).then(function(n){e.put("results",n)})}catch(e){return Promise.reject(e)}var n,t},tn[o.SUBSCRIBE]=function(e,n){e.subscribe(n.from),e.send(n.from,"UPDATED",S({},e.all()))},tn[o.UNSUBSCRIBE]=function(e,n){return e.unsubscribe(n.from)},tn.SNAPSHOT=function(e,n){try{return Promise.resolve(n.reply(S({},e.all())))}catch(e){return Promise.reject(e)}},tn),an=function(){return o.spawn(on,rn)},sn={authn:{subscribe:function(e){return o.subscriber(rn,an,e)},snapshot:function(){return o.snapshoter(rn,an)}}},un=function(e,n){void 0===n&&(n=function(){});var t=function(t){var r=t.data;"object"==typeof r&&null!=typeof r&&r.type===e&&n(function(e){var n;return e.deprecated&&console.warn("DEPRECATION NOTICE",e.deprecated.message),null==e||null==(n=e.body)||delete n.interaction,e}(r))};return window.addEventListener("message",t),function(){return window.removeEventListener("message",t)}},cn=function(e,n){void 0===n&&(n={}),window.location!==window.parent.location?window.parent.postMessage(S({},n,{type:e}),"*"):window.opener.postMessage(S({},n,{type:e}),"*")},ln=function(e,n){return Buffer.from(e.padEnd(2*n,0),"hex")},dn={__proto__:null,sendMsgToFCL:cn,ready:function(e,n){un("FCL:VIEW:READY:RESPONSE",e),cn("FCL:VIEW:READY")},close:function(){cn("FCL:VIEW:CLOSE")},approve:function(e){cn("FCL:VIEW:RESPONSE",{f_type:"PollingResponse",f_vsn:"1.0.0",status:"APPROVED",reason:null,data:e})},decline:function(e){cn("FCL:VIEW:RESPONSE",{f_type:"PollingResponse",f_vsn:"1.0.0",status:"DECLINED",reason:e,data:null})},redirect:function(e){cn("FCL:VIEW:RESPONSE",{f_type:"PollingResponse",f_vsn:"1.0.0",status:"REDIRECT",reason:null,data:e})},onMessageFromFCL:un,encodeMessageFromSignable:n.encodeMessageFromSignable,CompositeSignature:function(e,n,t){this.f_type=N.f_type,this.f_vsn=N.f_vsn,this.addr=i.withPrefix(e),this.keyId=Number(n),this.signature=t},encodeMessageForProvableAuthnSigning:function(e,n,r){void 0===r&&(r=""),t.invariant(e,"Encode Message From Provable Authn Error: address must be defined"),t.invariant(n,"Encode Message From Provable Authn Error: timestamp must be defined");var o=ln(Buffer.from("FLOW-V0.0-user").toString("hex"),32).toString("hex"),s=ln(Buffer.from(r).toString("hex"),32).toString("hex");return o+(r?a.encode([s,i.withPrefix(e),n]).toString("hex"):a.encode([i.withPrefix(e),n]).toString("hex"))},encodeMessageForProvableAuthnVerifying:function(e,n,r){void 0===r&&(r=""),t.invariant(e,"Encode Message From Provable Authn Error: address must be defined"),t.invariant(n,"Encode Message From Provable Authn Error: timestamp must be defined");var o,s=r?(o=Buffer.from(r).toString("hex"),Buffer.from(o.padEnd(64,0),"hex")).toString("hex"):null;return r?a.encode([s,i.withPrefix(e),n]).toString("hex"):a.encode([i.withPrefix(e),n]).toString("hex")},injectExtService:function(e){"authn"===e.type&&null!=e.endpoint?(Array.isArray(window.fcl_extensions)||(window.fcl_extensions=[]),window.fcl_extensions.push(e)):console.warn("Authn service is required")}},fn=Me().authorization,pn=d;Object.defineProperty(e,"TestUtils",{enumerable:!0,get:function(){return n.TestUtils}}),Object.defineProperty(e,"account",{enumerable:!0,get:function(){return n.account}}),Object.defineProperty(e,"arg",{enumerable:!0,get:function(){return n.arg}}),Object.defineProperty(e,"args",{enumerable:!0,get:function(){return n.args}}),Object.defineProperty(e,"atBlockHeight",{enumerable:!0,get:function(){return n.atBlockHeight}}),Object.defineProperty(e,"atBlockId",{enumerable:!0,get:function(){return n.atBlockId}}),Object.defineProperty(e,"authorization",{enumerable:!0,get:function(){return n.authorization}}),Object.defineProperty(e,"authorizations",{enumerable:!0,get:function(){return n.authorizations}}),Object.defineProperty(e,"block",{enumerable:!0,get:function(){return n.block}}),Object.defineProperty(e,"build",{enumerable:!0,get:function(){return n.build}}),Object.defineProperty(e,"config",{enumerable:!0,get:function(){return n.config}}),Object.defineProperty(e,"createSignableVoucher",{enumerable:!0,get:function(){return n.createSignableVoucher}}),Object.defineProperty(e,"decode",{enumerable:!0,get:function(){return n.decode}}),Object.defineProperty(e,"getAccount",{enumerable:!0,get:function(){return n.getAccount}}),Object.defineProperty(e,"getBlock",{enumerable:!0,get:function(){return n.getBlock}}),Object.defineProperty(e,"getBlockByHeight",{enumerable:!0,get:function(){return n.getBlockByHeight}}),Object.defineProperty(e,"getBlockById",{enumerable:!0,get:function(){return n.getBlockById}}),Object.defineProperty(e,"getBlockHeader",{enumerable:!0,get:function(){return n.getBlockHeader}}),Object.defineProperty(e,"getCollection",{enumerable:!0,get:function(){return n.getCollection}}),Object.defineProperty(e,"getEvents",{enumerable:!0,get:function(){return n.getEvents}}),Object.defineProperty(e,"getEventsAtBlockHeightRange",{enumerable:!0,get:function(){return n.getEventsAtBlockHeightRange}}),Object.defineProperty(e,"getEventsAtBlockIds",{enumerable:!0,get:function(){return n.getEventsAtBlockIds}}),Object.defineProperty(e,"getLatestBlock",{enumerable:!0,get:function(){return n.getLatestBlock}}),Object.defineProperty(e,"getTransaction",{enumerable:!0,get:function(){return n.getTransaction}}),Object.defineProperty(e,"getTransactionStatus",{enumerable:!0,get:function(){return n.getTransactionStatus}}),Object.defineProperty(e,"invariant",{enumerable:!0,get:function(){return n.invariant}}),Object.defineProperty(e,"isBad",{enumerable:!0,get:function(){return n.isBad}}),Object.defineProperty(e,"isOk",{enumerable:!0,get:function(){return n.isOk}}),Object.defineProperty(e,"latestBlock",{enumerable:!0,get:function(){return n.latestBlock}}),Object.defineProperty(e,"limit",{enumerable:!0,get:function(){return n.limit}}),Object.defineProperty(e,"param",{enumerable:!0,get:function(){return n.param}}),Object.defineProperty(e,"params",{enumerable:!0,get:function(){return n.params}}),Object.defineProperty(e,"payer",{enumerable:!0,get:function(){return n.payer}}),Object.defineProperty(e,"ping",{enumerable:!0,get:function(){return n.ping}}),Object.defineProperty(e,"pipe",{enumerable:!0,get:function(){return n.pipe}}),Object.defineProperty(e,"proposer",{enumerable:!0,get:function(){return n.proposer}}),Object.defineProperty(e,"ref",{enumerable:!0,get:function(){return n.ref}}),Object.defineProperty(e,"script",{enumerable:!0,get:function(){return n.script}}),Object.defineProperty(e,"send",{enumerable:!0,get:function(){return n.send}}),Object.defineProperty(e,"transaction",{enumerable:!0,get:function(){return n.transaction}}),Object.defineProperty(e,"validator",{enumerable:!0,get:function(){return n.validator}}),Object.defineProperty(e,"why",{enumerable:!0,get:function(){return n.why}}),Object.defineProperty(e,"display",{enumerable:!0,get:function(){return i.display}}),Object.defineProperty(e,"sansPrefix",{enumerable:!0,get:function(){return i.sansPrefix}}),Object.defineProperty(e,"withPrefix",{enumerable:!0,get:function(){return i.withPrefix}}),Object.defineProperty(e,"cadence",{enumerable:!0,get:function(){return u.template}}),Object.defineProperty(e,"cdc",{enumerable:!0,get:function(){return u.template}}),e.VERSION=p,e.WalletUtils=dn,e.authenticate=function(e){return void 0===e&&(e={}),Me().authenticate(e)},e.authz=fn,e.currentUser=Me,e.discovery=sn,e.events=function(e){return{subscribe:function(n){return o.subscriber(e,Qe,n)}}},e.logIn=function(e){return void 0===e&&(e={}),Me().authenticate(e)},e.mutate=function(e){void 0===e&&(e={});try{return Promise.resolve(function(n,r){try{var o=Promise.resolve(function(e){try{return t.invariant(y(e),"mutate(opts) -- opts is required"),t.invariant(g(e),"mutate(opts) -- opts must be an object"),t.invariant(y(e.cadence),"mutate({ cadence }) -- cadence is required"),t.invariant(P(e.cadence),"mutate({ cadence }) -- cadence must be a string"),Promise.resolve(l.config.get("accessNode.api")).then(function(e){t.invariant(e,'Required value for "accessNode.api" not defined in config. See: https://github.com/onflow/flow-js-sdk/blob/master/packages/fcl/src/exec/query.md#configuration')})}catch(e){return Promise.reject(e)}}(e)).then(function(){return Promise.resolve(l.config().get("fcl.authz",Me().authorization)).then(function(n){return l.send([l.transaction(e.cadence),l.args(w(e.args||[])),e.limit&&E(e.limit)&&l.limit(e.limit),l.proposer(e.proposer||e.authz||n),l.payer(e.payer||e.authz||n),l.authorizations(e.authorizations||[e.authz||n])]).then(l.decode)})})}catch(e){return r(e)}return o&&o.then?o.then(void 0,r):o}(0,function(e){throw e}))}catch(e){return Promise.reject(e)}},e.query=R,e.reauthenticate=function(e){return void 0===e&&(e={}),Me().unauthenticate(),Me().authenticate(e)},e.serialize=function(e,t){void 0===e&&(e=[]),void 0===t&&(t={});try{return Promise.resolve(n.config.first(["sdk.resolve"],t.resolve||n.resolve)).then(function(t){function r(){return Promise.resolve(t(e)).then(function(e){return JSON.stringify(n.createSignableVoucher(e),null,2)})}var o=function(){if(Array.isArray(e))return Promise.resolve(n.pipe(n.interaction(),e)).then(function(n){e=n})}();return o&&o.then?o.then(r):r()})}catch(e){return Promise.reject(e)}},e.signUp=function(e){return void 0===e&&(e={}),Me().authenticate(e)},e.t=pn,e.tx=Ge,e.unauthenticate=function(){return Me().unauthenticate()},e.verifyUserSignatures=ve});
//# sourceMappingURL=fcl.umd.js.map
